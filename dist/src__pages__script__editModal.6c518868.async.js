"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5586],{30675:function(ie,b,e){e.r(b);var C=e(57213),v=e.n(C),f=e(54306),d=e.n(f),O=e(88265),l=e(63313),p=e.n(l),K=e(28756),r=e(60858),P=e(75310),B=e(24378),o=e(95176),S=e(5558),E=e(36035),g=e(82755),D=e(10726),I=e(77385),m=e(62753),T=e(82428),a=e(11527),c=K.Z.Option,t=function(s){var _=s.treeData,u=s.currentNode,U=s.content,X=s.handleCancel,z=s.visible,N=s.socketMessage,x=(0,l.useState)(""),k=d()(x,2),y=k[0],R=k[1],j=(0,l.useState)("javascript"),Z=d()(j,2),ee=Z[0],A=Z[1],F=(0,l.useState)(),H=d()(F,2),L=H[0],te=H[1],J=(0,l.useState)(""),$=d()(J,2),de=$[0],oe=$[1],fe=(0,l.useState)(!1),V=d()(fe,2),Pe=V[0],ue=V[1],he=(0,l.useState)(!1),W=d()(he,2),Oe=W[0],me=W[1],Me=(0,l.useState)(""),ce=d()(Me,2),G=ce[0],w=ce[1],pe=(0,m.F)(),ne=pe.theme,_e=(0,l.useRef)(null),le=(0,l.useState)(!1),Ee=d()(le,2),ge=Ee[0],re=Ee[1],ae=(0,l.useState)(null),q=d()(ae,2),ve=q[0],De=q[1],Ce=function(){X()},Ie=function(i,M){if(!(M.key===de||!i)&&M.type!=="directory"){var Q=(0,T.H$)(i);te(M),A(Q),Te(M),oe(M.key)}},Te=function(i){o.W.get("".concat(S.Z.apiPrefix,"scripts/").concat(i.title,"?path=").concat(i.parent||"")).then(function(M){var Q=M.code,Y=M.data;Q===200&&R(Y)})},Re=function(){w("");var i=_e.current.getValue().replace(/\r\n/g,`
`);o.W.put("".concat(S.Z.apiPrefix,"scripts/run"),{filename:L.title,path:L.parent||"",content:i}).then(function(M){var Q=M.code,Y=M.data;Q===200&&(re(!0),De(Y))})},se=function(){!L||!L.title||!ve||o.W.put("".concat(S.Z.apiPrefix,"scripts/stop"),{filename:L.title,path:L.parent||"",pid:ve}).then(function(i){var M=i.code,Q=i.data;M===200&&re(!1)})};return(0,l.useEffect)(function(){if(N){var h=N.type,i=N.message,M=N.references;h==="manuallyRunScript"&&((0,T.x$)(i)&&setTimeout(function(){re(!1)},300),G&&(i=`
`.concat(i)),w("".concat(G).concat(i)))}},[N]),(0,l.useEffect)(function(){if(w(""),u){te(u),R(U),oe(u.key);var h=(0,T.H$)(u.title);A(h)}},[U,u]),(0,a.jsxs)(r.Z,{className:"edit-modal",closable:!1,title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Z,{treeExpandAction:"click",style:{marginRight:8,width:150},value:de,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:_,placeholder:O.ZP.get("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6"),fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:Ie}),(0,a.jsxs)(K.Z,{value:ee,style:{width:110,marginRight:8},onChange:function(i){A(i)},children:[(0,a.jsx)(c,{value:"javascript",children:"javascript"}),(0,a.jsx)(c,{value:"typescript",children:"typescript"}),(0,a.jsx)(c,{value:"shell",children:"shell"}),(0,a.jsx)(c,{value:"python",children:"python"})]}),(0,a.jsx)(B.Z,{type:"primary",style:{marginRight:8},onClick:ge?se:Re,children:ge?O.ZP.get("\u505C\u6B62"):O.ZP.get("\u8FD0\u884C")}),(0,a.jsx)(B.Z,{type:"primary",style:{marginRight:8},onClick:function(){w("")},children:O.ZP.get("\u6E05\u7A7A\u65E5\u5FD7")}),(0,a.jsx)(B.Z,{type:"primary",style:{marginRight:8},onClick:function(){ue(!0)},children:O.ZP.get("\u4FDD\u5B58")}),(0,a.jsx)(B.Z,{type:"primary",style:{marginRight:8},onClick:function(){se(),X()},children:O.ZP.get("\u9000\u51FA")})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:Ce,open:z,children:[(0,a.jsxs)(E.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},children:[(0,a.jsx)(g.ZP,{language:ee,value:y,theme:ne,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1},onMount:function(i){_e.current=i}}),(0,a.jsx)("pre",{style:{height:"100%",padding:"0 15px"},children:G})]}),(0,a.jsx)(D.default,{visible:Pe,handleCancel:function(){ue(!1)},file:v()({content:_e.current&&_e.current.getValue().replace(/\r\n/g,`
`)},L)}),(0,a.jsx)(I.default,{visible:Oe,handleCancel:function(){me(!1)}})]})};b.default=t},10726:function(ie,b,e){e.r(b);var C=e(25359),v=e.n(C),f=e(57213),d=e.n(f),O=e(49811),l=e.n(O),p=e(54306),K=e.n(p),r=e(88265),P=e(63313),B=e.n(P),o=e(67393),S=e(9835),E=e(84163),g=e(22159),D=e(95176),I=e(5558),m=e(11527),T=function(c){var t=c.file,n=c.handleCancel,s=c.visible,_=o.Z.useForm(),u=K()(_,1),U=u[0],X=(0,P.useState)(!1),z=K()(X,2),N=z[0],x=z[1],k=function(){var y=l()(v()().mark(function R(j){var Z;return v()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:x(!0),Z=d()(d()(d()({},t),j),{},{originFilename:t.title}),D.W.post("".concat(I.Z.apiPrefix,"scripts"),Z).then(function(F){var H=F.code,L=F.data;H===200&&(S.ZP.success(r.ZP.get("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F")),n(L)),x(!1)});case 3:case"end":return A.stop()}},R)}));return function(j){return y.apply(this,arguments)}}();return(0,P.useEffect)(function(){U.resetFields(),x(!1)},[t,s]),(0,m.jsx)(E.Z,{title:r.ZP.get("\u4FDD\u5B58\u6587\u4EF6"),open:s,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){U.validateFields().then(function(R){k(R)}).catch(function(R){console.log("Validate Failed:",R)})},onCancel:function(){return n()},confirmLoading:N,children:(0,m.jsxs)(o.Z,{form:U,layout:"vertical",name:"script_modal",initialValues:{filename:t==null?void 0:t.title,path:(t==null?void 0:t.parent)||""},children:[(0,m.jsx)(o.Z.Item,{name:"filename",label:r.ZP.get("\u6587\u4EF6\u540D"),rules:[{required:!0,message:r.ZP.get("\u8BF7\u8F93\u5165\u6587\u4EF6\u540D")}],children:(0,m.jsx)(g.Z,{placeholder:r.ZP.get("\u8BF7\u8F93\u5165\u6587\u4EF6\u540D")})}),(0,m.jsx)(o.Z.Item,{name:"path",label:r.ZP.get("\u4FDD\u5B58\u76EE\u5F55"),children:(0,m.jsx)(g.Z,{placeholder:r.ZP.get("\u8BF7\u8F93\u5165\u4FDD\u5B58\u76EE\u5F55\uFF0C\u9ED8\u8BA4scripts\u76EE\u5F55")})})]})})};b.default=T},77385:function(ie,b,e){e.r(b);var C=e(25359),v=e.n(C),f=e(57213),d=e.n(f),O=e(49811),l=e.n(O),p=e(54306),K=e.n(p),r=e(88265),P=e(63313),B=e.n(P),o=e(67393),S=e(9835),E=e(84163),g=e(22159),D=e(95176),I=e(5558),m=e(11527),T=function(c){var t=c.file,n=c.handleCancel,s=c.visible,_=o.Z.useForm(),u=K()(_,1),U=u[0],X=(0,P.useState)(!1),z=K()(X,2),N=z[0],x=z[1],k=function(){var y=l()(v()().mark(function R(j){var Z;return v()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:x(!0),Z=d()(d()({},t),j),D.W.post("".concat(I.Z.apiPrefix,"scripts"),Z).then(function(F){var H=F.code,L=F.data;H===200&&(S.ZP.success(r.ZP.get("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F")),n(L)),x(!1)});case 3:case"end":return A.stop()}},R)}));return function(j){return y.apply(this,arguments)}}();return(0,P.useEffect)(function(){U.resetFields(),x(!1)},[t,s]),(0,m.jsx)(E.Z,{title:r.ZP.get("\u8FD0\u884C\u8BBE\u7F6E"),open:s,forceRender:!0,centered:!0,onCancel:function(){return n()},children:(0,m.jsx)(o.Z,{form:U,layout:"vertical",name:"setting_modal",initialValues:t,children:(0,m.jsx)(o.Z.Item,{name:"filename",label:r.ZP.get("\u5F85\u5F00\u53D1"),rules:[{required:!0,message:r.ZP.get("\u5F85\u5F00\u53D1")}],children:(0,m.jsx)(g.Z,{placeholder:r.ZP.get("\u5F85\u5F00\u53D1")})})})})};b.default=T},62753:function(ie,b,e){e.d(b,{F:function(){return p},e:function(){return l}});var C=e(54306),v=e.n(C),f=e(63313),d=e.n(f),O=e(82428),l=function(){var r=(0,f.useState)("100%"),P=v()(r,2),B=P[0],o=P[1],S=(0,f.useState)(0),E=v()(S,2),g=E[0],D=E[1],I=(0,f.useState)(-48),m=v()(I,2),T=m[0],a=m[1],c=(0,f.useState)(!1),t=v()(c,2),n=t[0],s=t[1],_=(0,f.useMemo)(function(){return(0,O.ZP)()},[]),u=_.platform;return(0,f.useEffect)(function(){u==="mobile"&&document.body.offsetWidth<768?(o("auto"),D(0),a(0),s(!0),document.body.setAttribute("data-mode","phone")):(o("100%"),D(0),a(-48),s(!1),document.body.setAttribute("data-mode","desktop"))},[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:T,width:B,marginLeft:g},isPhone:n}},p=function(){var r=(0,f.useState)(),P=v()(r,2),B=P[0],o=P[1],S=function(){var g=window.matchMedia("(prefers-color-scheme: dark)"),D=localStorage.getItem("qinglong_dark_theme"),I=g.matches&&D!=="light"||D==="dark";o(I?"vs-dark":"vs")};return(0,f.useEffect)(function(){var E=window.matchMedia("(prefers-color-scheme: dark)"),g=localStorage.getItem("qinglong_dark_theme"),D=E.matches&&g!=="light"||g==="dark";o(D?"vs-dark":"vs");var I=function(T){(g==="auto"||!g)&&(T.matches?o("vs-dark"):o("vs"))};typeof E.addEventListener=="function"?E.addEventListener("change",I):typeof E.addListener=="function"&&E.addListener(I)},[]),{theme:B,reloadTheme:S}}},28756:function(ie,b,e){var C=e(87807),v=e(60795),f=e(84875),d=e.n(f),O=e(40804),l=e(92976),p=e(63313),K=e.n(p),r=e(82259),P=e(23474),B=e(7893),o=e(65189),S=e(76737),E=e(16082),g=e(1020),D=e(91967),I=e(60934),m=function(t,n){var s={};for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&n.indexOf(_)<0&&(s[_]=t[_]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,_=Object.getOwnPropertySymbols(t);u<_.length;u++)n.indexOf(_[u])<0&&Object.prototype.propertyIsEnumerable.call(t,_[u])&&(s[_[u]]=t[_[u]]);return s},T="SECRET_COMBOBOX_MODE_DO_NOT_USE",a=function(n,s){var _,u=n.prefixCls,U=n.bordered,X=U===void 0?!0:U,z=n.className,N=n.getPopupContainer,x=n.dropdownClassName,k=n.popupClassName,y=n.listHeight,R=y===void 0?256:y,j=n.placement,Z=n.listItemHeight,ee=Z===void 0?24:Z,A=n.size,F=n.disabled,H=n.notFoundContent,L=n.status,te=n.showArrow,J=m(n,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),$=p.useContext(r.E_),de=$.getPopupContainer,oe=$.getPrefixCls,fe=$.renderEmpty,V=$.direction,Pe=$.virtual,ue=$.dropdownMatchSelectWidth,he=p.useContext(o.Z),W=oe("select",u),Oe=oe(),me=(0,I.ri)(W,V),Me=me.compactSize,ce=me.compactItemClassnames,G=p.useMemo(function(){var Y=J.mode;if(Y!=="combobox")return Y===T?"combobox":Y},[J.mode]),w=G==="multiple"||G==="tags",pe=te!==void 0?te:J.loading||!(w||G==="combobox"),ne=(0,p.useContext)(S.aM),_e=ne.status,le=ne.hasFeedback,Ee=ne.isFormItemInput,ge=ne.feedbackIcon,re=(0,g.F)(_e,L),ae;H!==void 0?ae=H:G==="combobox"?ae=null:ae=(fe||P.Z)("Select");var q=(0,D.Z)((0,v.Z)((0,v.Z)({},J),{multiple:w,hasFeedback:le,feedbackIcon:ge,showArrow:pe,prefixCls:W})),ve=q.suffixIcon,De=q.itemIcon,Ce=q.removeIcon,Ie=q.clearIcon,Te=(0,l.Z)(J,["suffixIcon","itemIcon"]),Re=d()(k||x,(0,C.Z)({},"".concat(W,"-dropdown-").concat(V),V==="rtl")),se=Me||A||he,h=p.useContext(B.Z),i=F!=null?F:h,M=d()((_={},(0,C.Z)(_,"".concat(W,"-lg"),se==="large"),(0,C.Z)(_,"".concat(W,"-sm"),se==="small"),(0,C.Z)(_,"".concat(W,"-rtl"),V==="rtl"),(0,C.Z)(_,"".concat(W,"-borderless"),!X),(0,C.Z)(_,"".concat(W,"-in-form-item"),Ee),_),(0,g.Z)(W,re,le),ce,z),Q=function(){return j!==void 0?j:V==="rtl"?"bottomRight":"bottomLeft"};return p.createElement(O.ZP,(0,v.Z)({ref:s,virtual:Pe,dropdownMatchSelectWidth:ue},Te,{transitionName:(0,E.mL)(Oe,(0,E.q0)(j),J.transitionName),listHeight:R,listItemHeight:ee,mode:G,prefixCls:W,placement:Q(),direction:V,inputIcon:ve,menuItemSelectedIcon:De,removeIcon:Ce,clearIcon:Ie,notFoundContent:ae,className:M,getPopupContainer:N||de,dropdownClassName:Re,showArrow:le||te,disabled:i}))},c=p.forwardRef(a);c.SECRET_COMBOBOX_MODE_DO_NOT_USE=T,c.Option=O.Wx,c.OptGroup=O.Xo,b.Z=c}}]);
