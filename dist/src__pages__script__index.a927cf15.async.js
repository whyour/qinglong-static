(self.webpackChunk=self.webpackChunk||[]).push([[6534,9064,8673,440,833],{38582:function(e,t,n){"use strict";var r=(0,n(55258).Z)({scriptUrl:["//at.alicdn.com/t/c/font_3354854_lc939gab1iq.js"]});t.Z=r},51805:function(e,t,n){"use strict";var r=n(57213),a=n.n(r),i=n(63313);t.Z=function(e,t,n){var r=n.treeNodeFilterProp;return(0,i.useMemo)((function(){var n=[];if(!t)return{treeData:e,keys:n};var i=t.toUpperCase();function o(e,t){var n=t[r];return String(n).toUpperCase().includes(i)}return{treeData:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.map((function(t){var i=t.children,l=r||o(0,t),s=e(i||[],l);return l||s.length?(s.length&&n.push(t.key),a()(a()({},t),{},{children:s})):null})).filter((function(e){return e}))}(e),keys:n}}),[e,t,r])}},98912:function(e,t,n){"use strict";n.r(t);var r=n(57213),a=n.n(r),i=n(54306),o=n.n(i),l=n(88265),s=n(63313),c=n(28756),u=n(60858),d=n(75310),p=n(24378),g=n(57229),f=n(15207),h=n(36035),m=n(82755),v=n(68793),Z=n(12417),b=n(3094),P=n(40141),y=n(21758),k=n(99120),x=n.n(k),w=n(11527),j=c.Z.Option;t.default=function(e){var t=e.treeData,n=e.currentNode,r=e.content,i=e.handleCancel,k=e.visible,S=(0,s.useState)(""),C=o()(S,2),q=C[0],_=C[1],E=(0,s.useState)("javascript"),I=o()(E,2),B=I[0],R=I[1],D=(0,s.useState)(),F=o()(D,2),N=F[0],T=F[1],M=(0,s.useState)(),A=o()(M,2),V=A[0],H=A[1],L=(0,s.useState)(!1),O=o()(L,2),U=O[0],W=O[1],K=(0,s.useState)(!1),z=o()(K,2),Q=z[0],X=z[1],Y=(0,s.useState)(""),G=o()(Y,2),$=G[0],J=G[1],ee=(0,b.F)().theme,te=(0,s.useRef)(null),ne=(0,s.useState)(!1),re=o()(ne,2),ae=re[0],ie=re[1],oe=(0,s.useState)(null),le=o()(oe,2),se=le[0],ce=le[1],ue=function(e){g.W.get("".concat(f.Z.apiPrefix,"scripts/detail?file=").concat(e.title,"&path=").concat(e.parent||"")).then((function(e){var t=e.code,n=e.data;200===t&&_(n)}))},de=function(){N&&N.title&&se&&g.W.put("".concat(f.Z.apiPrefix,"scripts/stop"),{filename:N.title,path:N.parent||"",pid:se}).then((function(e){var t=e.code;e.data;200===t&&ie(!1)}))},pe=(0,s.useCallback)((function(e){var t=e.message;(0,P.x$)(t)&&setTimeout((function(){ie(!1)}),300),J((function(e){return"".concat(e).concat(t)}))}),[]);return(0,s.useEffect)((function(){var e=y.Z.getInstance();return e.subscribe("manuallyRunScript",pe),function(){e.unsubscribe("manuallyRunScript",pe)}}),[]),(0,s.useEffect)((function(){if(J(""),n){T(n),_(r),H(n.key);var e=(0,P.H$)(n.title);R(e)}}),[r,n]),(0,w.jsxs)(u.Z,{className:"edit-modal",closable:!1,title:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{treeExpandAction:"click",style:{marginRight:8,width:300},value:V,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:t,placeholder:l.ZP.get("请选择脚本文件"),fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:function(e,t){if(t.key!==V&&e&&"directory"!==t.type){var n=(0,P.H$)(e);T(t),R(n),ue(t),H(t.key)}},treeLine:{showLeafIcon:!0}}),(0,w.jsxs)(c.Z,{value:B,style:{width:110,marginRight:8},onChange:function(e){R(e)},children:[(0,w.jsx)(j,{value:"javascript",children:"javascript"}),(0,w.jsx)(j,{value:"typescript",children:"typescript"}),(0,w.jsx)(j,{value:"shell",children:"shell"}),(0,w.jsx)(j,{value:"python",children:"python"})]}),(0,w.jsx)(p.Z,{type:"primary",style:{marginRight:8},onClick:ae?de:function(){J("");var e=te.current.getValue().replace(/\r\n/g,"\n");g.W.put("".concat(f.Z.apiPrefix,"scripts/run"),{filename:N.title,path:N.parent||"",content:e}).then((function(e){var t=e.code,n=e.data;200===t&&(ie(!0),ce(n))}))},children:ae?l.ZP.get("停止"):l.ZP.get("运行")}),(0,w.jsx)(p.Z,{type:"primary",style:{marginRight:8},onClick:function(){J("")},children:l.ZP.get("清空日志")}),(0,w.jsx)(p.Z,{type:"primary",style:{marginRight:8},onClick:function(){W(!0)},children:l.ZP.get("保存")}),(0,w.jsx)(p.Z,{type:"primary",style:{marginRight:8},onClick:function(){de(),i()},children:l.ZP.get("退出")})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:function(){i()},open:k,children:[(0,w.jsxs)(h.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},pane2Style:{overflowY:"auto"},children:[(0,w.jsx)(m.ZP,{language:B,value:q,theme:ee,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1,accessibilitySupport:"off"},onMount:function(e){te.current=e}}),(0,w.jsx)("pre",{style:{padding:"0 15px"},children:(0,w.jsx)(x(),{children:$})})]}),(0,w.jsx)(v.default,{visible:U,handleCancel:function(){W(!1)},file:a()({content:te.current&&te.current.getValue().replace(/\r\n/g,"\n")},N)}),(0,w.jsx)(Z.default,{visible:Q,handleCancel:function(){X(!1)}})]})}},85472:function(e,t,n){"use strict";n.r(t);var r=n(57213),a=n.n(r),i=n(54689),o=n.n(i),l=n(25359),s=n.n(l),c=n(49811),u=n.n(c),d=n(54306),p=n.n(d),g=n(88265),f=n(63313),h=n(28756),m=n(67393),v=n(9835),Z=n(84163),b=n(84468),P=n(22159),y=n(75310),k=n(57679),x=n(57229),w=n(15207),j=n(59953),S=n(11527);h.Z.Option;t.default=function(e){var t=e.handleCancel,n=e.treeData,r=e.visible,i=m.Z.useForm(),l=p()(i,1)[0],c=(0,f.useState)(!1),d=p()(c,2),h=d[0],C=d[1],q=(0,f.useState)([]),_=p()(q,2),E=_[0],I=_[1],B=(0,f.useState)(),R=p()(B,2),D=R[0],F=R[1],N=(0,f.useState)("blank"),T=p()(N,2),M=T[0],A=T[1],V=function(){var e=u()(s()().mark((function e(n){var r,a,i,o,l,c;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),r=n.path,a=void 0===r?"":r,i=n.filename,o=n.directory,l=void 0===o?"":o,(c=new FormData).append("file",D||""),c.append("filename",(null==D?void 0:D.name)||i),c.append("path",a),c.append("content",""),c.append("directory",l),x.W.post("".concat(w.Z.apiPrefix,"scripts"),c).then((function(e){var n=e.code;e.data;if(200===n){v.ZP.success(l?g.ZP.get("创建文件夹成功"):g.ZP.get("创建文件成功"));var r=a?"".concat(a,"/"):"",o=D?D.name:i;t({filename:o,path:a,key:"".concat(r).concat(o)})}C(!1)})).finally((function(){return C(!1)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function e(t){var n,r=o()(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.children&&i.children.length>0&&(i.children=i.children.filter((function(e){return"directory"===e.type})).map((function(e){return a()(a()({},e),{},{disabled:!1})})),e(i.children))}}catch(e){r.e(e)}finally{r.f()}return t};return(0,f.useEffect)((function(){var e=n.filter((function(e){return"directory"===e.type})).map((function(e){return a()(a()({},e),{},{disabled:!1})})),t=H(e);I(t)}),[n]),(0,f.useEffect)((function(){l.resetFields()}),[r]),(0,S.jsx)(Z.Z,{title:g.ZP.get("创建"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then((function(e){V(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return t()},confirmLoading:h,children:(0,S.jsxs)(m.Z,{form:l,layout:"vertical",name:"edit_name_modal",children:[(0,S.jsx)(m.Z.Item,{name:"type",label:g.ZP.get("类型"),rules:[{required:!0}],initialValue:"blank",children:(0,S.jsxs)(b.ZP.Group,{onChange:function(e){A(e.target.value)},children:[(0,S.jsx)(b.ZP,{value:"blank",children:g.ZP.get("空文件")}),(0,S.jsx)(b.ZP,{value:"upload",children:g.ZP.get("本地文件")}),(0,S.jsx)(b.ZP,{value:"directory",children:g.ZP.get("文件夹")})]})}),"blank"===M&&(0,S.jsx)(m.Z.Item,{name:"filename",label:g.ZP.get("文件名"),rules:[{required:!0,message:g.ZP.get("请输入文件名")},{validator:function(e,t){return t.includes("/")?Promise.reject(new Error(g.ZP.get("文件名不能包含斜杠"))):Promise.resolve()}}],children:(0,S.jsx)(P.Z,{placeholder:g.ZP.get("请输入文件名")})}),"directory"===M&&(0,S.jsx)(m.Z.Item,{name:"directory",label:g.ZP.get("文件夹名"),rules:[{required:!0,message:g.ZP.get("请输入文件夹名")}],children:(0,S.jsx)(P.Z,{placeholder:g.ZP.get("请输入文件夹名")})}),(0,S.jsx)(m.Z.Item,{label:g.ZP.get("父目录"),name:"path",children:(0,S.jsx)(y.Z,{allowClear:!0,treeData:E,fieldNames:{value:"key",label:"title"},placeholder:g.ZP.get("请选择父目录"),treeDefaultExpandAll:!0})}),"upload"===M&&(0,S.jsx)(m.Z.Item,{label:g.ZP.get("文件"),name:"file",children:(0,S.jsxs)(k.Z.Dragger,{beforeUpload:function(e){return F(e),!1},maxCount:1,children:[(0,S.jsx)("p",{className:"ant-upload-drag-icon",children:(0,S.jsx)(j.Z,{})}),(0,S.jsx)("p",{className:"ant-upload-text",children:g.ZP.get("点击或者拖拽文件到此区域上传")})]})})]})})}},66553:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(93525),a=n.n(r),i=n(54306),o=n.n(i),l=n(88265),s=n(63313),c=n(92260),u=n(84163),d=n(9835),p=n(75310),g=n(34133),f=n(24378),h=n(15367),m=n(22159),v=n(43209),Z=n(84540),b=n(15207),P=n(23435),y=n(82755),k=n(57229),x={"left-tree-container":"left-tree-container___z9VeF","left-tree-scroller":"left-tree-scroller___MRc8C","log-container":"log-container___Iva4k"},w=n(98912),j=n(31988),S=n(36035),C=n(26839),q=n(32132),_=n(13740),E=n(23831),I=n(85472),B=n(66292),R=n.n(B),D=n(14851),F=n(43977),N=n(40141),T=n(51805),M=n(4363),A=n.n(M),V=n(38582),H=n(38359),L=n(26747),O=n(95407),U=n(79514),W=n(11527),K=c.Z.Text,z=function(){var e=(0,D.useOutletContext)(),t=e.headerStyle,n=e.isPhone,r=e.theme,i=(0,s.useState)(l.ZP.get("请选择脚本文件")),c=o()(i,2),B=c[0],M=c[1],z=(0,s.useState)(l.ZP.get("请选择脚本文件")),Q=o()(z,2),X=Q[0],Y=Q[1],G=(0,s.useState)([]),$=o()(G,2),J=$[0],ee=$[1],te=(0,s.useState)(!1),ne=o()(te,2),re=ne[0],ae=ne[1],ie=(0,s.useState)(""),oe=o()(ie,2),le=oe[0],se=oe[1],ce=(0,s.useState)(),ue=o()(ce,2),de=ue[0],pe=ue[1],ge=(0,s.useRef)(),fe=(0,s.useState)(!1),he=o()(fe,2),me=he[0],ve=he[1],Ze=(0,s.useState)(""),be=o()(Ze,2),Pe=be[0],ye=be[1],ke=(0,s.useState)(!1),xe=o()(ke,2),we=xe[0],je=xe[1],Se=(0,s.useRef)(null),Ce=(0,s.useState)(!1),qe=o()(Ce,2),_e=qe[0],Ee=qe[1],Ie=(0,s.useState)(!1),Be=o()(Ie,2),Re=Be[0],De=Be[1],Fe=(0,s.useState)(),Ne=o()(Fe,2),Te=Ne[0],Me=Ne[1],Ae=(0,s.useState)([]),Ve=o()(Ae,2),He=Ve[0],Le=Ve[1],Oe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&ae(!0),k.W.get("".concat(b.Z.apiPrefix,"scripts")).then((function(e){var t=e.code,n=e.data;200===t&&(ee(n),it(),We(n))})).finally((function(){return e&&ae(!1)}))},Ue=function(e){k.W.get("".concat(b.Z.apiPrefix,"scripts/detail?file=").concat(encodeURIComponent(e.title),"&path=").concat(e.parent||"")).then((function(e){var t=e.code,n=e.data;200===t&&M(n)}))},We=function(e){var t=(0,F.parse)(D.history.location.search),n=t.p,r=t.s;if(r){var a="".concat(n,"/").concat(r),i={node:{title:r,key:n?a:r,parent:n}};(0,N.DY)(e,(function(e){return e.key===i.node.key}))&&(Le([n]),ze([a],i))}},Ke=function(e,t){if(t.key!==X&&e)if(Y(t.key),Me(t),"directory"!==t.type){var r=(0,N.H$)(e);se(n&&"typescript"===r?"javascript":r),M(l.ZP.get("加载中...")),Ue(t)}else M(l.ZP.get("请选择脚本文件"))},ze=(0,s.useCallback)((function(e,t){t.node.key===X&&we||((Se.current?Se.current.getValue().replace(/\r\n/g,"\n"):B)!==B?u.Z.confirm({title:"确认离开",content:(0,W.jsx)(W.Fragment,{children:l.ZP.get("当前修改未保存，确定离开吗")}),onOk:function(){Ke(e[0],t.node),je(!1)},onCancel:function(){console.log("Cancel")}}):(je(!1),Ke(e[0],t.node)))}),[B,X,we]),Qe=(0,s.useCallback)((function(e){var t=e.target.value;Xe(t)}),[J]),Xe=(0,s.useCallback)(R()((function(e){ye(e)}),300),[J]),Ye=(0,T.Z)(J,Pe,{treeNodeFilterProp:"title"}),Ge=Ye.treeData,$e=Ye.keys;(0,s.useEffect)((function(){Le(A()([].concat(a()(He),a()($e))))}),[$e]);var Je=function(){setTimeout((function(){je(!0)}),300)},et=function(){je(!1),M(l.ZP.get("加载中...")),Ue(Te)},tt=function(){u.Z.confirm({title:"确认保存",content:(0,W.jsxs)(W.Fragment,{children:[l.ZP.get("确认保存文件"),(0,W.jsxs)(K,{style:{wordBreak:"break-all"},type:"warning",children:[" ",Te.title]}),l.ZP.get("，保存后不可恢复")]}),onOk:function(){var e=Se.current?Se.current.getValue().replace(/\r\n/g,"\n"):B;return new Promise((function(t,n){k.W.put("".concat(b.Z.apiPrefix,"scripts"),{filename:Te.title,path:Te.parent||"",content:e}).then((function(n){var r=n.code;n.data;200===r&&(d.ZP.success("保存成功"),M(e),je(!1)),t(null)})).catch((function(e){return n(e)}))}))},onCancel:function(){console.log("Cancel")}})},nt=function(){u.Z.confirm({title:"确认删除",content:(0,W.jsxs)(W.Fragment,{children:[l.ZP.get("确认删除"),(0,W.jsxs)(K,{style:{wordBreak:"break-all"},type:"warning",children:[" ",X," "]}),l.ZP.get("文件"),"directory"===Te.type?l.ZP.get("夹及其子文件"):"",l.ZP.get("，删除后不可恢复")]}),onOk:function(){k.W.delete("".concat(b.Z.apiPrefix,"scripts"),{data:{filename:Te.title,path:Te.parent||"",type:Te.type}}).then((function(e){if(200===e.code){d.ZP.success("删除成功");var t=a()(J);if(Te.parent)t=(0,N.I1)(t,(function(e){return e.key===Te.key}));else{var n=t.findIndex((function(e){return e.key===Te.key}));-1!==n&&t.splice(n,1)}ee(t),it()}}))},onCancel:function(){console.log("Cancel")}})},rt=function(){De(!0)},at=function(){Ee(!0)},it=function(){Y(l.ZP.get("请选择脚本文件")),Me(null),M(l.ZP.get("请选择脚本文件"))};(0,s.useEffect)((function(){Oe()}),[]),(0,s.useEffect)((function(){ge.current&&pe(ge.current.clientHeight)}),[ge.current,J]),(0,O.y1)("mod+s",(function(e){we&&tt()}),{enableOnFormTags:["textarea"],preventDefault:!0}),(0,O.y1)("mod+d",(function(e){Te.title&&nt()}),{preventDefault:!0}),(0,O.y1)("mod+o",(function(e){we||at()}),{preventDefault:!0}),(0,O.y1)("mod+e",(function(e){Te.title&&et()}),{preventDefault:!0});var ot=we?{items:[{label:l.ZP.get("保存"),key:"save",icon:(0,W.jsx)(C.Z,{})},{label:l.ZP.get("退出编辑"),key:"exit",icon:(0,W.jsx)(q.Z,{})}],onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),function(e){switch(e){case"save":tt();break;case"exit":et()}}(t)}}:{items:[{label:l.ZP.get("创建"),key:"add",icon:(0,W.jsx)(C.Z,{})},{label:l.ZP.get("编辑"),key:"edit",icon:(0,W.jsx)(q.Z,{}),disabled:!X},{label:l.ZP.get("重命名"),key:"rename",icon:(0,W.jsx)(V.Z,{type:"ql-icon-rename"}),disabled:!X},{label:l.ZP.get("删除"),key:"delete",icon:(0,W.jsx)(_.Z,{}),disabled:!X}],onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),function(e){switch(e){case"add":at();break;case"edit":Je();break;case"delete":nt();break;case"rename":rt()}}(t)}};return(0,W.jsx)(P.ZP,{className:"ql-container-wrapper log-wrapper",title:(0,W.jsxs)(W.Fragment,{children:[X,"file"===(null==Te?void 0:Te.type)&&(0,W.jsx)("span",{style:{marginLeft:6,fontSize:12,color:"#999",display:"inline-block",height:14},children:(0,U.Z)(Te.size)})]}),loading:re,extra:n?[(0,W.jsx)(p.Z,{treeExpandAction:"click",className:"log-select",value:X,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:J,placeholder:l.ZP.get("请选择脚本"),fieldNames:{value:"key"},treeNodeFilterProp:"title",showSearch:!0,allowClear:!0,onSelect:Ke}),(0,W.jsx)(g.Z,{menu:ot,trigger:["click"],children:(0,W.jsx)(f.Z,{type:"primary",icon:(0,W.jsx)(E.Z,{})})})]:we?[(0,W.jsx)(f.Z,{type:"primary",onClick:tt,children:l.ZP.get("保存")}),(0,W.jsx)(f.Z,{type:"primary",onClick:et,children:l.ZP.get("退出编辑")})]:[(0,W.jsx)(h.Z,{title:l.ZP.get("创建"),children:(0,W.jsx)(f.Z,{type:"primary",onClick:at,icon:(0,W.jsx)(C.Z,{})})}),(0,W.jsx)(h.Z,{title:l.ZP.get("编辑"),children:(0,W.jsx)(f.Z,{disabled:!X,type:"primary",onClick:Je,icon:(0,W.jsx)(q.Z,{})})}),(0,W.jsx)(h.Z,{title:l.ZP.get("重命名"),children:(0,W.jsx)(f.Z,{disabled:!X,type:"primary",onClick:rt,icon:(0,W.jsx)(V.Z,{type:"ql-icon-rename"})})}),(0,W.jsx)(h.Z,{title:l.ZP.get("删除"),children:(0,W.jsx)(f.Z,{type:"primary",disabled:!X,onClick:nt,icon:(0,W.jsx)(_.Z,{})})}),(0,W.jsx)(f.Z,{type:"primary",onClick:function(){ve(!0)},children:l.ZP.get("调试")})],header:{style:t},children:(0,W.jsxs)("div",{className:"".concat(x["log-container"]," log-container"),children:[!n&&(0,W.jsxs)(S.Z,{split:"vertical",size:200,maxSize:-100,children:[(0,W.jsx)("div",{className:x["left-tree-container"],children:J.length>0?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m.Z.Search,{className:x["left-tree-search"],onChange:Qe,placeholder:l.ZP.get("请输入脚本名"),allowClear:!0}),(0,W.jsx)("div",{className:x["left-tree-scroller"],ref:ge,children:(0,W.jsx)(v.Z,{expandAction:"click",className:x["left-tree"],treeData:Ge,showIcon:!0,height:de,selectedKeys:[X],expandedKeys:He,onExpand:function(e){Le(e)},showLine:{showLeafIcon:!0},onSelect:ze,onDoubleClick:function(e,t){"file"===t.type&&(Y(t.key),Me(t),je(!0))}})})]}):(0,W.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,W.jsx)(Z.Z,{description:l.ZP.get("暂无脚本"),image:Z.Z.PRESENTED_IMAGE_SIMPLE})})}),(0,W.jsx)(y.ZP,{language:le,value:B,theme:r,options:{readOnly:!we,fontSize:12,lineNumbersMinChars:3,glyphMargin:!1,accessibilitySupport:"off"},onMount:function(e){Se.current=e}})]}),n&&(0,W.jsx)(j.ZP,{value:B,extensions:le?[L.RI[le]()]:void 0,theme:r.includes("dark")?"dark":"light",readOnly:!we,onChange:function(e){M(e)}}),me&&(0,W.jsx)(w.default,{visible:me,treeData:J,currentNode:Te,content:B,handleCancel:function(){ve(!1)}}),(0,W.jsx)(I.default,{visible:_e,treeData:J,handleCancel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filename:"",path:"",key:""},t=e.filename,n=e.path,r=e.key;if(t){var i=a()(J),o={title:t,key:r,parent:n};if(n){i=(0,N.I1)(i,(function(e){return e.key===n}),o);var l=n.split("/"),s=[];l.reduce((function(e,t){return s.push(e),"".concat(e,"/").concat(t)})),Le([].concat(a()(He),s,[n]))}else i.unshift(o);ee(i),Ke(o.title,o),je(!0)}Ee(!1)}}),(0,W.jsx)(H.default,{visible:Re,handleCancel:function(){De(!1),Oe(!1)},currentNode:Te})]})})}},38359:function(e,t,n){"use strict";n.r(t);var r=n(25359),a=n.n(r),i=n(49811),o=n.n(i),l=n(54306),s=n.n(l),c=n(88265),u=n(63313),d=n(67393),p=n(9835),g=n(84163),f=n(22159),h=n(57229),m=n(15207),v=n(11527);t.default=function(e){var t=e.currentNode,n=e.handleCancel,r=e.visible,i=d.Z.useForm(),l=s()(i,1)[0],Z=(0,u.useState)(!1),b=s()(Z,2),P=b[0],y=b[1],k=function(){var e=o()(a()().mark((function e(r){var i,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,h.W.put("".concat(m.Z.apiPrefix,"scripts/rename"),{filename:t.title,path:t.parent||"",newFilename:r.name});case 4:i=e.sent,o=i.code,i.data,200===o&&(p.ZP.success(c.ZP.get("更新名称成功")),n()),y(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),y(!1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){l.resetFields()}),[t,r]),(0,v.jsx)(g.Z,{title:c.ZP.get("重命名"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then((function(e){k(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return n()},confirmLoading:P,children:(0,v.jsx)(d.Z,{form:l,initialValues:{name:null==t?void 0:t.title},layout:"vertical",name:"edit_name_modal",children:(0,v.jsx)(d.Z.Item,{name:"name",rules:[{required:!0,message:c.ZP.get("请输入新名称")}],children:(0,v.jsx)(f.Z,{placeholder:c.ZP.get("请输入新名称")})})})})}},68793:function(e,t,n){"use strict";n.r(t);var r=n(25359),a=n.n(r),i=n(57213),o=n.n(i),l=n(49811),s=n.n(l),c=n(54306),u=n.n(c),d=n(88265),p=n(63313),g=n(67393),f=n(9835),h=n(84163),m=n(22159),v=n(57229),Z=n(15207),b=n(11527);t.default=function(e){var t=e.file,n=e.handleCancel,r=e.visible,i=g.Z.useForm(),l=u()(i,1)[0],c=(0,p.useState)(!1),P=u()(c,2),y=P[0],k=P[1],x=function(){var e=s()(a()().mark((function e(r){var i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0),i=o()(o()(o()({},t),r),{},{originFilename:t.title}),v.W.post("".concat(Z.Z.apiPrefix,"scripts"),i).then((function(e){var t=e.code,r=e.data;200===t&&(f.ZP.success(d.ZP.get("保存文件成功")),n(r))})).finally((function(){k(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){l.resetFields(),k(!1)}),[t,r]),(0,b.jsx)(h.Z,{title:d.ZP.get("保存文件"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then((function(e){x(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return n()},confirmLoading:y,children:(0,b.jsxs)(g.Z,{form:l,layout:"vertical",name:"script_modal",initialValues:{filename:null==t?void 0:t.title,path:(null==t?void 0:t.parent)||""},children:[(0,b.jsx)(g.Z.Item,{name:"filename",label:d.ZP.get("文件名"),rules:[{required:!0,message:d.ZP.get("请输入文件名")}],children:(0,b.jsx)(m.Z,{placeholder:d.ZP.get("请输入文件名")})}),(0,b.jsx)(g.Z.Item,{name:"path",label:d.ZP.get("保存目录"),children:(0,b.jsx)(m.Z,{placeholder:d.ZP.get("请输入保存目录，默认scripts目录")})})]})})}},12417:function(e,t,n){"use strict";n.r(t);n(25359),n(57213),n(49811);var r=n(54306),a=n.n(r),i=n(88265),o=n(63313),l=n(67393),s=(n(9835),n(84163)),c=n(22159),u=(n(57229),n(15207),n(11527));t.default=function(e){var t=e.file,n=e.handleCancel,r=e.visible,d=l.Z.useForm(),p=a()(d,1)[0],g=(0,o.useState)(!1),f=a()(g,2),h=(f[0],f[1]);return(0,o.useEffect)((function(){p.resetFields(),h(!1)}),[t,r]),(0,u.jsx)(s.Z,{title:i.ZP.get("运行设置"),open:r,forceRender:!0,centered:!0,onCancel:function(){return n()},children:(0,u.jsx)(l.Z,{form:p,layout:"vertical",name:"setting_modal",initialValues:t,children:(0,u.jsx)(l.Z.Item,{name:"filename",label:i.ZP.get("待开发"),rules:[{required:!0,message:i.ZP.get("待开发")}],children:(0,u.jsx)(c.Z,{placeholder:i.ZP.get("待开发")})})})})}},15207:function(e,t,n){"use strict";var r=n(88265),a=window.__ENV__QlBaseUrl||"/";t.Z={siteName:r.ZP.get("青龙"),baseUrl:a,apiPrefix:"".concat(a,"api/"),authKey:"token",layouts:[{name:"primary",include:[/.*/],exclude:[/(\/(en|zh))*\/login/]}],i18n:{languages:[{key:"pt-br",title:"Português",flag:"/portugal.svg"},{key:"en",title:"English",flag:"/america.svg"},{key:"zh",title:r.ZP.get("中文"),flag:"/china.svg"}],defaultLanguage:"en"},scopes:[{name:r.ZP.get("定时任务"),value:"crons"},{name:r.ZP.get("环境变量"),value:"envs"},{name:r.ZP.get("订阅管理"),value:"subscriptions"},{name:r.ZP.get("配置文件"),value:"configs"},{name:r.ZP.get("脚本管理"),value:"scripts"},{name:r.ZP.get("日志管理"),value:"logs"},{name:r.ZP.get("依赖管理"),value:"dependencies"},{name:r.ZP.get("系统信息"),value:"system"}],scopesMap:{crons:r.ZP.get("定时任务"),envs:r.ZP.get("环境变量"),subscriptions:r.ZP.get("订阅管理"),configs:r.ZP.get("配置文件"),scripts:r.ZP.get("脚本管理"),logs:r.ZP.get("日志管理"),dependencies:r.ZP.get("依赖管理"),system:r.ZP.get("系统信息")},notificationModes:[{value:"gotify",label:"Gotify"},{value:"goCqHttpBot",label:"GoCqHttpBot"},{value:"serverChan",label:r.ZP.get("Server酱")},{value:"pushDeer",label:"PushDeer"},{value:"bark",label:"Bark"},{value:"telegramBot",label:r.ZP.get("Telegram机器人")},{value:"dingtalkBot",label:r.ZP.get("钉钉机器人")},{value:"weWorkBot",label:r.ZP.get("企业微信机器人")},{value:"weWorkApp",label:r.ZP.get("企业微信应用")},{value:"aibotk",label:r.ZP.get("智能微秘书")},{value:"iGot",label:"IGot"},{value:"pushPlus",label:"PushPlus"},{value:"wePlusBot",label:r.ZP.get("微加机器人")},{value:"chat",label:r.ZP.get("群晖chat")},{value:"email",label:r.ZP.get("邮箱")},{value:"lark",label:r.ZP.get("飞书机器人")},{value:"pushMe",label:"PushMe"},{value:"chronocat",label:"Chronocat"},{value:"webhook",label:r.ZP.get("自定义通知")},{value:"closed",label:r.ZP.get("已关闭")}],notificationModeMap:{gotify:[{label:"gotifyUrl",tip:r.ZP.get("gotify的url地址，例如 https://push.example.de:8080"),required:!0},{label:"gotifyToken",tip:r.ZP.get("gotify的消息应用token码"),required:!0},{label:"gotifyPriority",tip:r.ZP.get("推送消息的优先级")}],chat:[{label:"chatUrl",tip:r.ZP.get("chat的url地址"),required:!0},{label:"chatToken",tip:r.ZP.get("chat的token码"),required:!0}],goCqHttpBot:[{label:"goCqHttpBotUrl",tip:r.ZP.get("推送到个人QQ: http://127.0.0.1/send_private_msg，群：http://127.0.0.1/send_group_msg"),required:!0},{label:"goCqHttpBotToken",tip:r.ZP.get("访问密钥"),required:!0},{label:"goCqHttpBotQq",tip:r.ZP.get("如果GOBOT_URL设置 /send_private_msg 则需要填入 user_id=个人QQ 相反如果是 /send_group_msg 则需要填入 group_id=QQ群"),required:!0}],serverChan:[{label:"serverChanKey",tip:r.ZP.get("Server酱SENDKEY"),required:!0}],pushDeer:[{label:"pushDeerKey",tip:r.ZP.get("PushDeer的Key，https://github.com/easychen/pushdeer"),required:!0},{label:"pushDeerUrl",tip:r.ZP.get("PushDeer的自架API endpoint，默认是 https://api2.pushdeer.com/message/push")}],bark:[{label:"barkPush",tip:r.ZP.get("Bark的信息IP/设备码，例如：https://api.day.app/XXXXXXXX"),required:!0},{label:"barkIcon",tip:r.ZP.get("BARK推送图标，自定义推送图标 (需iOS15或以上才能显示)")},{label:"barkSound",tip:r.ZP.get("BARK推送铃声，铃声列表去APP查看复制填写")},{label:"barkGroup",tip:r.ZP.get("BARK推送消息的分组，默认为qinglong")},{label:"barkLevel",tip:r.ZP.get("BARK推送消息的时效性，默认为active")},{label:"barkUrl",tip:r.ZP.get("BARK推送消息的跳转URL")},{label:"barkArchive",tip:r.ZP.get("BARK是否保存推送消息")}],telegramBot:[{label:"telegramBotToken",tip:r.ZP.get("telegram机器人的token，例如：1077xxx4424:AAFjv0FcqxxxxxxgEMGfi22B4yh15R5uw"),required:!0},{label:"telegramBotUserId",tip:r.ZP.get("telegram用户的id，例如：129xxx206"),required:!0},{label:"telegramBotProxyHost",tip:r.ZP.get("代理IP")},{label:"telegramBotProxyPort",tip:r.ZP.get("代理端口")},{label:"telegramBotProxyAuth",tip:r.ZP.get("telegram代理配置认证参数，用户名与密码用英文冒号连接 user:password")},{label:"telegramBotApiHost",tip:r.ZP.get("telegram api自建的反向代理地址，默认tg官方api")}],dingtalkBot:[{label:"dingtalkBotToken",tip:r.ZP.get("钉钉机器人webhook token，例如：5a544165465465645d0f31dca676e7bd07415asdasd"),required:!0},{label:"dingtalkBotSecret",tip:r.ZP.get("密钥，机器人安全设置页面，加签一栏下面显示的SEC开头的字符串")}],weWorkBot:[{label:"weWorkBotKey",tip:r.ZP.get("企业微信机器人的webhook(详见文档 https://work.weixin.qq.com/api/doc/90000/90136/91770)，例如：693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa"),required:!0},{label:"weWorkOrigin",tip:r.ZP.get("企业微信代理地址")}],weWorkApp:[{label:"weWorkAppKey",tip:r.ZP.get("corpid、corpsecret、touser(注:多个成员ID使用|隔开)、agentid、消息类型(选填，不填默认文本消息类型) 注意用,号隔开(英文输入法的逗号)，例如：wwcfrs,B-76WERQ,qinglong,1000001,2COat"),required:!0},{label:"weWorkOrigin",tip:r.ZP.get("企业微信代理地址")}],aibotk:[{label:"aibotkKey",tip:r.ZP.get("密钥key，智能微秘书个人中心获取apikey，申请地址：https://wechat.aibotk.com/signup?from=ql"),required:!0},{label:"aibotkType",tip:r.ZP.get("发送的目标，群组或者好友"),required:!0,placeholder:r.ZP.get("请输入要发送的目标"),items:[{value:"room",label:r.ZP.get("群聊")},{value:"contact",label:r.ZP.get("好友")}]},{label:"aibotkName",tip:r.ZP.get("要发送的用户昵称或群名，如果目标是群，需要填群名，如果目标是好友，需要填好友昵称"),required:!0}],iGot:[{label:"iGotPushKey",tip:r.ZP.get("iGot的信息推送key，例如：https://push.hellyw.com/XXXXXXXX"),required:!0}],pushPlus:[{label:"pushPlusToken",tip:r.ZP.get("微信扫码登录后一对一推送或一对多推送下面的token(您的Token)，不提供PUSH_PLUS_USER则默认为一对一推送，参考 https://www.pushplus.plus/"),required:!0},{label:"pushPlusUser",tip:r.ZP.get("一对多推送的“群组编码”（一对多推送下面->您的群组(如无则创建)->群组编码，如果您是创建群组人。也需点击“查看二维码”扫描绑定，否则不能接受群组消息推送）")}],wePlusBot:[{label:"wePlusBotToken",tip:r.ZP.get("用户令牌，扫描登录后 我的—>设置->令牌 中获取，参考 https://www.weplusbot.com/"),required:!0},{label:"wePlusBotReceiver",tip:r.ZP.get("消息接收人")},{label:"wePlusBotVersion",tip:r.ZP.get("调用版本；专业版填写pro，个人版填写personal，为空默认使用专业版")}],lark:[{label:"larkKey",tip:r.ZP.get("飞书群组机器人：https://www.feishu.cn/hc/zh-CN/articles/360024984973"),required:!0}],email:[{label:"emailService",tip:r.ZP.get("邮箱服务名称，比如126、163、Gmail、QQ等，支持列表https://github.com/nodemailer/nodemailer/blob/master/lib/well-known/services.json"),required:!0},{label:"emailUser",tip:r.ZP.get("邮箱地址"),required:!0},{label:"emailPass",tip:r.ZP.get("SMTP 登录密码，也可能为特殊口令，视具体邮件服务商说明而定"),required:!0}],pushMe:[{label:"pushMeKey",tip:r.ZP.get("PushMe的Key，https://push.i-i.me/"),required:!0},{label:"pushMeUrl",tip:r.ZP.get("自建的PushMeServer消息接口地址，例如：http://127.0.0.1:3010，不填则使用官方消息接口"),required:!1}],chronocat:[{label:"chronocatURL",tip:r.ZP.get("Chronocat Red 服务的连接地址 https://chronocat.vercel.app/install/docker/official/"),required:!0},{label:"chronocatQQ",tip:r.ZP.get("个人:user_id=个人QQ 群则填入group_id=QQ群 多个用英文;隔开同时支持个人和群 如：user_id=xxx;group_id=xxxx;group_id=xxxxx"),required:!0},{label:"chronocatToken",tip:r.ZP.get("docker安装在持久化config目录下的chronocat.yml文件可找到"),required:!0}],webhook:[{label:"webhookMethod",tip:r.ZP.get("请求方法"),required:!0,items:[{value:"GET"},{value:"POST"},{value:"PUT"}]},{label:"webhookContentType",tip:r.ZP.get("请求头Content-Type"),required:!0,items:[{value:"text/plain"},{value:"application/json"},{value:"multipart/form-data"},{value:"application/x-www-form-urlencoded"}]},{label:"webhookUrl",tip:r.ZP.get("请求链接以http或者https开头。url或者body中必须包含$title，$content可选，对应api内容的位置"),required:!0,placeholder:"https://xxx.cn/api?content=$title\n"},{label:"webhookHeaders",tip:r.ZP.get("请求头格式Custom-Header1: Header1，多个换行分割"),placeholder:"Custom-Header1: Header1\nCustom-Header2: Header2"},{label:"webhookBody",tip:r.ZP.get("请求体格式key1: value1，多个换行分割。url或者body中必须包含$title，$content可选，对应api内容的位置"),placeholder:"key1: $title\nkey2: $content"}]},documentTitleMap:{"/login":r.ZP.get("登录"),"/initialization":r.ZP.get("初始化"),"/crontab":r.ZP.get("定时任务"),"/env":r.ZP.get("环境变量"),"/subscription":r.ZP.get("订阅管理"),"/config":r.ZP.get("配置文件"),"/script":r.ZP.get("脚本管理"),"/diff":r.ZP.get("对比工具"),"/log":r.ZP.get("日志管理"),"/setting":r.ZP.get("系统设置"),"/error":r.ZP.get("错误日志"),"/dependence":r.ZP.get("依赖管理")},dependenceTypes:["nodejs","python3","linux"]}},3094:function(e,t,n){"use strict";n.d(t,{F:function(){return s},e:function(){return l}});var r=n(54306),a=n.n(r),i=n(63313),o=n(40141),l=function(){var e=(0,i.useState)("100%"),t=a()(e,2),n=t[0],r=t[1],l=(0,i.useState)(0),s=a()(l,2),c=s[0],u=s[1],d=(0,i.useState)(-48),p=a()(d,2),g=p[0],f=p[1],h=(0,i.useState)(!1),m=a()(h,2),v=m[0],Z=m[1],b=(0,i.useMemo)((function(){return(0,o.ZP)()}),[]).platform;return(0,i.useEffect)((function(){"mobile"===b&&document.body.offsetWidth<768?(r("auto"),u(0),f(0),Z(!0),document.body.setAttribute("data-mode","phone")):(r("100%"),u(0),f(-48),Z(!1),document.body.setAttribute("data-mode","desktop"))}),[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:g,width:n,marginLeft:c},isPhone:v}},s=function(){var e=(0,i.useState)(),t=a()(e,2),n=t[0],r=t[1];return(0,i.useEffect)((function(){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=localStorage.getItem("qinglong_dark_theme"),n=e.matches&&"light"!==t||"dark"===t;r(n?"vs-dark":"vs");var a=function(e){"auto"!==t&&t||(e.matches?r("vs-dark"):r("vs"))};"function"==typeof e.addEventListener?e.addEventListener("change",a):"function"==typeof e.addListener&&e.addListener(a)}),[]),{theme:n,reloadTheme:function(){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=localStorage.getItem("qinglong_dark_theme"),n=e.matches&&"light"!==t||"dark"===t;r(n?"vs-dark":"vs")}}}},57229:function(e,t,n){"use strict";n.d(t,{W:function(){return h}});var r=n(25359),a=n.n(r),i=n(49811),o=n.n(i),l=n(88265),s=n(9835),c=n(15207),u=n(14851),d=n(73669);s.ZP.config({duration:2});var p=Date.now(),g=d.Z.create({timeout:6e4,params:{t:p}}),f=["/api/user/login","/open/auth/token","/api/user/two-factor/login","/api/system","/api/user/init","/api/user/notification/init"];g.interceptors.request.use((function(e){var t=localStorage.getItem(c.Z.authKey);return t&&!f.includes(e.url)?(e.headers.Authorization="Bearer ".concat(t),e):e})),g.interceptors.response.use(function(){var e=o()(a()().mark((function e(t){var n,r,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.status,![502,504].includes(n)){e.next=5;break}u.history.push("/error"),e.next=18;break;case 5:if(401!==n){e.next=9;break}"/login"!==u.history.location.pathname&&(localStorage.removeItem(c.Z.authKey),u.history.push("/login")),e.next=18;break;case 9:return e.prev=9,200!==(r=t.data).code&&(i=r.message||r.data)&&s.ZP.error({content:i,style:{maxWidth:500,margin:"0 auto"}}),e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(9);case 17:case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){if(e.response){var t=e.response.data?e.response.data.message||e.message||e.response.data:e.response.statusText,n=e.response.status;if([502,504].includes(n))u.history.push("/error");else if(401===n)"/login"!==u.history.location.pathname&&(s.ZP.error(l.ZP.get("登录已过期，请重新登录")),localStorage.removeItem(c.Z.authKey),u.history.push("/login"));else{var r,a;if("function"==typeof(null===(r=e.config)||void 0===r?void 0:r.onError))return null===(a=e.config)||void 0===a?void 0:a.onError(e.response);s.ZP.error({content:t,style:{maxWidth:500,margin:"0 auto"}})}}else console.log(e.message);return Promise.reject(e)}));var h=g},40141:function(e,t,n){"use strict";n.d(t,{ZP:function(){return c},I1:function(){return p},o4:function(){return b},w7:function(){return d},DY:function(){return g},FA:function(){return h},rS:function(){return v},H$:function(){return Z},W9:function(){return u},x$:function(){return f}});var r=n(93525),a=n.n(r),i=n(88265),o={".py":"python",".js":"javascript",".mjs":"javascript",".sh":"shell",".ts":"typescript"},l=n(11186),s=n.n(l);function c(){var e=navigator.userAgent.toLowerCase(),t=function(t){return t.test(e)},n=function(t){return(e.match(t)||[]).toString().replace(/[^0-9|_.]/g,"").replace(/_/g,".")},r="unknow";t(/windows|win32|win64|wow32|wow64/g)?r="windows":t(/macintosh|macintel/g)?r="macos":t(/x11/g)?r="linux":t(/android|adr/g)?r="android":t(/ios|iphone|ipad|ipod|iwatch/g)&&(r="ios");var a="unknow";"windows"===r?t(/windows nt 5.0|windows 2000/g)?a="2000":t(/windows nt 5.1|windows xp/g)?a="xp":t(/windows nt 5.2|windows 2003/g)?a="2003":t(/windows nt 6.0|windows vista/g)?a="vista":t(/windows nt 6.1|windows 7/g)?a="7":t(/windows nt 6.2|windows 8/g)?a="8":t(/windows nt 6.3|windows 8.1/g)?a="8.1":t(/windows nt 10.0|windows 10/g)&&(a="10"):"macos"===r?a=n(/os x [\d._]+/g):"android"===r?a=n(/android [\d._]+/g):"ios"===r&&(a=n(/os [\d._]+/g));var i="unknow";"windows"===r||"macos"===r||"linux"===r?i="desktop":("android"===r||"ios"===r||t(/mobile/g))&&(i="mobile");var o="unknow",l="unknow";t(/applewebkit/g)?(o="webkit",t(/edge/g)?l="edge":t(/opr/g)?l="opera":t(/chrome/g)?l="chrome":t(/safari/g)&&(l="safari")):t(/gecko/g)&&t(/firefox/g)?(o="gecko",l="firefox"):t(/presto/g)?(o="presto",l="opera"):t(/trident|compatible|msie/g)&&(o="trident",l="iexplore");var s="unknow";"webkit"===o?s=n(/applewebkit\/[\d._]+/g):"gecko"===o?s=n(/gecko\/[\d._]+/g):"presto"===o?s=n(/presto\/[\d._]+/g):"trident"===o&&(s=n(/trident\/[\d._]+/g));var c="unknow";"chrome"===l?c=n(/chrome\/[\d._]+/g):"safari"===l?c=n(/version\/[\d._]+/g):"firefox"===l?c=n(/firefox\/[\d._]+/g):"opera"===l?c=n(/opr\/[\d._]+/g):"iexplore"===l?c=n(/(msie [\d._]+)|(rv:[\d._]+)/g):"edge"===l&&(c=n(/edge\/[\d._]+/g));var u="none",d="unknow";t(/micromessenger/g)?(u="wechat",d=n(/micromessenger\/[\d._]+/g)):t(/qqbrowser/g)?(u="qq",d=n(/qqbrowser\/[\d._]+/g)):t(/ucbrowser/g)?(u="uc",d=n(/ucbrowser\/[\d._]+/g)):t(/qihu 360se/g)?u="360":t(/2345explorer/g)?(u="2345",d=n(/2345explorer\/[\d._]+/g)):t(/metasr/g)?u="sougou":t(/lbbrowser/g)?u="liebao":t(/maxthon/g)&&(u="maxthon",d=n(/maxthon\/[\d._]+/g));var p=Object.assign({engine:o,engineVs:s,platform:i,supporter:l,supporterVs:c,system:r,systemVs:a},"none"===u?{}:{shell:u,shellVs:d});return console.log("%c\n .d88b.  d888888b d8b   db  d888b  db       .d88b.  d8b   db  d888b  \n.8P  Y8.   `88'   888o  88 88' Y8b 88      .8P  Y8. 888o  88 88' Y8b \n88    88    88    88V8o 88 88      88      88    88 88V8o 88 88      \n88    88    88    88 V8o88 88  ooo 88      88    88 88 V8o88 88  ooo \n`8P  d8'   .88.   88  V888 88. ~8~ 88booo. `8b  d8' 88  V888 88. ~8~ \n `Y88'Y8 Y888888P VP   V8P  Y888P  Y88888P  `Y88P'  VP   V8P  Y888P  \n                                                                     \n                                                                     \n","color: blue;font-size: 14px;"),console.log("%c忘形雨笠烟蓑，知心牧唱樵歌。明月清风共我，闲人三个，从他今古消磨。\n","color: yellow;font-size: 18px;"),console.log("%c青龙运行环境:\n\n系统：".concat(p.system,"/").concat(p.systemVs,"\n浏览器：").concat(p.supporter,"/").concat(p.supporterVs,"\n内核：").concat(p.engine,"/").concat(p.engineVs),"color: green;font-size: 14px;font-weight: bold;"),p}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.extraHeight,n=e.target;void 0===t&&(t=99);var r=null,a=0;(r=n||document.querySelector(".ant-table-wrapper"))&&(a=r.getBoundingClientRect().top);var i=document.body.clientHeight-a-t;return i}function d(e,t){var n,r,a=window.URL||window.webkitURL||window,i=new Blob([t]),o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=a.createObjectURL(i),o.download=e,n=o,(r=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}function p(e,t,n){var r=a()(e),i=[];return function e(r){if(r)for(var a=0;a<(null==r?void 0:r.length);a++){if(t(r[a]))return n?void(r[a].children?r[a].children.unshift(n):r[a].children=[n]):void r.splice(a,1);r[a].children&&(i.push(r[a].key),e(r[a].children))}}(r),r}function g(e,t){var n;return function e(r){if(r)for(var a=0;a<(null==r?void 0:r.length);a++)t(r[a])?n=r[a]:r[a].children&&e(r[a].children)}(a()(e)),n}function f(e){return["　　　　　",i.ZP.get("执行结束")].some((function(t){return e.includes(t)}))}function h(e){var t=e.split(" ");if("repo"===t[1]||"raw"===t[1])return t[2];var n=t.find((function(e){return[".js",".ts",".sh",".py"].some((function(t){return e.endsWith(t)}))}));if(n){var r,a;n.startsWith("/ql/data/scripts")&&(n=n.replace("/ql/data/scripts/",""));var i=n.lastIndexOf("/");return i>=0?(a=n.slice(i+1),r=n.slice(0,i)):(a=n,r=""),[a,r]}}function m(e){try{var t=s().parseExpression(e);if(t)return t.next().toDate()}catch(e){}return null}function v(e,t){var n=m(e);return null!=t&&t.length&&t.forEach((function(e){var t=m(e);t&&(!n||t<n)&&(n=t)})),n}function Z(e){var t=function(e){if(!e)return"";var t=e.split(".");return".".concat(t[t.length-1])}(e);return o[t]}function b(){var e=document.createElement("div");e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="transparent",e.style.zIndex="9999",document.body.appendChild(e),e.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()})),document.body.style.overflow="hidden"}},21758:function(e,t,n){"use strict";var r=n(93525),a=n.n(r),i=n(12342),o=n.n(i),l=n(25359),s=n.n(l),c=n(49811),u=n.n(c),d=n(21140),p=n.n(d),g=n(63466),f=n.n(g),h=n(52510),m=n.n(h),v=n(78078),Z=n.n(v),b=["type"],P=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p()(this,e),m()(this,"url",void 0),m()(this,"socket",null),m()(this,"subscriptions",new Map),m()(this,"options",void 0),m()(this,"reconnectAttempts",0),m()(this,"heartbeatTimeout",null),m()(this,"state","closed"),this.url=t,this.options={maxReconnectAttempts:n.maxReconnectAttempts||5,reconnectInterval:n.reconnectInterval||3e3,heartbeatInterval:n.heartbeatInterval||3e4},this.init()}var t,n;return f()(e,[{key:"init",value:(n=u()(s()().mark((function e(){var t=this;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.state="connecting",this.emit("connecting");case 3:if(!(this.reconnectAttempts<this.options.maxReconnectAttempts)){e.next=16;break}return this.socket=new(Z())(this.url),this.setupEventListeners(),this.startHeartbeat(),e.next=9,this.waitForClose();case 9:return this.stopHeartbeat(),this.socket=null,this.reconnectAttempts++,e.next=14,new Promise((function(e){return setTimeout(e,t.options.reconnectInterval)}));case 14:e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),this.handleError(e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(){return n.apply(this,arguments)})},{key:"setupEventListeners",value:function(){var e=this;this.socket&&(this.socket.onopen=function(){e.state="open",e.emit("open")},this.socket.onmessage=function(t){var n=JSON.parse(t.data);e.dispatchMessage(n)},this.socket.onclose=function(){e.state="closed",e.emit("close")})}},{key:"waitForClose",value:(t=u()(s()().mark((function e(){var t;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=this.socket)||void 0===t?void 0:t.readyState)===Z().CLOSED){e.next=5;break}return e.next=3,new Promise((function(e){return setTimeout(e,100)}));case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"subscribe",value:function(e,t){var n=this.subscriptions.get(e)||new Set;if(!n.has(t)){n.add(t),this.subscriptions.set(e,n);var r={action:"subscribe",topic:e};this.send(r)}}},{key:"unsubscribe",value:function(e,t){var n=this.subscriptions.get(e)||new Set;if(n.has(t)){n.delete(t);var r={action:"unsubscribe",topic:e};this.send(r)}}},{key:"send",value:function(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.readyState)===Z().OPEN&&this.socket.send(JSON.stringify(e))}},{key:"dispatchMessage",value:function(e){var t=e.type,n=o()(e,b),r=this.subscriptions.get(t)||new Set;a()(r).forEach((function(e){return e(n)}))}},{key:"startHeartbeat",value:function(){var e=this;this.heartbeatTimeout=setInterval((function(){var t;(null===(t=e.socket)||void 0===t?void 0:t.readyState)===Z().OPEN&&e.socket.send(JSON.stringify({type:"heartbeat"}))}),this.options.heartbeatInterval)}},{key:"stopHeartbeat",value:function(){this.heartbeatTimeout&&clearInterval(this.heartbeatTimeout)}},{key:"close",value:function(){this.socket&&(this.state="closed",this.stopHeartbeat(),this.socket.close(),this.emit("close"))}},{key:"handleError",value:function(e){console.error("WebSocket错误:",e),this.emit("error",e)}},{key:"on",value:function(e,t){}},{key:"emit",value:function(e,t){}}],[{key:"getInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return e.instance||(e.instance=new e(t,n)),e.instance}}]),e}();m()(P,"instance",null),t.Z=P},38433:function(){}}]);