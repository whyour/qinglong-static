(self.webpackChunk=self.webpackChunk||[]).push([[9818],{13740:function(s,i,e){"use strict";e.d(i,{Z:function(){return y}});var o=e(14797),r=e(63313),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},l=a,t=e(46420),n=function(m,S){return r.createElement(t.Z,(0,o.Z)((0,o.Z)({},m),{},{ref:S,icon:l}))};n.displayName="DeleteOutlined";var y=r.forwardRef(n)},38102:function(s,i,e){"use strict";var o=e(57213),r=e.n(o),a=e(63313),l=e.n(a);i.Z=function(t,n,y){var I=y.treeNodeFilterProp;return(0,a.useMemo)(function(){var m=[];if(!n)return{treeData:t,keys:m};var S=n.toUpperCase();function O(P,Z){var d=Z[I];return String(d).toUpperCase().includes(S)}function j(P){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return P.map(function(d){var g=d.children,f=Z||O(n,d),C=j(g||[],f);return f||C.length?(C.length&&m.push(d.key),r()(r()({},d),{},{children:C})):null}).filter(function(d){return d})}return{treeData:j(t),keys:m}},[t,n,I])}},30123:function(s,i,e){"use strict";e.r(i),e.d(i,{default:function(){return he}});var o=e(93525),r=e.n(o),a=e(54306),l=e.n(a),t=e(88265),n=e(63313),y=e(92260),I=e(84163),m=e(9835),S=e(75310),O=e(15367),j=e(24378),P=e(22159),Z=e(43209),d=e(84540),g=e(5558),f=e(78969),C=e(82755),p=e(95176),x={"left-tree-container":"left-tree-container___zHanw","left-tree-scroller":"left-tree-scroller___PInUN","log-container":"log-container___ba9Tr"},T=e(76661),ae=e(36035),re=e(98074),le=e(13740),oe=e(82428),se=e(66292),ie=e.n(se),ue=e(4363),ce=e.n(ue),de=e(38102),u=e(11527),fe=y.Z.Text,ve=function(){var R=(0,re.useOutletContext)(),ge=R.headerStyle,W=R.isPhone,xe=R.theme,me=(0,n.useState)(t.ZP.get("\u8BF7\u9009\u62E9\u65E5\u5FD7\u6587\u4EF6")),H=l()(me,2),K=H[0],F=H[1],Se=(0,n.useState)(""),U=l()(Se,2),L=U[0],z=U[1],pe=(0,n.useState)([]),G=l()(pe,2),N=G[0],Y=G[1],ye=(0,n.useState)(!1),J=l()(ye,2),Pe=J[0],Q=J[1],Ze=(0,n.useState)(),V=l()(Ze,2),Ce=V[0],Ee=V[1],M=(0,n.useRef)(),Ie=(0,n.useState)([]),X=l()(Ie,2),$=X[0],b=X[1],Oe=(0,n.useState)(),k=l()(Oe,2),D=k[0],w=k[1],je=(0,n.useState)(""),q=l()(je,2),Ne=q[0],De=q[1],Ae=function(){Q(!0),p.W.get("".concat(g.Z.apiPrefix,"logs")).then(function(c){var h=c.code,E=c.data;h===200&&Y(E)}).finally(function(){return Q(!1)})},Le=function(c){p.W.get("".concat(g.Z.apiPrefix,"logs/").concat(c.title,"?path=").concat(c.parent||"")).then(function(h){var E=h.code,A=h.data;E===200&&F(A)})},_=function(c,h){if(w(h),z(c),!(h.key===L||!c)){if(h.type==="directory"){F(t.ZP.get("\u8BF7\u9009\u62E9\u65E5\u5FD7\u6587\u4EF6"));return}F(t.ZP.get("\u52A0\u8F7D\u4E2D...")),Le(h)}},Fe=(0,n.useCallback)(function(v,c){_(v[0],c.node)},[]),Te=(0,n.useCallback)(function(v){var c=v.target.value;Me(c)},[N]),Me=(0,n.useCallback)(ie()(function(v){De(v)},300),[N]),ee=(0,de.Z)(N,Ne,{treeNodeFilterProp:"title"}),Re=ee.treeData,te=ee.keys;(0,n.useEffect)(function(){b(ce()([].concat(r()($),r()(te))))},[te]);var We=function(){I.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,u.jsxs)(u.Fragment,{children:[t.ZP.get("\u786E\u8BA4\u5220\u9664"),(0,u.jsx)(fe,{style:{wordBreak:"break-all"},type:"warning",children:L}),t.ZP.get("\u6587\u4EF6"),D.type==="directory"?t.ZP.get("\u5939\u4E0B\u6240\u4EE5\u65E5\u5FD7"):"",t.ZP.get("\uFF0C\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D")]}),onOk:function(){p.W.delete("".concat(g.Z.apiPrefix,"logs"),{data:{filename:D.title,path:D.parent||"",type:D.type}}).then(function(h){var E=h.code;if(E===200){m.ZP.success("\u5220\u9664\u6210\u529F");var A=r()(N);if(D.parent)A=(0,oe.I1)(A,function(B){return B.key===D.key});else{var ne=A.findIndex(function(B){return B.key===D.key});ne!==-1&&A.splice(ne,1)}Y(A),Be()}})},onCancel:function(){console.log("Cancel")}})},Be=function(){z(""),w(null),F(t.ZP.get("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6"))},He=function(c){b(c)};return(0,n.useEffect)(function(){Ae()},[]),(0,n.useEffect)(function(){M.current&&Ee(M.current.clientHeight)},[M.current,N]),(0,u.jsx)(f.ZP,{className:"ql-container-wrapper log-wrapper",title:L,loading:Pe,extra:W?[(0,u.jsx)(S.Z,{treeExpandAction:"click",className:"log-select",value:L,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:N,placeholder:t.ZP.get("\u8BF7\u9009\u62E9\u65E5\u5FD7"),fieldNames:{value:"key"},treeNodeFilterProp:"title",showSearch:!0,allowClear:!0,onSelect:_})]:[(0,u.jsx)(O.Z,{title:t.ZP.get("\u5220\u9664"),children:(0,u.jsx)(j.Z,{type:"primary",disabled:!L,onClick:We,icon:(0,u.jsx)(le.Z,{})})})],header:{style:ge},children:(0,u.jsxs)("div",{className:"".concat(x["log-container"]," log-container"),children:[!W&&(0,u.jsxs)(ae.Z,{split:"vertical",size:200,maxSize:-100,children:[(0,u.jsx)("div",{className:x["left-tree-container"],children:N.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(P.Z.Search,{className:x["left-tree-search"],onChange:Te,placeholder:t.ZP.get("\u8BF7\u8F93\u5165\u65E5\u5FD7\u540D"),allowClear:!0}),(0,u.jsx)("div",{className:x["left-tree-scroller"],ref:M,children:(0,u.jsx)(Z.Z,{expandAction:"click",className:x["left-tree"],treeData:Re,showIcon:!0,height:Ce,selectedKeys:[L],showLine:{showLeafIcon:!0},onSelect:Fe,expandedKeys:$,onExpand:He})})]}):(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,u.jsx)(d.Z,{description:t.ZP.get("\u6682\u65E0\u65E5\u5FD7"),image:d.Z.PRESENTED_IMAGE_SIMPLE})})}),(0,u.jsx)(C.ZP,{language:"shell",theme:xe,value:K,options:{readOnly:!0,fontSize:12,lineNumbersMinChars:3,fontFamily:"Source Code Pro",folding:!1,glyphMargin:!1,wordWrap:"on"}})]}),W&&(0,u.jsx)(T.fk,{value:K,options:{lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,matchBrackets:!0,readOnly:!0},onBeforeChange:function(c,h,E){F(E)},onChange:function(c,h,E){}})]})})},he=ve},45170:function(s,i,e){var o=e(13807);function r(a,l){var t=a==null?0:a.length;return!!t&&o(a,l,0)>-1}s.exports=r},94936:function(s){function i(e,o,r){for(var a=-1,l=e==null?0:e.length;++a<l;)if(r(o,e[a]))return!0;return!1}s.exports=i},92504:function(s){function i(e,o,r,a){for(var l=e.length,t=r+(a?1:-1);a?t--:++t<l;)if(o(e[t],t,e))return t;return-1}s.exports=i},13807:function(s,i,e){var o=e(92504),r=e(99940),a=e(3729);function l(t,n,y){return n===n?a(t,n,y):o(t,r,y)}s.exports=l},99940:function(s){function i(e){return e!==e}s.exports=i},95453:function(s,i,e){var o=e(78188),r=e(45170),a=e(94936),l=e(29880),t=e(17319),n=e(79967),y=200;function I(m,S,O){var j=-1,P=r,Z=m.length,d=!0,g=[],f=g;if(O)d=!1,P=a;else if(Z>=y){var C=S?null:t(m);if(C)return n(C);d=!1,P=l,f=new o}else f=S?[]:g;e:for(;++j<Z;){var p=m[j],x=S?S(p):p;if(p=O||p!==0?p:0,d&&x===x){for(var T=f.length;T--;)if(f[T]===x)continue e;S&&f.push(x),g.push(p)}else P(f,x,O)||(f!==g&&f.push(x),g.push(p))}return g}s.exports=I},17319:function(s,i,e){var o=e(81956),r=e(43226),a=e(79967),l=1/0,t=o&&1/a(new o([,-0]))[1]==l?function(n){return new o(n)}:r;s.exports=t},3729:function(s){function i(e,o,r){for(var a=r-1,l=e.length;++a<l;)if(e[a]===o)return a;return-1}s.exports=i},43226:function(s){function i(){}s.exports=i},4363:function(s,i,e){var o=e(95453);function r(a){return a&&a.length?o(a):[]}s.exports=r}}]);
