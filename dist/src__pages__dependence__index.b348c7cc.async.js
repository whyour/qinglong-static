"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9914],{20209:function(J,_,e){e.d(_,{Z:function(){return l}});var h=e(56453),o=e(63313),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},m=c,x=e(46420),u=function(p,C){return o.createElement(x.Z,(0,h.Z)((0,h.Z)({},p),{},{ref:C,icon:m}))};u.displayName="ClockCircleOutlined";var l=o.forwardRef(u)},13740:function(J,_,e){e.d(_,{Z:function(){return l}});var h=e(56453),o=e(63313),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},m=c,x=e(46420),u=function(p,C){return o.createElement(x.Z,(0,h.Z)((0,h.Z)({},p),{},{ref:C,icon:m}))};u.displayName="DeleteOutlined";var l=o.forwardRef(u)},97674:function(J,_,e){e.d(_,{Z:function(){return l}});var h=e(56453),o=e(63313),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},m=c,x=e(46420),u=function(p,C){return o.createElement(x.Z,(0,h.Z)((0,h.Z)({},p),{},{ref:C,icon:m}))};u.displayName="FileTextOutlined";var l=o.forwardRef(u)},65601:function(J,_,e){e.d(_,{Z:function(){return l}});var h=e(56453),o=e(63313),c={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"}}]},name:"loading-3-quarters",theme:"outlined"},m=c,x=e(46420),u=function(p,C){return o.createElement(x.Z,(0,h.Z)((0,h.Z)({},p),{},{ref:C,icon:m}))};u.displayName="Loading3QuartersOutlined";var l=o.forwardRef(u)},76921:function(J,_,e){var h=e(54306),o=e.n(h),c=e(63313),m=e.n(c),x=e(61761),u=e(50204);_.Z=function(l,B){var p=(0,c.useState)(0),C=o()(p,2),k=C[0],O=C[1];return(0,x.Z)(l,function(F){var v=F.target;v.classList.contains("ant-table-wrapper")||(v=F.target.querySelector(".ant-table-wrapper")),O((0,u.W9)({extraHeight:B,target:v}))}),k}},15110:function(J,_,e){e.r(_),e.d(_,{default:function(){return A}});var h=e(93525),o=e.n(h),c=e(54306),m=e.n(c),x=e(57213),u=e.n(x),l=e(63313),B=e(5555),p=e(14355),C=e(24831),k=e(98359),O=e(46109),F=e(19924),v=e(48079),le=e(20322),Ee=e(5711),P=e(56453),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},he=d,H=e(46420),b=function(R,K){return l.createElement(H.Z,(0,P.Z)((0,P.Z)({},R),{},{ref:K,icon:he}))};b.displayName="SyncOutlined";var I=l.forwardRef(b),z=e(38101),S=e(76657),Y=e(20209),oe=e(97674),re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"},ie=re,X=function(R,K){return l.createElement(H.Z,(0,P.Z)((0,P.Z)({},R),{},{ref:K,icon:ie}))};X.displayName="BugOutlined";var w=l.forwardRef(X),ue=e(13740),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},_e=ce,N=function(R,K){return l.createElement(H.Z,(0,P.Z)((0,P.Z)({},R),{},{ref:K,icon:_e}))};N.displayName="DeleteFilled";var de=l.forwardRef(N),j=e(35475),Z=e(16782),M=e(44297),V=e(85104),q=e(78156),Q=e(66255),ee=e(85361),ne=e(59615),$=e(76921),n=e(11527),W=B.Z.Text,se=p.Z.Search,E;(function(r){r[r.\u5B89\u88C5\u4E2D=0]="\u5B89\u88C5\u4E2D",r[r.\u5DF2\u5B89\u88C5=1]="\u5DF2\u5B89\u88C5",r[r.\u5B89\u88C5\u5931\u8D25=2]="\u5B89\u88C5\u5931\u8D25",r[r.\u5220\u9664\u4E2D=3]="\u5220\u9664\u4E2D",r[r.\u5DF2\u5220\u9664=4]="\u5DF2\u5220\u9664",r[r.\u5220\u9664\u5931\u8D25=5]="\u5220\u9664\u5931\u8D25",r[r.\u961F\u5217\u4E2D=6]="\u961F\u5217\u4E2D"})(E||(E={}));var De;(function(r){r[r.processing=0]="processing",r[r.success=1]="success",r[r.error=2]="error"})(De||(De={}));var y={0:{icon:(0,n.jsx)(I,{spin:!0}),color:"processing"},1:{icon:(0,n.jsx)(z.Z,{}),color:"success"},2:{icon:(0,n.jsx)(S.Z,{}),color:"error"},3:{icon:(0,n.jsx)(I,{spin:!0}),color:"processing"},4:{icon:(0,n.jsx)(z.Z,{}),color:"success"},5:{icon:(0,n.jsx)(S.Z,{}),color:"error"},6:{icon:(0,n.jsx)(Y.Z,{}),color:"default"}},L=function(){var R=(0,ne.bx)(),K=R.headerStyle,Qe=R.isPhone,fe=R.socketMessage,$e=[{title:"\u5E8F\u53F7",width:50,render:function(t,a,i){return(0,n.jsxs)("span",{style:{cursor:"text"},children:[i+1," "]})}},{title:"\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(t,a,i){return(0,n.jsx)(C.Z,{size:"middle",style:{cursor:"text"},children:(0,n.jsx)(k.Z,{color:y[a.status].color,icon:y[a.status].icon,style:{marginRight:0},children:E[a.status]})})}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"timestamp",dataIndex:"timestamp",render:function(t,a){var i=navigator.language||navigator.languages[0],s=a.createdAt||a.timestamp,g=new Date(s).toLocaleString(i,{hour12:!1}).replace(" 24:"," 00:");return(0,n.jsx)(O.Z,{placement:"topLeft",title:g,trigger:["hover","click"],children:(0,n.jsx)("span",{children:g})})}},{title:"\u64CD\u4F5C",key:"action",render:function(t,a,i){var s=!Qe;return(0,n.jsxs)(C.Z,{size:"middle",children:[(0,n.jsx)(O.Z,{title:s?"\u65E5\u5FD7":"",children:(0,n.jsx)("a",{onClick:function(){ln(u()(u()({},a),{},{timestamp:Date.now()}))},children:(0,n.jsx)(oe.Z,{})})}),a.status!==E.\u5B89\u88C5\u4E2D&&a.status!==E.\u5220\u9664\u4E2D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.Z,{title:s?"\u91CD\u65B0\u5B89\u88C5":"",children:(0,n.jsx)("a",{onClick:function(){return fn(a,i)},children:(0,n.jsx)(w,{})})}),(0,n.jsx)(O.Z,{title:s?"\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return He(a,i)},children:(0,n.jsx)(ue.Z,{})})}),(0,n.jsx)(O.Z,{title:s?"\u5F3A\u5236\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return He(a,i,!0)},children:(0,n.jsx)(de,{})})})]})]})}}],Ge=(0,l.useState)([]),Ze=m()(Ge,2),D=Ze[0],G=Ze[1],Je=(0,l.useState)(!0),Be=m()(Je,2),Se=Be[0],Me=Be[1],Ye=(0,l.useState)(!1),Ae=m()(Ye,2),Xe=Ae[0],ye=Ae[1],we=(0,l.useState)(),Ie=m()(we,2),qe=Ie[0],Le=Ie[1],en=(0,l.useState)([]),Re=m()(en,2),te=Re[0],Ce=Re[1],nn=(0,l.useState)(""),Te=m()(nn,2),Fe=Te[0],tn=Te[1],an=(0,l.useState)(),We=m()(an,2),ae=We[0],ln=We[1],on=(0,l.useState)(!1),Ke=m()(on,2),rn=Ke[0],Ue=Ke[1],un=(0,l.useState)("nodejs"),be=m()(un,2),Pe=be[0],cn=be[1],ze=(0,l.useRef)(),dn=(0,$.Z)(ze,59),je=function(){Me(!0),M.W.get("".concat(j.Z.apiPrefix,"dependencies?searchValue=").concat(Fe,"&type=").concat(Pe)).then(function(t){var a=t.code,i=t.data;a===200&&G(i)}).finally(function(){return Me(!1)})},sn=function(){Le(null),ye(!0)},On=function(t,a){Le(t),ye(!0)},He=function(t,a){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;F.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u5220\u9664\u4F9D\u8D56"," ",(0,n.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){M.W.delete("".concat(j.Z.apiPrefix,"dependencies").concat(i?"/force":""),{data:[t.id]}).then(function(g){var T=g.code,ve=g.data;if(T===200&&i){var Oe=D.findIndex(function(ge){return ge.id===ve.data[0].id});if(Oe!==-1){var me=o()(D);me.splice(Oe,1),G(me)}}})},onCancel:function(){console.log("Cancel")}})},fn=function(t,a){F.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5"," ",(0,n.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){M.W.put("".concat(j.Z.apiPrefix,"dependencies/reinstall"),{data:[t.id]}).then(function(s){var g=s.code,T=s.data;g===200&&Ve(T[0])})},onCancel:function(){console.log("Cancel")}})},vn=function(t){ye(!1),t&&Ve(t)},Ve=function(t){var a=o()(D);if(Array.isArray(t))a.push.apply(a,o()(t));else{var i=D.findIndex(function(s){return s.id===t.id});i!==-1&&a.splice(i,1,u()({},t))}G(a)},mn=function(t){Ce(t)},gn={selectedRowKeys:te,onChange:mn},ke=function(t){var a=t?"/force":"";F.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){M.W.delete("".concat(j.Z.apiPrefix,"dependencies").concat(a),{data:te}).then(function(s){var g=s.code,T=s.data;g===200&&(Ce([]),je())})},onCancel:function(){console.log("Cancel")}})},hn=function(){F.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){M.W.put("".concat(j.Z.apiPrefix,"dependencies/reinstall"),{data:te}).then(function(a){var i=a.code,s=a.data;i===200&&(Ce([]),je())})},onCancel:function(){console.log("Cancel")}})},_n=function(t){M.W.get("".concat(j.Z.apiPrefix,"dependencies/").concat(t.id)).then(function(a){var i=a.code,s=a.data;if(i===200){var g=D.findIndex(function(ve){return ve.id===t.id}),T=o()(D);g!==-1&&(T.splice(g,1,u()(u()({},t),s)),G(T))}}).finally(function(){return Me(!1)})},Dn=function(t){tn(t.trim())};(0,l.useEffect)(function(){je()},[Fe,Pe]),(0,l.useEffect)(function(){ae&&(localStorage.setItem("logDependence",ae.id),Ue(!0))},[ae]),(0,l.useEffect)(function(){if(fe){var f=fe.type,t=fe.message,a=fe.references;if(f==="installDependence"&&t.includes("\u5F00\u59CB\u65F6\u95F4")&&a.length>0){for(var i=o()(D),s=function(pe){var U=D.findIndex(function(xe){return xe.id===a[pe]});U!==-1&&i.splice(U,1,u()(u()({},D[U]),{},{status:t.includes("\u5B89\u88C5")?E.\u5B89\u88C5\u4E2D:E.\u5220\u9664\u4E2D}))},g=0;g<a.length;g++)s(g);G(i)}if(f==="installDependence"&&t.includes("\u7ED3\u675F\u65F6\u95F4")&&a.length>0){var T;t.includes("\u5B89\u88C5")?T=t.includes("\u6210\u529F")?E.\u5DF2\u5B89\u88C5:E.\u5B89\u88C5\u5931\u8D25:T=t.includes("\u6210\u529F")?E.\u5DF2\u5220\u9664:E.\u5220\u9664\u5931\u8D25;for(var ve=o()(D),Oe=function(pe){var U=D.findIndex(function(xe){return xe.id===a[pe]});U!==-1&&ve.splice(U,1,u()(u()({},D[U]),{},{status:T}))},me=0;me<a.length;me++)Oe(me);G(ve),T===E.\u5DF2\u5220\u9664&&setTimeout(function(){for(var ge=o()(D),pe=function(En){var Ne=D.findIndex(function(Cn){return Cn.id===a[En]});Ne!==-1&&ge.splice(Ne,1)},U=0;U<a.length;U++)pe(U);G(ge)},5e3)}}},[fe]);var pn=function(t){Ce([]),cn(t)};return(0,n.jsxs)(Z.ZP,{className:"ql-container-wrapper dependence-wrapper ql-container-wrapper-has-tab",title:"\u4F9D\u8D56\u7BA1\u7406",extra:[(0,n.jsx)(se,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",style:{width:"auto"},enterButton:!0,loading:Se,onSearch:Dn}),(0,n.jsx)(v.Z,{type:"primary",onClick:function(){return sn()},children:"\u65B0\u5EFA\u4F9D\u8D56"},"2")],header:{style:K},children:[(0,n.jsx)(le.Z,{defaultActiveKey:"nodejs",size:"small",tabPosition:"top",onChange:pn,items:[{key:"nodejs",label:"NodeJs"},{key:"python3",label:"Python3"},{key:"linux",label:"Linux"}]}),(0,n.jsxs)("div",{ref:ze,children:[te.length>0&&(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)(v.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return hn()},children:"\u6279\u91CF\u5B89\u88C5"}),(0,n.jsx)(v.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return ke(!1)},children:"\u6279\u91CF\u5220\u9664"}),(0,n.jsx)(v.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return ke(!0)},children:"\u6279\u91CF\u5F3A\u5236\u5220\u9664"}),(0,n.jsxs)("span",{style:{marginLeft:8},children:["\u5DF2\u9009\u62E9",(0,n.jsx)("a",{children:te==null?void 0:te.length}),"\u9879"]})]}),(0,n.jsx)(q.W,{backend:Q.PD,children:(0,n.jsx)(Ee.Z,{columns:$e,rowSelection:gn,pagination:!1,dataSource:D,rowKey:"id",size:"middle",scroll:{x:768,y:dn},loading:Se})})]}),(0,n.jsx)(V.default,{visible:Xe,handleCancel:vn,dependence:qe,defaultType:Pe}),(0,n.jsx)(ee.default,{visible:rn,handleCancel:function(t){if(Ue(!1),t){var a=D.findIndex(function(s){return s.id===ae.id}),i=o()(D);a!==-1&&(i.splice(a,1),G(i))}else o()(D).map(function(s){return s.id}).includes(ae.id)&&_n(ae)},socketMessage:fe,dependence:ae})]})},A=L},85361:function(J,_,e){e.r(_);var h=e(54306),o=e.n(h),c=e(63313),m=e.n(c),x=e(19924),u=e(48079),l=e(44297),B=e(35475),p=e(65601),C=e(38101),k=e(63168),O=e(99120),F=e.n(O),v=e(11527),le=function(P){var d=P.dependence,he=P.handleCancel,H=P.visible,b=P.socketMessage,I=(0,c.useState)(""),z=o()(I,2),S=z[0],Y=z[1],oe=(0,c.useState)(!0),re=o()(oe,2),ie=re[0],X=re[1],w=(0,c.useState)(!1),ue=o()(w,2),ce=ue[0],_e=ue[1],N=(0,c.useState)(!0),de=o()(N,2),j=de[0],Z=de[1],M=(0,c.useState)(!1),V=o()(M,2),q=V[0],Q=V[1],ee=(0,c.useState)(!1),ne=o()(ee,2),$=ne[0],n=ne[1],W=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;localStorage.removeItem("logDependence"),he(A)},se=function(){return(0,v.jsxs)(v.Fragment,{children:[ie&&(0,v.jsx)(p.Z,{spin:!0}),!ie&&(0,v.jsx)(C.Z,{}),(0,v.jsxs)("span",{style:{marginLeft:5},children:["\u65E5\u5FD7 - ",d&&d.name]})," "]})},E=function(){Z(!0),l.W.get("".concat(B.Z.apiPrefix,"dependencies/").concat(d.id)).then(function(A){var r=A.code,R=A.data;if(r===200&&localStorage.getItem("logDependence")===String(d.id)){var K=(R.log||[]).join("");Y(K),X(!K.includes("\u7ED3\u675F\u65F6\u95F4")),Q(K.includes("\u5220\u9664\u5931\u8D25"))}}).finally(function(){Z(!1)})},De=function(){n(!0),l.W.delete("".concat(B.Z.apiPrefix,"dependencies/force"),{data:[d.id]}).then(function(A){var r=A.code,R=A.data;r===200&&W(!0)}).finally(function(){n(!1)})},y=function(){q?De():W()};return(0,c.useEffect)(function(){d&&E()},[d]),(0,c.useEffect)(function(){if(!(!b||!d)){var L=b.type,A=b.message,r=b.references;L==="installDependence"&&r.length>0&&r.includes(d.id)&&(A.includes("\u7ED3\u675F\u65F6\u95F4")&&(X(!1),Q(A.includes("\u5220\u9664\u5931\u8D25"))),Y("".concat(S).concat(A)))}},[b]),(0,c.useEffect)(function(){_e(document.body.clientWidth<768)},[]),(0,v.jsx)(x.Z,{title:se(),open:H,centered:!0,className:"log-modal",bodyStyle:{overflowY:"auto",maxHeight:"calc(70vh - var(--vh-offset, 0px))",minHeight:"300px"},forceRender:!0,onOk:function(){return W()},onCancel:function(){return W()},footer:[(0,v.jsx)(u.Z,{type:"primary",onClick:y,loading:$,children:q?"\u5F3A\u5236\u5220\u9664":"\u77E5\u9053\u4E86"})],children:j?(0,v.jsx)(k.Z,{}):(0,v.jsx)("pre",{style:ce?{fontFamily:"Source Code Pro",width:375,zoom:.83}:{},children:(0,v.jsx)(F(),{children:S})})})};_.default=le},85104:function(J,_,e){e.r(_);var h=e(25359),o=e.n(h),c=e(57213),m=e.n(c),x=e(49811),u=e.n(x),l=e(54306),B=e.n(l),p=e(63313),C=e.n(p),k=e(34312),O=e(34263),F=e(19924),v=e(70270),le=e(14355),Ee=e(44297),P=e(35475),d=e(11527),he=k.Z.Option,H;(function(I){I[I.nodejs=0]="nodejs",I[I.python3=1]="python3",I[I.linux=2]="linux"})(H||(H={}));var b=function(z){var S=z.dependence,Y=z.handleCancel,oe=z.visible,re=z.defaultType,ie=O.Z.useForm(),X=B()(ie,1),w=X[0],ue=(0,p.useState)(!1),ce=B()(ue,2),_e=ce[0],N=ce[1],de=function(){var j=u()(o()().mark(function Z(M){var V,q,Q,ee,ne,$,n,W,se,E;return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return N(!0),V=M.name,q=M.split,Q=M.type,ee=M.remark,ne=S?"put":"post",S?$=m()(m()({},M),{},{id:S.id}):q==="1"?(n=V.includes("&")?"&":`
`,$=V.split(n).map(function(L){return{name:L,type:Q,remark:ee}})):$=[{name:V,type:Q,remark:ee}],y.prev=4,y.next=7,Ee.W[ne]("".concat(P.Z.apiPrefix,"dependencies"),{data:$});case 7:W=y.sent,se=W.code,E=W.data,se===200&&Y(E),N(!1),y.next=17;break;case 14:y.prev=14,y.t0=y.catch(4),N(!1);case 17:case"end":return y.stop()}},Z,null,[[4,14]])}));return function(M){return j.apply(this,arguments)}}();return(0,p.useEffect)(function(){w.resetFields()},[S,oe]),(0,d.jsx)(F.Z,{title:S?"\u7F16\u8F91\u4F9D\u8D56":"\u65B0\u5EFA\u4F9D\u8D56",open:oe,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){w.validateFields().then(function(Z){de(Z)}).catch(function(Z){console.log("Validate Failed:",Z)})},onCancel:function(){return Y()},confirmLoading:_e,children:(0,d.jsxs)(O.Z,{form:w,layout:"vertical",name:"dependence_modal",initialValues:S,children:[(0,d.jsx)(O.Z.Item,{name:"type",label:"\u4F9D\u8D56\u7C7B\u578B",initialValue:H[re],children:(0,d.jsx)(k.Z,{children:P.Z.dependenceTypes.map(function(j,Z){return(0,d.jsx)(he,{value:Z,children:j},Z)})})}),!S&&(0,d.jsx)(O.Z.Item,{name:"split",label:"\u81EA\u52A8\u62C6\u5206",initialValue:"0",tooltip:"\u591A\u4E2A\u4F9D\u8D56\u662F\u5426\u6362\u884C\u5206\u5272",children:(0,d.jsxs)(v.ZP.Group,{children:[(0,d.jsx)(v.ZP,{value:"1",children:"\u662F"}),(0,d.jsx)(v.ZP,{value:"0",children:"\u5426"})]})}),(0,d.jsx)(O.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0",whitespace:!0}],children:(0,d.jsx)(le.Z.TextArea,{rows:4,autoSize:!0,placeholder:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0"})}),(0,d.jsx)(O.Z.Item,{name:"remark",label:"\u5907\u6CE8",children:(0,d.jsx)(le.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})})};_.default=b}}]);
