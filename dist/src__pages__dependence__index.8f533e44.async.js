"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9914],{5962:function(le,D,e){e.d(D,{Z:function(){return o}});var E=e(56453),r=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},_=s,j=e(17536),v=function(O,x){return r.createElement(j.Z,(0,E.Z)((0,E.Z)({},O),{},{ref:x,icon:_}))};v.displayName="DeleteOutlined";var o=r.forwardRef(v)},62198:function(le,D,e){e.d(D,{Z:function(){return o}});var E=e(56453),r=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},_=s,j=e(17536),v=function(O,x){return r.createElement(j.Z,(0,E.Z)((0,E.Z)({},O),{},{ref:x,icon:_}))};v.displayName="FileTextOutlined";var o=r.forwardRef(v)},35316:function(le,D,e){e.d(D,{Z:function(){return o}});var E=e(56453),r=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"}}]},name:"loading-3-quarters",theme:"outlined"},_=s,j=e(17536),v=function(O,x){return r.createElement(j.Z,(0,E.Z)((0,E.Z)({},O),{},{ref:x,icon:_}))};v.displayName="Loading3QuartersOutlined";var o=r.forwardRef(v)},78527:function(le,D,e){var E=e(54306),r=e.n(E),s=e(63313),_=e.n(s),j=e(61761),v=e(96001);D.Z=function(o,B){var O=(0,s.useState)(0),x=r()(O,2),k=x[0],p=x[1];return(0,j.Z)(o,function(I){var c=I.target;c.classList.contains("ant-table-wrapper")||(c=I.target.querySelector(".ant-table-wrapper")),p((0,v.W9)({extraHeight:B,target:c}))}),k}},17844:function(le,D,e){e.r(D),e.d(D,{default:function(){return $}});var E=e(93525),r=e.n(E),s=e(54306),_=e.n(s),j=e(57213),v=e.n(j),o=e(63313),B=e(10816),O=e(38626),x=e(33682),k=e(46236),p=e(75448),I=e(24550),c=e(21728),oe=e(16495),_e=e(31625),H=e(62198),i=e(56453),fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"},G=fe,F=e(17536),Z=function(C,K){return o.createElement(F.Z,(0,i.Z)((0,i.Z)({},C),{},{ref:K,icon:G}))};Z.displayName="BugOutlined";var z=o.forwardRef(Z),S=e(5962),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},re=J,Y=function(C,K){return o.createElement(F.Z,(0,i.Z)((0,i.Z)({},C),{},{ref:K,icon:re}))};Y.displayName="DeleteFilled";var ie=o.forwardRef(Y),L=e(45277),X=e(97302),T=e(96786),ue=e(5309),ve=e(94701),w=e(66255),de=e(19297),V=e(95354),M=e(78527),n=e(11527),W=B.Z.Text,q=O.Z.Search,h;(function(u){u[u.\u5B89\u88C5\u4E2D=0]="\u5B89\u88C5\u4E2D",u[u.\u5DF2\u5B89\u88C5=1]="\u5DF2\u5B89\u88C5",u[u.\u5B89\u88C5\u5931\u8D25=2]="\u5B89\u88C5\u5931\u8D25",u[u.\u5220\u9664\u4E2D=3]="\u5220\u9664\u4E2D",u[u.\u5DF2\u5220\u9664=4]="\u5DF2\u5220\u9664",u[u.\u5220\u9664\u5931\u8D25=5]="\u5220\u9664\u5931\u8D25"})(h||(h={}));var N;(function(u){u[u.processing=0]="processing",u[u.success=1]="success",u[u.error=2]="error"})(N||(N={}));var ee=function(){var C=(0,V.bx)(),K=C.headerStyle,se=C.isPhone,Q=C.socketMessage,P=[{title:"\u5E8F\u53F7",width:50,render:function(t,a,l){return(0,n.jsxs)("span",{style:{cursor:"text"},children:[l+1," "]})}},{title:"\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(t,a,l){return(0,n.jsx)(x.Z,{size:"middle",style:{cursor:"text"},children:(0,n.jsx)(k.Z,{color:N[a.status%3],style:{marginRight:0},children:h[a.status]})})}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"timestamp",dataIndex:"timestamp",render:function(t,a){var l=navigator.language||navigator.languages[0],d=a.createdAt||a.timestamp,g=new Date(d).toLocaleString(l,{hour12:!1}).replace(" 24:"," 00:");return(0,n.jsx)(p.Z,{placement:"topLeft",title:g,trigger:["hover","click"],children:(0,n.jsx)("span",{children:g})})}},{title:"\u64CD\u4F5C",key:"action",render:function(t,a,l){var d=!se;return(0,n.jsxs)(x.Z,{size:"middle",children:[(0,n.jsx)(p.Z,{title:d?"\u65E5\u5FD7":"",children:(0,n.jsx)("a",{onClick:function(){$e(v()(v()({},a),{},{timestamp:Date.now()}))},children:(0,n.jsx)(H.Z,{})})}),a.status!==h.\u5B89\u88C5\u4E2D&&a.status!==h.\u5220\u9664\u4E2D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{title:d?"\u91CD\u65B0\u5B89\u88C5":"",children:(0,n.jsx)("a",{onClick:function(){return en(a,l)},children:(0,n.jsx)(z,{})})}),(0,n.jsx)(p.Z,{title:d?"\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return Re(a,l)},children:(0,n.jsx)(S.Z,{})})}),(0,n.jsx)(p.Z,{title:d?"\u5F3A\u5236\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return Re(a,l,!0)},children:(0,n.jsx)(ie,{})})})]})]})}}],A=(0,o.useState)([]),y=_()(A,2),m=y[0],U=y[1],me=(0,o.useState)(!0),Oe=_()(me,2),xe=Oe[0],De=Oe[1],Ue=(0,o.useState)(!1),Me=_()(Ue,2),be=Me[0],Ee=Me[1],He=(0,o.useState)(),Pe=_()(He,2),ze=Pe[0],ye=Pe[1],Ve=(0,o.useState)([]),je=_()(Ve,2),ne=je[0],ge=je[1],Ne=(0,o.useState)(""),Be=_()(Ne,2),Ze=Be[0],Qe=Be[1],ke=(0,o.useState)(),Se=_()(ke,2),te=Se[0],$e=Se[1],Ge=(0,o.useState)(!1),Ae=_()(Ge,2),Je=Ae[0],Ie=Ae[1],Ye=(0,o.useState)("nodejs"),Le=_()(Ye,2),pe=Le[0],Xe=Le[1],Te=(0,o.useRef)(),we=(0,M.Z)(Te,59),Ce=function(){De(!0),T.W.get("".concat(L.Z.apiPrefix,"dependencies?searchValue=").concat(Ze,"&type=").concat(pe)).then(function(t){var a=t.code,l=t.data;a===200&&U(l)}).finally(function(){return De(!1)})},qe=function(){ye(null),Ee(!0)},cn=function(t,a){ye(t),Ee(!0)},Re=function(t,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;I.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u5220\u9664\u4F9D\u8D56"," ",(0,n.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){T.W.delete("".concat(L.Z.apiPrefix,"dependencies").concat(l?"/force":""),{data:[t.id]}).then(function(g){var R=g.code,ae=g.data;if(R===200&&l){var ce=m.findIndex(function(he){return he.id===ae.data[0].id});if(ce!==-1){var b=r()(m);b.splice(ce,1),U(b)}}})},onCancel:function(){console.log("Cancel")}})},en=function(t,a){I.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5"," ",(0,n.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){T.W.put("".concat(L.Z.apiPrefix,"dependencies/reinstall"),{data:[t.id]}).then(function(d){var g=d.code,R=d.data;g===200&&Fe(R[0])})},onCancel:function(){console.log("Cancel")}})},nn=function(t){Ee(!1),t&&Fe(t)},Fe=function(t){var a=r()(m);if(Array.isArray(t))a.push.apply(a,r()(t));else{var l=m.findIndex(function(d){return d.id===t.id});l!==-1&&a.splice(l,1,v()({},t))}U(a)},tn=function(t){ge(t)},an={selectedRowKeys:ne,onChange:tn},We=function(t){var a=t?"/force":"";I.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){T.W.delete("".concat(L.Z.apiPrefix,"dependencies").concat(a),{data:ne}).then(function(d){var g=d.code,R=d.data;g===200&&(ge([]),Ce())})},onCancel:function(){console.log("Cancel")}})},ln=function(){I.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){T.W.put("".concat(L.Z.apiPrefix,"dependencies/reinstall"),{data:ne}).then(function(a){var l=a.code,d=a.data;l===200&&(ge([]),Ce())})},onCancel:function(){console.log("Cancel")}})},on=function(t){T.W.get("".concat(L.Z.apiPrefix,"dependencies/").concat(t.id)).then(function(a){var l=a.code,d=a.data;if(l===200){var g=m.findIndex(function(ae){return ae.id===t.id}),R=r()(m);g!==-1&&(R.splice(g,1,v()(v()({},t),d)),U(R))}}).finally(function(){return De(!1)})},rn=function(t){Qe(t.trim())};(0,o.useEffect)(function(){Ce()},[Ze,pe]),(0,o.useEffect)(function(){te&&(localStorage.setItem("logDependence",te.id),Ie(!0))},[te]),(0,o.useEffect)(function(){if(Q){var f=Q.type,t=Q.message,a=Q.references;if(f==="installDependence"&&t.includes("\u7ED3\u675F\u65F6\u95F4")&&a.length>0){var l;t.includes("\u5B89\u88C5")?l=t.includes("\u6210\u529F")?h.\u5DF2\u5B89\u88C5:h.\u5B89\u88C5\u5931\u8D25:l=t.includes("\u6210\u529F")?h.\u5DF2\u5220\u9664:h.\u5220\u9664\u5931\u8D25;for(var d=r()(m),g=function(ce){var b=m.findIndex(function(he){return he.id===a[ce]});b!==-1&&d.splice(b,1,v()(v()({},m[b]),{},{status:l}))},R=0;R<a.length;R++)g(R);U(d),l===h.\u5DF2\u5220\u9664&&setTimeout(function(){for(var ae=r()(m),ce=function(dn){var Ke=m.findIndex(function(sn){return sn.id===a[dn]});Ke!==-1&&ae.splice(Ke,1)},b=0;b<a.length;b++)ce(b);U(ae)},5e3)}}},[Q]);var un=function(t){ge([]),Xe(t)};return(0,n.jsxs)(X.ZP,{className:"ql-container-wrapper dependence-wrapper ql-container-wrapper-has-tab",title:"\u4F9D\u8D56\u7BA1\u7406",extra:[(0,n.jsx)(q,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",style:{width:"auto"},enterButton:!0,loading:xe,onSearch:rn}),(0,n.jsx)(c.Z,{type:"primary",onClick:function(){return qe()},children:"\u65B0\u5EFA\u4F9D\u8D56"},"2")],header:{style:K},children:[(0,n.jsx)(oe.Z,{defaultActiveKey:"nodejs",size:"small",tabPosition:"top",onChange:un,items:[{key:"nodejs",label:"NodeJs"},{key:"python3",label:"Python3"},{key:"linux",label:"Linux"}]}),(0,n.jsxs)("div",{ref:Te,children:[ne.length>0&&(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return ln()},children:"\u6279\u91CF\u5B89\u88C5"}),(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return We(!1)},children:"\u6279\u91CF\u5220\u9664"}),(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return We(!0)},children:"\u6279\u91CF\u5F3A\u5236\u5220\u9664"}),(0,n.jsxs)("span",{style:{marginLeft:8},children:["\u5DF2\u9009\u62E9",(0,n.jsx)("a",{children:ne==null?void 0:ne.length}),"\u9879"]})]}),(0,n.jsx)(ve.W,{backend:w.PD,children:(0,n.jsx)(_e.Z,{columns:P,rowSelection:an,pagination:!1,dataSource:m,rowKey:"id",size:"middle",scroll:{x:768,y:we},loading:xe})})]}),(0,n.jsx)(ue.default,{visible:be,handleCancel:nn,dependence:ze,defaultType:pe}),(0,n.jsx)(de.default,{visible:Je,handleCancel:function(t){if(Ie(!1),t){var a=m.findIndex(function(d){return d.id===te.id}),l=r()(m);a!==-1&&(l.splice(a,1),U(l))}else r()(m).map(function(d){return d.id}).includes(te.id)&&on(te)},socketMessage:Q,dependence:te})]})},$=ee},19297:function(le,D,e){e.r(D);var E=e(54306),r=e.n(E),s=e(63313),_=e.n(s),j=e(24550),v=e(21728),o=e(96786),B=e(45277),O=e(35316),x=e(9734),k=e(80675),p=e(42881),I=e.n(p),c=e(11527),oe=function(H){var i=H.dependence,fe=H.handleCancel,G=H.visible,F=H.socketMessage,Z=(0,s.useState)(""),z=r()(Z,2),S=z[0],J=z[1],re=(0,s.useState)(!0),Y=r()(re,2),ie=Y[0],L=Y[1],X=(0,s.useState)(!1),T=r()(X,2),ue=T[0],ve=T[1],w=(0,s.useState)(!0),de=r()(w,2),V=de[0],M=de[1],n=(0,s.useState)(!1),W=r()(n,2),q=W[0],h=W[1],N=(0,s.useState)(!1),ee=r()(N,2),$=ee[0],u=ee[1],C=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;localStorage.removeItem("logDependence"),fe(y)},K=function(){return(0,c.jsxs)(c.Fragment,{children:[ie&&(0,c.jsx)(O.Z,{spin:!0}),!ie&&(0,c.jsx)(x.Z,{}),(0,c.jsxs)("span",{style:{marginLeft:5},children:["\u65E5\u5FD7 - ",i&&i.name]})," "]})},se=function(){M(!0),o.W.get("".concat(B.Z.apiPrefix,"dependencies/").concat(i.id)).then(function(y){var m=y.code,U=y.data;if(m===200&&localStorage.getItem("logDependence")===String(i.id)){var me=(U.log||[]).join("");J(me),L(!me.includes("\u7ED3\u675F\u65F6\u95F4")),h(me.includes("\u5220\u9664\u5931\u8D25"))}}).finally(function(){M(!1)})},Q=function(){u(!0),o.W.delete("".concat(B.Z.apiPrefix,"dependencies/force"),{data:[i.id]}).then(function(y){var m=y.code,U=y.data;m===200&&C(!0)}).finally(function(){u(!1)})},P=function(){q?Q():C()};return(0,s.useEffect)(function(){i&&se()},[i]),(0,s.useEffect)(function(){if(!(!F||!i)){var A=F.type,y=F.message,m=F.references;A==="installDependence"&&m.length>0&&m.includes(i.id)&&(y.includes("\u7ED3\u675F\u65F6\u95F4")&&(L(!1),h(y.includes("\u5220\u9664\u5931\u8D25"))),J("".concat(S).concat(y)))}},[F]),(0,s.useEffect)(function(){ve(document.body.clientWidth<768)},[]),(0,c.jsx)(j.Z,{title:K(),open:G,centered:!0,className:"log-modal",bodyStyle:{overflowY:"auto",maxHeight:"calc(70vh - var(--vh-offset, 0px))",minHeight:"300px"},forceRender:!0,onOk:function(){return C()},onCancel:function(){return C()},footer:[(0,c.jsx)(v.Z,{type:"primary",onClick:P,loading:$,children:q?"\u5F3A\u5236\u5220\u9664":"\u77E5\u9053\u4E86"})],children:V?(0,c.jsx)(k.Z,{}):(0,c.jsx)("pre",{style:ue?{fontFamily:"Source Code Pro",width:375,zoom:.83}:{},children:(0,c.jsx)(I(),{children:S})})})};D.default=oe},5309:function(le,D,e){e.r(D);var E=e(25359),r=e.n(E),s=e(57213),_=e.n(s),j=e(49811),v=e.n(j),o=e(54306),B=e.n(o),O=e(63313),x=e.n(O),k=e(57179),p=e(91692),I=e(24550),c=e(59720),oe=e(38626),_e=e(96786),H=e(45277),i=e(11527),fe=k.Z.Option,G;(function(Z){Z[Z.nodejs=0]="nodejs",Z[Z.python3=1]="python3",Z[Z.linux=2]="linux"})(G||(G={}));var F=function(z){var S=z.dependence,J=z.handleCancel,re=z.visible,Y=z.defaultType,ie=p.Z.useForm(),L=B()(ie,1),X=L[0],T=(0,O.useState)(!1),ue=B()(T,2),ve=ue[0],w=ue[1],de=function(){var V=v()(r()().mark(function M(n){var W,q,h,N,ee,$,u,C,K,se;return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return w(!0),W=n.name,q=n.split,h=n.type,N=n.remark,ee=S?"put":"post",S?$=_()(_()({},n),{},{id:S.id}):q==="1"?(u=W.includes("&")?"&":`
`,$=W.split(u).map(function(A){return{name:A,type:h,remark:N}})):$=[{name:W,type:h,remark:N}],P.prev=4,P.next=7,_e.W[ee]("".concat(H.Z.apiPrefix,"dependencies"),{data:$});case 7:C=P.sent,K=C.code,se=C.data,K===200&&J(se),w(!1),P.next=17;break;case 14:P.prev=14,P.t0=P.catch(4),w(!1);case 17:case"end":return P.stop()}},M,null,[[4,14]])}));return function(n){return V.apply(this,arguments)}}();return(0,O.useEffect)(function(){X.resetFields()},[S,re]),(0,i.jsx)(I.Z,{title:S?"\u7F16\u8F91\u4F9D\u8D56":"\u65B0\u5EFA\u4F9D\u8D56",open:re,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){X.validateFields().then(function(M){de(M)}).catch(function(M){console.log("Validate Failed:",M)})},onCancel:function(){return J()},confirmLoading:ve,children:(0,i.jsxs)(p.Z,{form:X,layout:"vertical",name:"dependence_modal",initialValues:S,children:[(0,i.jsx)(p.Z.Item,{name:"type",label:"\u4F9D\u8D56\u7C7B\u578B",initialValue:G[Y],children:(0,i.jsx)(k.Z,{children:H.Z.dependenceTypes.map(function(V,M){return(0,i.jsx)(fe,{value:M,children:V},M)})})}),!S&&(0,i.jsx)(p.Z.Item,{name:"split",label:"\u81EA\u52A8\u62C6\u5206",initialValue:"0",tooltip:"\u591A\u4E2A\u4F9D\u8D56\u662F\u5426\u6362\u884C\u5206\u5272",children:(0,i.jsxs)(c.ZP.Group,{children:[(0,i.jsx)(c.ZP,{value:"1",children:"\u662F"}),(0,i.jsx)(c.ZP,{value:"0",children:"\u5426"})]})}),(0,i.jsx)(p.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0",whitespace:!0}],children:(0,i.jsx)(oe.Z.TextArea,{rows:4,autoSize:!0,placeholder:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0"})}),(0,i.jsx)(p.Z.Item,{name:"remark",label:"\u5907\u6CE8",children:(0,i.jsx)(oe.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})})};D.default=F}}]);
