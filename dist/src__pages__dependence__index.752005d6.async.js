"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9914],{20209:function(ae,D,e){e.d(D,{Z:function(){return l}});var p=e(14797),i=e(63313),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},m=f,Z=e(46420),s=function(C,M){return i.createElement(Z.Z,(0,p.Z)((0,p.Z)({},C),{},{ref:M,icon:m}))};s.displayName="ClockCircleOutlined";var l=i.forwardRef(s)},13740:function(ae,D,e){e.d(D,{Z:function(){return l}});var p=e(14797),i=e(63313),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},m=f,Z=e(46420),s=function(C,M){return i.createElement(Z.Z,(0,p.Z)((0,p.Z)({},C),{},{ref:M,icon:m}))};s.displayName="DeleteOutlined";var l=i.forwardRef(s)},97674:function(ae,D,e){e.d(D,{Z:function(){return l}});var p=e(14797),i=e(63313),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},m=f,Z=e(46420),s=function(C,M){return i.createElement(Z.Z,(0,p.Z)((0,p.Z)({},C),{},{ref:M,icon:m}))};s.displayName="FileTextOutlined";var l=i.forwardRef(s)},535:function(ae,D,e){var p=e(54306),i=e.n(p),f=e(63313),m=e.n(f),Z=e(61761),s=e(60001);D.Z=function(l,A){var C=(0,f.useState)(0),M=i()(C,2),k=M[0],E=M[1];return(0,Z.Z)(l,function(L){var v=L.target;v.classList.contains("ant-table-wrapper")||(v=L.target.querySelector(".ant-table-wrapper")),E((0,s.W9)({extraHeight:A,target:v}))}),k}},54141:function(ae,D,e){e.r(D),e.d(D,{default:function(){return S}});var p=e(93525),i=e.n(p),f=e(54306),m=e.n(f),Z=e(57213),s=e.n(Z),l=e(63313),A=e(92260),C=e(22159),M=e(2947),k=e(51704),E=e(15367),L=e(84163),v=e(24378),le=e(86986),Ee=e(60986),y=e(14797),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},he=u,H=e(46420),b=function(F,K){return l.createElement(H.Z,(0,y.Z)((0,y.Z)({},F),{},{ref:K,icon:he}))};b.displayName="SyncOutlined";var I=l.forwardRef(b),z=e(38101),B=e(76657),Y=e(20209),oe=e(97674),ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"},re=ie,Q=function(F,K){return l.createElement(H.Z,(0,y.Z)((0,y.Z)({},F),{},{ref:K,icon:re}))};Q.displayName="BugOutlined";var X=l.forwardRef(Q),ue=e(13740),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},ge=ce,N=function(F,K){return l.createElement(H.Z,(0,y.Z)((0,y.Z)({},F),{},{ref:K,icon:ge}))};N.displayName="DeleteFilled";var se=l.forwardRef(N),P=e(90717),j=e(38612),O=e(35911),V=e(91756),w=e(70011),$=e(66255),q=e(5509),ee=e(40440),G=e(535),n=e(11527),W=A.Z.Text,de=C.Z.Search,g;(function(o){o[o.\u5B89\u88C5\u4E2D=0]="\u5B89\u88C5\u4E2D",o[o.\u5DF2\u5B89\u88C5=1]="\u5DF2\u5B89\u88C5",o[o.\u5B89\u88C5\u5931\u8D25=2]="\u5B89\u88C5\u5931\u8D25",o[o.\u5220\u9664\u4E2D=3]="\u5220\u9664\u4E2D",o[o.\u5DF2\u5220\u9664=4]="\u5DF2\u5220\u9664",o[o.\u5220\u9664\u5931\u8D25=5]="\u5220\u9664\u5931\u8D25",o[o.\u961F\u5217\u4E2D=6]="\u961F\u5217\u4E2D"})(g||(g={}));var De;(function(o){o[o.processing=0]="processing",o[o.success=1]="success",o[o.error=2]="error"})(De||(De={}));var x={0:{icon:(0,n.jsx)(I,{spin:!0}),color:"processing"},1:{icon:(0,n.jsx)(z.Z,{}),color:"success"},2:{icon:(0,n.jsx)(B.Z,{}),color:"error"},3:{icon:(0,n.jsx)(I,{spin:!0}),color:"processing"},4:{icon:(0,n.jsx)(z.Z,{}),color:"success"},5:{icon:(0,n.jsx)(B.Z,{}),color:"error"},6:{icon:(0,n.jsx)(Y.Z,{}),color:"default"}},T=function(){var F=(0,ee.useOutletContext)(),K=F.headerStyle,$e=F.isPhone,fe=F.socketMessage,Ge=[{title:"\u5E8F\u53F7",width:50,render:function(t,a,r){return(0,n.jsxs)("span",{style:{cursor:"text"},children:[r+1," "]})}},{title:"\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(t,a,r){return(0,n.jsx)(M.Z,{size:"middle",style:{cursor:"text"},children:(0,n.jsx)(k.Z,{color:x[a.status].color,icon:x[a.status].icon,style:{marginRight:0},children:g[a.status]})})}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"timestamp",dataIndex:"timestamp",render:function(t,a){var r=navigator.language||navigator.languages[0],c=a.createdAt||a.timestamp,_=new Date(c).toLocaleString(r,{hour12:!1}).replace(" 24:"," 00:");return(0,n.jsx)(E.Z,{placement:"topLeft",title:_,trigger:["hover","click"],children:(0,n.jsx)("span",{children:_})})}},{title:"\u64CD\u4F5C",key:"action",render:function(t,a,r){var c=!$e;return(0,n.jsxs)(M.Z,{size:"middle",children:[(0,n.jsx)(E.Z,{title:c?"\u65E5\u5FD7":"",children:(0,n.jsx)("a",{onClick:function(){ln(s()(s()({},a),{},{timestamp:Date.now()}))},children:(0,n.jsx)(oe.Z,{})})}),a.status!==g.\u5B89\u88C5\u4E2D&&a.status!==g.\u5220\u9664\u4E2D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{title:c?"\u91CD\u65B0\u5B89\u88C5":"",children:(0,n.jsx)("a",{onClick:function(){return fn(a,r)},children:(0,n.jsx)(X,{})})}),(0,n.jsx)(E.Z,{title:c?"\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return He(a,r)},children:(0,n.jsx)(ue.Z,{})})}),(0,n.jsx)(E.Z,{title:c?"\u5F3A\u5236\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return He(a,r,!0)},children:(0,n.jsx)(se,{})})})]})]})}}],Je=(0,l.useState)([]),Ze=m()(Je,2),h=Ze[0],J=Ze[1],Ye=(0,l.useState)(!0),Be=m()(Ye,2),Se=Be[0],Me=Be[1],Qe=(0,l.useState)(!1),Ae=m()(Qe,2),Xe=Ae[0],ye=Ae[1],we=(0,l.useState)(),Ie=m()(we,2),qe=Ie[0],Te=Ie[1],en=(0,l.useState)([]),Fe=m()(en,2),ne=Fe[0],Ce=Fe[1],nn=(0,l.useState)(""),Re=m()(nn,2),Le=Re[0],tn=Re[1],an=(0,l.useState)(),We=m()(an,2),te=We[0],ln=We[1],on=(0,l.useState)(!1),Ke=m()(on,2),rn=Ke[0],Ue=Ke[1],un=(0,l.useState)("nodejs"),be=m()(un,2),Pe=be[0],cn=be[1],ze=(0,l.useRef)(),sn=(0,G.Z)(ze,59),je=function(){Me(!0),O.W.get("".concat(P.Z.apiPrefix,"dependencies?searchValue=").concat(Le,"&type=").concat(Pe)).then(function(t){var a=t.code,r=t.data;a===200&&J(r)}).finally(function(){return Me(!1)})},dn=function(){Te(null),ye(!0)},On=function(t,a){Te(t),ye(!0)},He=function(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;L.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u5220\u9664\u4F9D\u8D56"," ",(0,n.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){O.W.delete("".concat(P.Z.apiPrefix,"dependencies").concat(r?"/force":""),{data:[t.id]}).then(function(_){var R=_.code,ve=_.data;if(R===200&&r){var Oe=h.findIndex(function(_e){return _e.id===ve[0].id});if(Oe!==-1){var me=i()(h);me.splice(Oe,1),J(me)}}})},onCancel:function(){console.log("Cancel")}})},fn=function(t,a){L.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5"," ",(0,n.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){O.W.put("".concat(P.Z.apiPrefix,"dependencies/reinstall"),{data:[t.id]}).then(function(c){var _=c.code,R=c.data;_===200&&Ve(R[0])})},onCancel:function(){console.log("Cancel")}})},vn=function(t){ye(!1),t&&Ve(t)},Ve=function(t){var a=i()(h);if(Array.isArray(t))a.push.apply(a,i()(t));else{var r=h.findIndex(function(c){return c.id===t.id});r!==-1&&a.splice(r,1,s()({},t))}J(a)},mn=function(t){Ce(t)},_n={selectedRowKeys:ne,onChange:mn},ke=function(t){var a=t?"/force":"";L.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){O.W.delete("".concat(P.Z.apiPrefix,"dependencies").concat(a),{data:ne}).then(function(c){var _=c.code,R=c.data;_===200&&(Ce([]),je())})},onCancel:function(){console.log("Cancel")}})},hn=function(){L.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){O.W.put("".concat(P.Z.apiPrefix,"dependencies/reinstall"),{data:ne}).then(function(a){var r=a.code,c=a.data;r===200&&(Ce([]),je())})},onCancel:function(){console.log("Cancel")}})},gn=function(t){O.W.get("".concat(P.Z.apiPrefix,"dependencies/").concat(t.id)).then(function(a){var r=a.code,c=a.data;if(r===200){var _=h.findIndex(function(ve){return ve.id===t.id}),R=i()(h);_!==-1&&(R.splice(_,1,s()(s()({},t),c)),J(R))}}).finally(function(){return Me(!1)})},Dn=function(t){tn(t.trim())};(0,l.useEffect)(function(){je()},[Le,Pe]),(0,l.useEffect)(function(){te&&(localStorage.setItem("logDependence",te.id),Ue(!0))},[te]),(0,l.useEffect)(function(){if(fe){var d=fe.type,t=fe.message,a=fe.references;if(d==="installDependence"&&t.includes("\u5F00\u59CB\u65F6\u95F4")&&a.length>0){for(var r=i()(h),c=function(pe){var U=h.findIndex(function(xe){return xe.id===a[pe]});U!==-1&&r.splice(U,1,s()(s()({},h[U]),{},{status:t.includes("\u5B89\u88C5")?g.\u5B89\u88C5\u4E2D:g.\u5220\u9664\u4E2D}))},_=0;_<a.length;_++)c(_);J(r)}if(d==="installDependence"&&t.includes("\u7ED3\u675F\u65F6\u95F4")&&a.length>0){var R;t.includes("\u5B89\u88C5")?R=t.includes("\u6210\u529F")?g.\u5DF2\u5B89\u88C5:g.\u5B89\u88C5\u5931\u8D25:R=t.includes("\u6210\u529F")?g.\u5DF2\u5220\u9664:g.\u5220\u9664\u5931\u8D25;for(var ve=i()(h),Oe=function(pe){var U=h.findIndex(function(xe){return xe.id===a[pe]});U!==-1&&ve.splice(U,1,s()(s()({},h[U]),{},{status:R}))},me=0;me<a.length;me++)Oe(me);J(ve),R===g.\u5DF2\u5220\u9664&&setTimeout(function(){for(var _e=i()(h),pe=function(En){var Ne=h.findIndex(function(Cn){return Cn.id===a[En]});Ne!==-1&&_e.splice(Ne,1)},U=0;U<a.length;U++)pe(U);J(_e)},5e3)}}},[fe]);var pn=function(t){Ce([]),cn(t)};return(0,n.jsxs)(j.ZP,{className:"ql-container-wrapper dependence-wrapper ql-container-wrapper-has-tab",title:"\u4F9D\u8D56\u7BA1\u7406",extra:[(0,n.jsx)(de,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",style:{width:"auto"},enterButton:!0,loading:Se,onSearch:Dn}),(0,n.jsx)(v.Z,{type:"primary",onClick:function(){return dn()},children:"\u65B0\u5EFA\u4F9D\u8D56"},"2")],header:{style:K},children:[(0,n.jsx)(le.Z,{defaultActiveKey:"nodejs",size:"small",tabPosition:"top",onChange:pn,items:[{key:"nodejs",label:"NodeJs"},{key:"python3",label:"Python3"},{key:"linux",label:"Linux"}]}),(0,n.jsxs)("div",{ref:ze,children:[ne.length>0&&(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)(v.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return hn()},children:"\u6279\u91CF\u5B89\u88C5"}),(0,n.jsx)(v.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return ke(!1)},children:"\u6279\u91CF\u5220\u9664"}),(0,n.jsx)(v.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return ke(!0)},children:"\u6279\u91CF\u5F3A\u5236\u5220\u9664"}),(0,n.jsxs)("span",{style:{marginLeft:8},children:["\u5DF2\u9009\u62E9",(0,n.jsx)("a",{children:ne==null?void 0:ne.length}),"\u9879"]})]}),(0,n.jsx)(w.W,{backend:$.PD,children:(0,n.jsx)(Ee.Z,{columns:Ge,rowSelection:_n,pagination:!1,dataSource:h,rowKey:"id",size:"middle",scroll:{x:768,y:sn},loading:Se})})]}),(0,n.jsx)(V.default,{visible:Xe,handleCancel:vn,dependence:qe,defaultType:Pe}),(0,n.jsx)(q.default,{visible:rn,handleCancel:function(t){if(Ue(!1),t){var a=h.findIndex(function(c){return c.id===te.id}),r=i()(h);a!==-1&&(r.splice(a,1),J(r))}else i()(h).map(function(c){return c.id}).includes(te.id)&&gn(te)},socketMessage:fe,dependence:te})]})},S=T},5509:function(ae,D,e){e.r(D);var p=e(54306),i=e.n(p),f=e(63313),m=e.n(f),Z=e(84163),s=e(24378),l=e(35911),A=e(90717),C=e(65601),M=e(38101),k=e(55974),E=e(99120),L=e.n(E),v=e(11527),le=function(y){var u=y.dependence,he=y.handleCancel,H=y.visible,b=y.socketMessage,I=(0,f.useState)(""),z=i()(I,2),B=z[0],Y=z[1],oe=(0,f.useState)(!0),ie=i()(oe,2),re=ie[0],Q=ie[1],X=(0,f.useState)(!1),ue=i()(X,2),ce=ue[0],ge=ue[1],N=(0,f.useState)(!0),se=i()(N,2),P=se[0],j=se[1],O=(0,f.useState)(!1),V=i()(O,2),w=V[0],$=V[1],q=(0,f.useState)(!1),ee=i()(q,2),G=ee[0],n=ee[1],W=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;localStorage.removeItem("logDependence"),he(S)},de=function(){return(0,v.jsxs)(v.Fragment,{children:[re&&(0,v.jsx)(C.Z,{spin:!0}),!re&&(0,v.jsx)(M.Z,{}),(0,v.jsxs)("span",{style:{marginLeft:5},children:["\u65E5\u5FD7 - ",u&&u.name]})," "]})},g=function(){j(!0),l.W.get("".concat(A.Z.apiPrefix,"dependencies/").concat(u.id)).then(function(S){var o=S.code,F=S.data;if(o===200&&localStorage.getItem("logDependence")===String(u.id)){var K=(F.log||[]).join("");Y(K),Q(!K.includes("\u7ED3\u675F\u65F6\u95F4")),$(K.includes("\u5220\u9664\u5931\u8D25"))}}).finally(function(){j(!1)})},De=function(){n(!0),l.W.delete("".concat(A.Z.apiPrefix,"dependencies/force"),{data:[u.id]}).then(function(S){var o=S.code,F=S.data;o===200&&W(!0)}).finally(function(){n(!1)})},x=function(){w?De():W()};return(0,f.useEffect)(function(){u&&g()},[u]),(0,f.useEffect)(function(){if(!(!b||!u)){var T=b.type,S=b.message,o=b.references;T==="installDependence"&&o.length>0&&o.includes(u.id)&&(S.includes("\u7ED3\u675F\u65F6\u95F4")&&(Q(!1),$(S.includes("\u5220\u9664\u5931\u8D25"))),Y("".concat(B).concat(S)))}},[b]),(0,f.useEffect)(function(){ge(document.body.clientWidth<768)},[]),(0,v.jsx)(Z.Z,{title:de(),open:H,centered:!0,className:"log-modal",bodyStyle:{overflowY:"auto",maxHeight:"calc(70vh - var(--vh-offset, 0px))",minHeight:"300px"},forceRender:!0,onOk:function(){return W()},onCancel:function(){return W()},footer:[(0,v.jsx)(s.Z,{type:"primary",onClick:x,loading:G,children:w?"\u5F3A\u5236\u5220\u9664":"\u77E5\u9053\u4E86"})],children:P?(0,v.jsx)(k.Z,{}):(0,v.jsx)("pre",{style:ce?{fontFamily:"Source Code Pro",width:375,zoom:.83}:{},children:(0,v.jsx)(L(),{children:B})})})};D.default=le},91756:function(ae,D,e){e.r(D);var p=e(25359),i=e.n(p),f=e(57213),m=e.n(f),Z=e(49811),s=e.n(Z),l=e(54306),A=e.n(l),C=e(63313),M=e.n(C),k=e(28756),E=e(67393),L=e(84163),v=e(84468),le=e(22159),Ee=e(35911),y=e(90717),u=e(11527),he=k.Z.Option,H;(function(I){I[I.nodejs=0]="nodejs",I[I.python3=1]="python3",I[I.linux=2]="linux"})(H||(H={}));var b=function(z){var B=z.dependence,Y=z.handleCancel,oe=z.visible,ie=z.defaultType,re=E.Z.useForm(),Q=A()(re,1),X=Q[0],ue=(0,C.useState)(!1),ce=A()(ue,2),ge=ce[0],N=ce[1],se=function(){var P=s()(i()().mark(function j(O){var V,w,$,q,ee,G,n,W,de,g;return i()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return N(!0),V=O.name,w=O.split,$=O.type,q=O.remark,ee=B?"put":"post",B?G=m()(m()({},O),{},{id:B.id}):w==="1"?(n=V.includes("&")?"&":`
`,G=V.split(n).map(function(T){return{name:T,type:$,remark:q}})):G=[{name:V,type:$,remark:q}],x.prev=4,x.next=7,Ee.W[ee]("".concat(y.Z.apiPrefix,"dependencies"),{data:G});case 7:W=x.sent,de=W.code,g=W.data,de===200&&Y(g),N(!1),x.next=17;break;case 14:x.prev=14,x.t0=x.catch(4),N(!1);case 17:case"end":return x.stop()}},j,null,[[4,14]])}));return function(O){return P.apply(this,arguments)}}();return(0,C.useEffect)(function(){X.resetFields()},[B,oe]),(0,u.jsx)(L.Z,{title:B?"\u7F16\u8F91\u4F9D\u8D56":"\u65B0\u5EFA\u4F9D\u8D56",open:oe,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){X.validateFields().then(function(j){se(j)}).catch(function(j){console.log("Validate Failed:",j)})},onCancel:function(){return Y()},confirmLoading:ge,children:(0,u.jsxs)(E.Z,{form:X,layout:"vertical",name:"dependence_modal",initialValues:B,children:[(0,u.jsx)(E.Z.Item,{name:"type",label:"\u4F9D\u8D56\u7C7B\u578B",initialValue:H[ie],children:(0,u.jsx)(k.Z,{children:y.Z.dependenceTypes.map(function(P,j){return(0,u.jsx)(he,{value:j,children:P},j)})})}),!B&&(0,u.jsx)(E.Z.Item,{name:"split",label:"\u81EA\u52A8\u62C6\u5206",initialValue:"0",tooltip:"\u591A\u4E2A\u4F9D\u8D56\u662F\u5426\u6362\u884C\u5206\u5272",children:(0,u.jsxs)(v.ZP.Group,{children:[(0,u.jsx)(v.ZP,{value:"1",children:"\u662F"}),(0,u.jsx)(v.ZP,{value:"0",children:"\u5426"})]})}),(0,u.jsx)(E.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0",whitespace:!0}],children:(0,u.jsx)(le.Z.TextArea,{rows:4,autoSize:!0,placeholder:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0"})}),(0,u.jsx)(E.Z.Item,{name:"remark",label:"\u5907\u6CE8",children:(0,u.jsx)(le.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})})};D.default=b}}]);
