"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9914],{39449:function(ve,S,e){e.d(S,{Z:function(){return o}});var E=e(46153),c=e(63313),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},x=D,N=e(17980),C=function(B,b){return c.createElement(N.Z,(0,E.Z)((0,E.Z)({},B),{},{ref:b,icon:x}))};C.displayName="DeleteOutlined";var o=c.forwardRef(C)},67020:function(ve,S,e){e.d(S,{Z:function(){return o}});var E=e(46153),c=e(63313),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},x=D,N=e(17980),C=function(B,b){return c.createElement(N.Z,(0,E.Z)((0,E.Z)({},B),{},{ref:b,icon:x}))};C.displayName="FileTextOutlined";var o=c.forwardRef(C)},7651:function(ve,S,e){e.d(S,{Z:function(){return o}});var E=e(46153),c=e(63313),D={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"}}]},name:"loading-3-quarters",theme:"outlined"},x=D,N=e(17980),C=function(B,b){return c.createElement(N.Z,(0,E.Z)((0,E.Z)({},B),{},{ref:b,icon:x}))};C.displayName="Loading3QuartersOutlined";var o=c.forwardRef(C)},37374:function(ve,S,e){e.r(S),e.d(S,{default:function(){return ae}});var E=e(94434),c=e.n(E),D=e(46686),x=e.n(D),N=e(30279),C=e.n(N),o=e(63313),m=e(95581),B=e(62021),b=e(95326),oe=e(37907),I=e(79697),q=e(4675),O=e(45073),ie=e(39769),me=e(46246),W=e(46153),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"},ce=d,ee=e(17980),u=function(h,Q){return o.createElement(ee.Z,(0,W.Z)((0,W.Z)({},h),{},{ref:Q,icon:ce}))};u.displayName="BugOutlined";var r=o.forwardRef(u),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},a=g,f=function(h,Q){return o.createElement(ee.Z,(0,W.Z)((0,W.Z)({},h),{},{ref:Q,icon:a}))};f.displayName="DeleteFilled";var G=o.forwardRef(f),z=e(67020),F=e(39449),A=e(79974),j=e(52991),M=e(7515),Y=e(80422),k=e(7749),J=e(66255),L=e(31981),K=e(37009),R=e(61895),n=e(11527),V=m.Z.Text,ne=B.Z.Search,y;(function(s){s[s.\u5B89\u88C5\u4E2D=0]="\u5B89\u88C5\u4E2D",s[s.\u5DF2\u5B89\u88C5=1]="\u5DF2\u5B89\u88C5",s[s.\u5B89\u88C5\u5931\u8D25=2]="\u5B89\u88C5\u5931\u8D25",s[s.\u5220\u9664\u4E2D=3]="\u5220\u9664\u4E2D",s[s.\u5DF2\u5220\u9664=4]="\u5DF2\u5220\u9664",s[s.\u5220\u9664\u5931\u8D25=5]="\u5220\u9664\u5931\u8D25"})(y||(y={}));var $;(function(s){s[s.processing=0]="processing",s[s.success=1]="success",s[s.error=2]="error"})($||($={}));var te=function(){var h=(0,R.bx)(),Q=h.headerStyle,re=h.isPhone,X=h.socketMessage,T=[{title:"\u5E8F\u53F7",align:"center",width:50,render:function(t,l,i){return(0,n.jsxs)("span",{style:{cursor:"text"},children:[i+1," "]})}},{title:"\u540D\u79F0",dataIndex:"name",key:"name",align:"center"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",align:"center",render:function(t,l,i){return(0,n.jsx)(b.Z,{size:"middle",style:{cursor:"text"},children:(0,n.jsx)(oe.Z,{color:$[l.status%3],style:{marginRight:0},children:y[l.status]})})}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"timestamp",dataIndex:"timestamp",align:"center",render:function(t,l){var i=navigator.language||navigator.languages[0],v=l.createdAt||l.timestamp,P=new Date(v).toLocaleString(i,{hour12:!1}).replace(" 24:"," 00:");return(0,n.jsx)(I.Z,{placement:"topLeft",title:P,trigger:["hover","click"],children:(0,n.jsx)("span",{children:P})})}},{title:"\u64CD\u4F5C",key:"action",align:"center",render:function(t,l,i){var v=!re;return(0,n.jsxs)(b.Z,{size:"middle",children:[(0,n.jsx)(I.Z,{title:v?"\u65E5\u5FD7":"",children:(0,n.jsx)("a",{onClick:function(){we(C()(C()({},l),{},{timestamp:Date.now()}))},children:(0,n.jsx)(z.Z,{})})}),l.status!==y.\u5B89\u88C5\u4E2D&&l.status!==y.\u5220\u9664\u4E2D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.Z,{title:v?"\u91CD\u65B0\u5B89\u88C5":"",children:(0,n.jsx)("a",{onClick:function(){return ln(l,i)},children:(0,n.jsx)(r,{})})}),(0,n.jsx)(I.Z,{title:v?"\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return We(l,i)},children:(0,n.jsx)(F.Z,{})})}),(0,n.jsx)(I.Z,{title:v?"\u5F3A\u5236\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return We(l,i,!0)},children:(0,n.jsx)(G,{})})})]})]})}}],U=(0,o.useState)([]),Z=x()(U,2),p=Z[0],H=Z[1],se=(0,o.useState)(!0),ge=x()(se,2),Pe=ge[0],Ce=ge[1],He=(0,o.useState)(!1),je=x()(He,2),ze=je[0],De=je[1],ke=(0,o.useState)(),Me=x()(ke,2),Ve=Me[0],Ze=Me[1],$e=(0,o.useState)([]),Se=x()($e,2),ue=Se[0],xe=Se[1],Qe=(0,o.useState)(""),Be=x()(Qe,2),Ie=Be[0],Ge=Be[1],Ye=(0,o.useState)(),Re=x()(Ye,2),Je=Re[0],Te=Re[1],Xe=(0,o.useState)(),Fe=x()(Xe,2),de=Fe[0],we=Fe[1],qe=(0,o.useState)(!1),Ae=x()(qe,2),en=Ae[0],Le=Ae[1],nn=(0,o.useState)("nodejs"),be=x()(nn,2),Ee=be[0],tn=be[1],Oe=(0,o.useRef)(),_e=function(){Ce(!0),M.W.get("".concat(A.Z.apiPrefix,"dependencies?searchValue=").concat(Ie,"&type=").concat(Ee)).then(function(t){var l=t.code,i=t.data;l===200&&H(i)}).finally(function(){return Ce(!1)})},an=function(){Ze(null),De(!0)},gn=function(t,l){Ze(t),De(!0)},We=function(t,l){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u5220\u9664\u4F9D\u8D56"," ",(0,n.jsx)(V,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){M.W.delete("".concat(A.Z.apiPrefix,"dependencies").concat(i?"/force":""),{data:[t.id]}).then(function(P){var w=P.code,fe=P.data;if(w===200&&i){var he=p.findIndex(function(pe){return pe.id===fe.data[0].id});if(he!==-1){var le=c()(p);le.splice(he,1),H(le)}}})},onCancel:function(){console.log("Cancel")}})},ln=function(t,l){q.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5"," ",(0,n.jsx)(V,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){M.W.put("".concat(A.Z.apiPrefix,"dependencies/reinstall"),{data:[t.id]}).then(function(v){var P=v.code,w=v.data;P===200&&Ke(w[0])})},onCancel:function(){console.log("Cancel")}})},rn=function(t){De(!1),t&&Ke(t)},Ke=function(t){var l=c()(p);if(Array.isArray(t))l.push.apply(l,c()(t));else{var i=p.findIndex(function(v){return v.id===t.id});i!==-1&&l.splice(i,1,C()({},t))}H(l)},on=function(t){xe(t),setTimeout(function(){(ue.length===0||t.length===0)&&Te((0,L.W9)({extraHeight:87}))})},cn={selectedRowIds:ue,onChange:on},Ue=function(t){var l=t?"/force":"";q.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){M.W.delete("".concat(A.Z.apiPrefix,"dependencies").concat(l),{data:ue}).then(function(v){var P=v.code,w=v.data;P===200&&(xe([]),_e())})},onCancel:function(){console.log("Cancel")}})},sn=function(){q.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){M.W.put("".concat(A.Z.apiPrefix,"dependencies/reinstall"),{data:ue}).then(function(l){var i=l.code,v=l.data;i===200&&(xe([]),_e())})},onCancel:function(){console.log("Cancel")}})},un=function(t){M.W.get("".concat(A.Z.apiPrefix,"dependencies/").concat(t.id)).then(function(l){var i=l.code,v=l.data;if(i===200){var P=p.findIndex(function(fe){return fe.id===t.id}),w=c()(p);P!==-1&&(w.splice(P,1,C()(C()({},t),v)),H(w))}}).finally(function(){return Ce(!1)})},dn=function(t){Ge(t.trim())};(0,o.useEffect)(function(){_e()},[Ie,Ee]),(0,o.useEffect)(function(){Oe.current&&Te((0,L.W9)({extraHeight:87}))},[Oe.current]),(0,o.useEffect)(function(){de&&(localStorage.setItem("logDependence",de.id),Le(!0))},[de]),(0,o.useEffect)(function(){if(!!X){var _=X.type,t=X.message,l=X.references;if(_==="installDependence"&&t.includes("\u7ED3\u675F\u65F6\u95F4")&&l.length>0){var i;t.includes("\u5B89\u88C5")?i=t.includes("\u6210\u529F")?y.\u5DF2\u5B89\u88C5:y.\u5B89\u88C5\u5931\u8D25:i=t.includes("\u6210\u529F")?y.\u5DF2\u5220\u9664:y.\u5220\u9664\u5931\u8D25;for(var v=c()(p),P=function(he){var le=p.findIndex(function(pe){return pe.id===l[he]});le!==-1&&v.splice(le,1,C()(C()({},p[le]),{},{status:i}))},w=0;w<l.length;w++)P(w);H(v),i===y.\u5DF2\u5220\u9664&&setTimeout(function(){for(var fe=c()(p),he=function(vn){var Ne=p.findIndex(function(mn){return mn.id===l[vn]});Ne!==-1&&fe.splice(Ne,1)},le=0;le<l.length;le++)he(le);H(fe)},5e3)}}},[X]);var ye=function(){return(0,n.jsxs)(n.Fragment,{children:[ue.length>0&&(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)(O.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return sn()},children:"\u6279\u91CF\u5B89\u88C5"}),(0,n.jsx)(O.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return Ue(!1)},children:"\u6279\u91CF\u5220\u9664"}),(0,n.jsx)(O.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return Ue(!0)},children:"\u6279\u91CF\u5F3A\u5236\u5220\u9664"}),(0,n.jsxs)("span",{style:{marginLeft:8},children:["\u5DF2\u9009\u62E9",(0,n.jsx)("a",{children:ue==null?void 0:ue.length}),"\u9879"]})]}),(0,n.jsx)(k.W,{backend:J.PD,children:(0,n.jsx)(ie.Z,{ref:Oe,columns:T,rowSelection:cn,pagination:!1,dataSource:p,rowKey:"id",size:"middle",scroll:{x:768,y:Je},loading:Pe})})]})},fn=function(t){tn(t)};return(0,n.jsxs)(j.ZP,{className:"ql-container-wrapper dependence-wrapper ql-container-wrapper-has-tab",title:"\u4F9D\u8D56\u7BA1\u7406",extra:[(0,n.jsx)(ne,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",style:{width:"auto"},enterButton:!0,loading:Pe,onSearch:dn}),(0,n.jsx)(O.Z,{type:"primary",onClick:function(){return an()},children:"\u65B0\u5EFA\u4F9D\u8D56"},"2")],header:{style:Q},children:[(0,n.jsx)(me.Z,{defaultActiveKey:"nodejs",size:"small",tabPosition:"top",onChange:fn,items:[{key:"nodejs",label:"NodeJs",children:ye()},{key:"python3",label:"Python3",children:ye()},{key:"linux",label:"Linux",children:ye()}]}),(0,n.jsx)(Y.default,{visible:ze,handleCancel:rn,dependence:Ve,defaultType:Ee}),(0,n.jsx)(K.default,{visible:en,handleCancel:function(t){if(Le(!1),t){var l=p.findIndex(function(v){return v.id===de.id}),i=c()(p);l!==-1&&(i.splice(l,1),H(i))}else c()(p).map(function(v){return v.id}).includes(de.id)&&un(de)},socketMessage:X,dependence:de})]})},ae=te},37009:function(ve,S,e){e.r(S);var E=e(46686),c=e.n(E),D=e(63313),x=e.n(D),N=e(4675),C=e(45073),o=e(7515),m=e(79974),B=e(7651),b=e(96320),oe=e(88280),I=e(42881),q=e.n(I),O=e(11527),ie=function(W){var d=W.dependence,ce=W.handleCancel,ee=W.visible,u=W.socketMessage,r=(0,D.useState)(""),g=c()(r,2),a=g[0],f=g[1],G=(0,D.useState)(!0),z=c()(G,2),F=z[0],A=z[1],j=(0,D.useState)(!1),M=c()(j,2),Y=M[0],k=M[1],J=(0,D.useState)(!0),L=c()(J,2),K=L[0],R=L[1],n=(0,D.useState)(!1),V=c()(n,2),ne=V[0],y=V[1],$=(0,D.useState)(!1),te=c()($,2),ae=te[0],s=te[1],h=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;localStorage.removeItem("logDependence"),ce(Z)},Q=function(){return(0,O.jsxs)(O.Fragment,{children:[F&&(0,O.jsx)(B.Z,{spin:!0}),!F&&(0,O.jsx)(b.Z,{}),(0,O.jsxs)("span",{style:{marginLeft:5},children:["\u65E5\u5FD7 - ",d&&d.name]})," "]})},re=function(){R(!0),o.W.get("".concat(m.Z.apiPrefix,"dependencies/").concat(d.id)).then(function(Z){var p=Z.code,H=Z.data;if(p===200&&localStorage.getItem("logDependence")===String(d.id)){var se=(H.log||[]).join("");f(se),A(!se.includes("\u7ED3\u675F\u65F6\u95F4")),y(se.includes("\u5220\u9664\u5931\u8D25"))}}).finally(function(){R(!1)})},X=function(){s(!0),o.W.delete("".concat(m.Z.apiPrefix,"dependencies/force"),{data:[d.id]}).then(function(Z){var p=Z.code,H=Z.data;p===200&&h(!0)}).finally(function(){s(!1)})},T=function(){ne?X():h()};return(0,D.useEffect)(function(){d&&re()},[d]),(0,D.useEffect)(function(){if(!(!u||!d)){var U=u.type,Z=u.message,p=u.references;U==="installDependence"&&p.length>0&&p.includes(d.id)&&(Z.includes("\u7ED3\u675F\u65F6\u95F4")&&(A(!1),y(Z.includes("\u5220\u9664\u5931\u8D25"))),f("".concat(a).concat(Z)))}},[u]),(0,D.useEffect)(function(){k(document.body.clientWidth<768)},[]),(0,O.jsx)(N.Z,{title:Q(),open:ee,centered:!0,className:"log-modal",bodyStyle:{overflowY:"auto",maxHeight:"calc(70vh - var(--vh-offset, 0px))",minHeight:"300px"},forceRender:!0,onOk:function(){return h()},onCancel:function(){return h()},footer:[(0,O.jsx)(C.Z,{type:"primary",onClick:T,loading:ae,children:ne?"\u5F3A\u5236\u5220\u9664":"\u77E5\u9053\u4E86"})],children:K?(0,O.jsx)(oe.Z,{}):(0,O.jsx)("pre",{style:Y?{fontFamily:"Source Code Pro",width:375,zoom:.83}:{},children:(0,O.jsx)(q(),{children:a})})})};S.default=ie},80422:function(ve,S,e){e.r(S);var E=e(35290),c=e.n(E),D=e(30279),x=e.n(D),N=e(411),C=e.n(N),o=e(46686),m=e.n(o),B=e(63313),b=e.n(B),oe=e(83347),I=e(64664),q=e(4675),O=e(22545),ie=e(62021),me=e(7515),W=e(79974),d=e(11527),ce=oe.Z.Option,ee;(function(r){r[r.nodejs=0]="nodejs",r[r.python3=1]="python3",r[r.linux=2]="linux"})(ee||(ee={}));var u=function(g){var a=g.dependence,f=g.handleCancel,G=g.visible,z=g.defaultType,F=I.Z.useForm(),A=m()(F,1),j=A[0],M=(0,B.useState)(!1),Y=m()(M,2),k=Y[0],J=Y[1],L=function(){var K=C()(c()().mark(function R(n){var V,ne,y,$,te,ae,s,h,Q,re;return c()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return J(!0),V=n.name,ne=n.split,y=n.type,$=n.remark,te=a?"put":"post",a?ae=x()(x()({},n),{},{id:a.id}):ne==="1"?(s=V.includes("&")?"&":`
`,ae=V.split(s).map(function(U){return{name:U,type:y,remark:$}})):ae=[{name:V,type:y,remark:$}],T.prev=4,T.next=7,me.W[te]("".concat(W.Z.apiPrefix,"dependencies"),{data:ae});case 7:h=T.sent,Q=h.code,re=h.data,Q===200&&f(re),J(!1),T.next=17;break;case 14:T.prev=14,T.t0=T.catch(4),J(!1);case 17:case"end":return T.stop()}},R,null,[[4,14]])}));return function(n){return K.apply(this,arguments)}}();return(0,B.useEffect)(function(){j.resetFields()},[a,G]),(0,d.jsx)(q.Z,{title:a?"\u7F16\u8F91\u4F9D\u8D56":"\u65B0\u5EFA\u4F9D\u8D56",open:G,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){j.validateFields().then(function(R){L(R)}).catch(function(R){console.log("Validate Failed:",R)})},onCancel:function(){return f()},confirmLoading:k,children:(0,d.jsxs)(I.Z,{form:j,layout:"vertical",name:"dependence_modal",initialValues:a,children:[(0,d.jsx)(I.Z.Item,{name:"type",label:"\u4F9D\u8D56\u7C7B\u578B",initialValue:ee[z],children:(0,d.jsx)(oe.Z,{children:W.Z.dependenceTypes.map(function(K,R){return(0,d.jsx)(ce,{value:R,children:K},R)})})}),!a&&(0,d.jsx)(I.Z.Item,{name:"split",label:"\u81EA\u52A8\u62C6\u5206",initialValue:"0",tooltip:"\u591A\u4E2A\u4F9D\u8D56\u662F\u5426\u6362\u884C\u5206\u5272",children:(0,d.jsxs)(O.ZP.Group,{children:[(0,d.jsx)(O.ZP,{value:"1",children:"\u662F"}),(0,d.jsx)(O.ZP,{value:"0",children:"\u5426"})]})}),(0,d.jsx)(I.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0",whitespace:!0}],children:(0,d.jsx)(ie.Z.TextArea,{rows:4,autoSize:!0,placeholder:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0"})}),(0,d.jsx)(I.Z.Item,{name:"remark",label:"\u5907\u6CE8",children:(0,d.jsx)(ie.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})})};S.default=u},37907:function(ve,S,e){e.d(S,{Z:function(){return ee}});var E=e(39085),c=e(13965),D=e(72508),x=e(60382),N=e(84875),C=e.n(N),o=e(1334),m=e(63313),B=e(78809),b=e(1764),oe=e(14466),I=function(u,r){var g={};for(var a in u)Object.prototype.hasOwnProperty.call(u,a)&&r.indexOf(a)<0&&(g[a]=u[a]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(u);f<a.length;f++)r.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(u,a[f])&&(g[a[f]]=u[a[f]]);return g},q=function(r){var g,a=r.prefixCls,f=r.className,G=r.checked,z=r.onChange,F=r.onClick,A=I(r,["prefixCls","className","checked","onChange","onClick"]),j=m.useContext(B.E_),M=j.getPrefixCls,Y=function(K){z==null||z(!G),F==null||F(K)},k=M("tag",a),J=C()(k,(g={},(0,E.Z)(g,"".concat(k,"-checkable"),!0),(0,E.Z)(g,"".concat(k,"-checkable-checked"),G),g),f);return m.createElement("span",(0,c.Z)({},A,{className:J,onClick:Y}))},O=q,ie=function(u,r){var g={};for(var a in u)Object.prototype.hasOwnProperty.call(u,a)&&r.indexOf(a)<0&&(g[a]=u[a]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(u);f<a.length;f++)r.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(u,a[f])&&(g[a[f]]=u[a[f]]);return g},me=new RegExp("^(".concat(b.Y.join("|"),")(-inverse)?$")),W=new RegExp("^(".concat(b.E.join("|"),")$")),d=function(r,g){var a,f=r.prefixCls,G=r.className,z=r.style,F=r.children,A=r.icon,j=r.color,M=r.onClose,Y=r.closeIcon,k=r.closable,J=k===void 0?!1:k,L=ie(r,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),K=m.useContext(B.E_),R=K.getPrefixCls,n=K.direction,V=m.useState(!0),ne=(0,D.Z)(V,2),y=ne[0],$=ne[1];m.useEffect(function(){"visible"in L&&$(L.visible)},[L.visible]);var te=function(){return j?me.test(j)||W.test(j):!1},ae=(0,c.Z)({backgroundColor:j&&!te()?j:void 0},z),s=te(),h=R("tag",f),Q=C()(h,(a={},(0,E.Z)(a,"".concat(h,"-").concat(j),s),(0,E.Z)(a,"".concat(h,"-has-color"),j&&!s),(0,E.Z)(a,"".concat(h,"-hidden"),!y),(0,E.Z)(a,"".concat(h,"-rtl"),n==="rtl"),a),G),re=function(ge){ge.stopPropagation(),M==null||M(ge),!ge.defaultPrevented&&("visible"in L||$(!1))},X=function(){return J?Y?m.createElement("span",{className:"".concat(h,"-close-icon"),onClick:re},Y):m.createElement(x.Z,{className:"".concat(h,"-close-icon"),onClick:re}):null},T="onClick"in L||F&&F.type==="a",U=(0,o.Z)(L,["visible"]),Z=A||null,p=Z?m.createElement(m.Fragment,null,Z,m.createElement("span",null,F)):F,H=m.createElement("span",(0,c.Z)({},U,{ref:g,className:Q,style:ae}),p,X());return T?m.createElement(oe.Z,null,H):H},ce=m.forwardRef(d);ce.CheckableTag=O;var ee=ce}}]);
