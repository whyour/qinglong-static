(self.webpackChunk=self.webpackChunk||[]).push([[6534],{75909:function(e,t,n){"use strict";var r=n(14797),a=n(87807),i=n(67725),c=n(63313),o=n(84875),l=n.n(o),s=n(12888),u=n(57439),f=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],d=c.forwardRef((function(e,t){var n=e.className,o=e.component,d=e.viewBox,p=e.spin,h=e.rotate,m=e.tabIndex,g=e.onClick,v=e.children,y=(0,i.Z)(e,f);(0,u.Kp)(Boolean(o||v),"Should have `component` prop or `children`."),(0,u.C3)();var Z=c.useContext(s.Z),x=Z.prefixCls,j=void 0===x?"anticon":x,k=Z.rootClassName,b=l()(k,j,n),P=l()((0,a.Z)({},"".concat(j,"-spin"),!!p)),C=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,S=(0,r.Z)((0,r.Z)({},u.vD),{},{className:P,style:C,viewBox:d});d||delete S.viewBox;var w=m;return void 0===w&&g&&(w=-1),c.createElement("span",(0,r.Z)((0,r.Z)({role:"img"},y),{},{ref:t,tabIndex:w,onClick:g,className:b}),o?c.createElement(o,(0,r.Z)({},S),v):v?((0,u.Kp)(Boolean(d)||1===c.Children.count(v)&&c.isValidElement(v)&&"use"===c.Children.only(v).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),c.createElement("svg",(0,r.Z)((0,r.Z)({},S),{},{viewBox:d}),v)):null)}));d.displayName="AntdIcon",t.Z=d},55258:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(14797),a=n(67725),i=n(63313),c=n(75909),o=["type","children"],l=new Set;function s(e){return Boolean("string"==typeof e&&e.length&&!l.has(e))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];if(s(n)){var r=document.createElement("script");r.setAttribute("src",n),r.setAttribute("data-namespace",n),e.length>t+1&&(r.onload=function(){u(e,t+1)},r.onerror=function(){u(e,t+1)}),l.add(n),document.body.appendChild(r)}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scriptUrl,n=e.extraCommonProps,l=void 0===n?{}:n;t&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(t)?u(t.reverse()):u([t]));var s=i.forwardRef((function(e,t){var n=e.type,s=e.children,u=(0,a.Z)(e,o),f=null;return e.type&&(f=i.createElement("use",{xlinkHref:"#".concat(n)})),s&&(f=s),i.createElement(c.Z,(0,r.Z)((0,r.Z)((0,r.Z)({},l),u),{},{ref:t}),f)}));return s.displayName="Iconfont",s}},86755:function(e,t,n){"use strict";var r=(0,n(55258).Z)({scriptUrl:["//at.alicdn.com/t/c/font_3354854_ob5y15ewlyq.js"]});t.Z=r},38102:function(e,t,n){"use strict";var r=n(57213),a=n.n(r),i=n(63313);t.Z=function(e,t,n){var r=n.treeNodeFilterProp;return(0,i.useMemo)((function(){var n=[];if(!t)return{treeData:e,keys:n};var i=t.toUpperCase();function c(e,t){var n=t[r];return String(n).toUpperCase().includes(i)}return{treeData:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.map((function(t){var i=t.children,o=r||c(0,t),l=e(i||[],o);return o||l.length?(l.length&&n.push(t.key),a()(a()({},t),{},{children:l})):null})).filter((function(e){return e}))}(e),keys:n}}),[e,t,r])}},30675:function(e,t,n){"use strict";n.r(t);var r=n(57213),a=n.n(r),i=n(54306),c=n.n(i),o=n(88265),l=n(63313),s=n(28756),u=n(60858),f=n(75310),d=n(24378),p=n(95176),h=n(5558),m=n(36035),g=n(82755),v=n(10726),y=n(77385),Z=n(62753),x=n(82428),j=n(11527),k=s.Z.Option;t.default=function(e){var t=e.treeData,n=e.currentNode,r=e.content,i=e.handleCancel,b=e.visible,P=e.socketMessage,C=(0,l.useState)(""),S=c()(C,2),w=S[0],F=S[1],E=(0,l.useState)("javascript"),N=c()(E,2),I=N[0],O=N[1],R=(0,l.useState)(),A=c()(R,2),_=A[0],U=A[1],D=(0,l.useState)(""),M=c()(D,2),q=M[0],B=M[1],L=(0,l.useState)(!1),V=c()(L,2),$=V[0],W=V[1],T=(0,l.useState)(!1),z=c()(T,2),H=z[0],K=z[1],G=(0,l.useState)(""),Y=c()(G,2),J=Y[0],Q=Y[1],X=(0,Z.F)().theme,ee=(0,l.useRef)(null),te=(0,l.useState)(!1),ne=c()(te,2),re=ne[0],ae=ne[1],ie=(0,l.useState)(null),ce=c()(ie,2),oe=ce[0],le=ce[1],se=function(e){p.W.get("".concat(h.Z.apiPrefix,"scripts/").concat(e.title,"?path=").concat(e.parent||"")).then((function(e){var t=e.code,n=e.data;200===t&&F(n)}))},ue=function(){_&&_.title&&oe&&p.W.put("".concat(h.Z.apiPrefix,"scripts/stop"),{filename:_.title,path:_.parent||"",pid:oe}).then((function(e){var t=e.code;e.data;200===t&&ae(!1)}))};return(0,l.useEffect)((function(){if(P){var e=P.type,t=P.message;P.references;"manuallyRunScript"===e&&((0,x.x$)(t)&&setTimeout((function(){ae(!1)}),300),J&&(t="\n".concat(t)),Q("".concat(J).concat(t)))}}),[P]),(0,l.useEffect)((function(){if(Q(""),n){U(n),F(r),B(n.key);var e=(0,x.H$)(n.title);O(e)}}),[r,n]),(0,j.jsxs)(u.Z,{className:"edit-modal",closable:!1,title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f.Z,{treeExpandAction:"click",style:{marginRight:8,width:150},value:q,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:t,placeholder:o.ZP.get("请选择脚本文件"),fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:function(e,t){if(t.key!==q&&e&&"directory"!==t.type){var n=(0,x.H$)(e);U(t),O(n),se(t),B(t.key)}}}),(0,j.jsxs)(s.Z,{value:I,style:{width:110,marginRight:8},onChange:function(e){O(e)},children:[(0,j.jsx)(k,{value:"javascript",children:"javascript"}),(0,j.jsx)(k,{value:"typescript",children:"typescript"}),(0,j.jsx)(k,{value:"shell",children:"shell"}),(0,j.jsx)(k,{value:"python",children:"python"})]}),(0,j.jsx)(d.Z,{type:"primary",style:{marginRight:8},onClick:re?ue:function(){Q("");var e=ee.current.getValue().replace(/\r\n/g,"\n");p.W.put("".concat(h.Z.apiPrefix,"scripts/run"),{filename:_.title,path:_.parent||"",content:e}).then((function(e){var t=e.code,n=e.data;200===t&&(ae(!0),le(n))}))},children:re?o.ZP.get("停止"):o.ZP.get("运行")}),(0,j.jsx)(d.Z,{type:"primary",style:{marginRight:8},onClick:function(){Q("")},children:o.ZP.get("清空日志")}),(0,j.jsx)(d.Z,{type:"primary",style:{marginRight:8},onClick:function(){W(!0)},children:o.ZP.get("保存")}),(0,j.jsx)(d.Z,{type:"primary",style:{marginRight:8},onClick:function(){ue(),i()},children:o.ZP.get("退出")})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:function(){i()},open:b,children:[(0,j.jsxs)(m.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},pane2Style:{overflowY:"auto"},children:[(0,j.jsx)(g.ZP,{language:I,value:w,theme:X,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1},onMount:function(e){ee.current=e}}),(0,j.jsx)("pre",{style:{padding:"0 15px"},children:J})]}),(0,j.jsx)(v.default,{visible:$,handleCancel:function(){W(!1)},file:a()({content:ee.current&&ee.current.getValue().replace(/\r\n/g,"\n")},_)}),(0,j.jsx)(y.default,{visible:H,handleCancel:function(){K(!1)}})]})}},55667:function(e,t,n){"use strict";n.r(t);var r=n(57213),a=n.n(r),i=n(54689),c=n.n(i),o=n(25359),l=n.n(o),s=n(49811),u=n.n(s),f=n(54306),d=n.n(f),p=n(88265),h=n(63313),m=n(28756),g=n(67393),v=n(9835),y=n(84163),Z=n(84468),x=n(22159),j=n(75310),k=n(57679),b=n(95176),P=n(5558),C=n(59953),S=n(11527);m.Z.Option;t.default=function(e){var t=e.handleCancel,n=e.treeData,r=e.visible,i=g.Z.useForm(),o=d()(i,1)[0],s=(0,h.useState)(!1),f=d()(s,2),m=f[0],w=f[1],F=(0,h.useState)([]),E=d()(F,2),N=E[0],I=E[1],O=(0,h.useState)(),R=d()(O,2),A=R[0],_=R[1],U=(0,h.useState)("blank"),D=d()(U,2),M=D[0],q=D[1],B=function(){var e=u()(l()().mark((function e(n){var r,a,i,c,o,s;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),r=n.path,a=void 0===r?"":r,i=n.filename,c=n.directory,o=void 0===c?"":c,(s=new FormData).append("file",A),s.append("filename",i),s.append("path",a),s.append("content",""),s.append("directory",o),b.W.post("".concat(P.Z.apiPrefix,"scripts"),s).then((function(e){var n=e.code;e.data;if(200===n){v.ZP.success(o?p.ZP.get("创建文件夹成功"):p.ZP.get("创建文件成功"));var r=a?"".concat(a,"/"):"",c=A?A.name:i;t({filename:c,path:a,key:"".concat(r).concat(c)})}w(!1)})).finally((function(){return w(!1)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function e(t){var n,r=c()(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.children&&i.children.length>0&&(i.children=i.children.filter((function(e){return"directory"===e.type})).map((function(e){return a()(a()({},e),{},{disabled:!1})})),e(i.children))}}catch(e){r.e(e)}finally{r.f()}return t};return(0,h.useEffect)((function(){var e=n.filter((function(e){return"directory"===e.type})).map((function(e){return a()(a()({},e),{},{disabled:!1})})),t=L(e);I(t)}),[n]),(0,h.useEffect)((function(){o.resetFields()}),[r]),(0,S.jsx)(y.Z,{title:p.ZP.get("创建"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){o.validateFields().then((function(e){B(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return t()},confirmLoading:m,children:(0,S.jsxs)(g.Z,{form:o,layout:"vertical",name:"edit_name_modal",children:[(0,S.jsx)(g.Z.Item,{name:"type",label:p.ZP.get("类型"),rules:[{required:!0}],initialValue:"blank",children:(0,S.jsxs)(Z.ZP.Group,{onChange:function(e){q(e.target.value)},children:[(0,S.jsx)(Z.ZP,{value:"blank",children:p.ZP.get("空文件")}),(0,S.jsx)(Z.ZP,{value:"upload",children:p.ZP.get("本地文件")}),(0,S.jsx)(Z.ZP,{value:"directory",children:p.ZP.get("文件夹")})]})}),"blank"===M&&(0,S.jsx)(g.Z.Item,{name:"filename",label:p.ZP.get("文件名"),rules:[{required:!0,message:p.ZP.get("请输入文件名")},{validator:function(e,t){return t.includes("/")?Promise.reject(new Error(p.ZP.get("文件名不能包含斜杠"))):Promise.resolve()}}],children:(0,S.jsx)(x.Z,{placeholder:p.ZP.get("请输入文件名")})}),"directory"===M&&(0,S.jsx)(g.Z.Item,{name:"directory",label:p.ZP.get("文件夹名"),rules:[{required:!0,message:p.ZP.get("请输入文件夹名")}],children:(0,S.jsx)(x.Z,{placeholder:p.ZP.get("请输入文件夹名")})}),(0,S.jsx)(g.Z.Item,{label:p.ZP.get("父目录"),name:"path",children:(0,S.jsx)(j.Z,{allowClear:!0,treeData:N,fieldNames:{value:"key",label:"title"},placeholder:p.ZP.get("请选择父目录"),treeDefaultExpandAll:!0})}),"upload"===M&&(0,S.jsx)(g.Z.Item,{label:p.ZP.get("文件"),name:"file",children:(0,S.jsxs)(k.Z.Dragger,{beforeUpload:function(e){return _(e),!1},maxCount:1,children:[(0,S.jsx)("p",{className:"ant-upload-drag-icon",children:(0,S.jsx)(C.Z,{})}),(0,S.jsx)("p",{className:"ant-upload-text",children:p.ZP.get("点击或者拖拽文件到此区域上传")})]})})]})})}},13116:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(93525),a=n.n(r),i=n(54306),c=n.n(i),o=n(88265),l=n(63313),s=n(92260),u=n(84163),f=n(9835),d=n(75310),p=n(34133),h=n(24378),m=n(15367),g=n(22159),v=n(43209),y=n(84540),Z=n(5558),x=n(78969),j=n(82755),k=n(95176),b={"left-tree-container":"left-tree-container___z9VeF","left-tree-scroller":"left-tree-scroller___MRc8C","log-container":"log-container___Iva4k"},P=n(30675),C=n(87878),S=n(36035),w=n(26839),F=n(32132),E=n(13740),N=n(23831),I=n(55667),O=n(66292),R=n.n(O),A=n(98074),_=n(97508),U=n(82428),D=n(38102),M=n(4363),q=n.n(M),B=n(86755),L=n(72186),V=n(26747),$=n(11527),W=s.Z.Text,T=function(){var e=(0,A.useOutletContext)(),t=e.headerStyle,n=e.isPhone,r=e.theme,i=e.socketMessage,s=(0,l.useState)(o.ZP.get("请选择脚本文件")),O=c()(s,2),M=O[0],T=O[1],z=(0,l.useState)(""),H=c()(z,2),K=H[0],G=H[1],Y=(0,l.useState)([]),J=c()(Y,2),Q=J[0],X=J[1],ee=(0,l.useState)(!1),te=c()(ee,2),ne=te[0],re=te[1],ae=(0,l.useState)(""),ie=c()(ae,2),ce=ie[0],oe=ie[1],le=(0,l.useState)(),se=c()(le,2),ue=se[0],fe=se[1],de=(0,l.useRef)(),pe=(0,l.useState)(!1),he=c()(pe,2),me=he[0],ge=he[1],ve=(0,l.useState)(""),ye=c()(ve,2),Ze=ye[0],xe=ye[1],je=(0,l.useState)(!1),ke=c()(je,2),be=ke[0],Pe=ke[1],Ce=(0,l.useRef)(null),Se=(0,l.useState)(!1),we=c()(Se,2),Fe=we[0],Ee=we[1],Ne=(0,l.useState)(!1),Ie=c()(Ne,2),Oe=Ie[0],Re=Ie[1],Ae=(0,l.useState)(),_e=c()(Ae,2),Ue=_e[0],De=_e[1],Me=(0,l.useState)([]),qe=c()(Me,2),Be=qe[0],Le=qe[1],Ve=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&re(!0),k.W.get("".concat(Z.Z.apiPrefix,"scripts")).then((function(e){var t=e.code,n=e.data;200===t&&(X(n),at(),We(n))})).finally((function(){return e&&re(!1)}))},$e=function(e){k.W.get("".concat(Z.Z.apiPrefix,"scripts/").concat(encodeURIComponent(e.title),"?path=").concat(e.parent||"")).then((function(e){var t=e.code,n=e.data;200===t&&T(n)}))},We=function(e){var t=(0,_.parse)(A.history.location.search),n=t.p,r=t.s;if(r){var a="".concat(n,"/").concat(r),i={node:{title:r,key:n?a:r,parent:n}};(0,U.DY)(e,(function(e){return e.key===i.node.key}))&&(Le([n]),ze([a],i))}},Te=function(e,t){if(G(t.key),De(t),t.key!==K&&e)if("directory"!==t.type){var r=(0,U.H$)(e);oe(n&&"typescript"===r?"javascript":r),T(o.ZP.get("加载中...")),$e(t)}else T(o.ZP.get("请选择脚本文件"))},ze=(0,l.useCallback)((function(e,t){(Ce.current?Ce.current.getValue().replace(/\r\n/g,"\n"):M)!==M?u.Z.confirm({title:"确认离开",content:(0,$.jsx)($.Fragment,{children:o.ZP.get("当前修改未保存，确定离开吗")}),onOk:function(){Te(e[0],t.node),Pe(!1)},onCancel:function(){console.log("Cancel")}}):(Pe(!1),Te(e[0],t.node))}),[M]),He=(0,l.useCallback)((function(e){var t=e.target.value;Ke(t)}),[Q]),Ke=(0,l.useCallback)(R()((function(e){xe(e)}),300),[Q]),Ge=(0,D.Z)(Q,Ze,{treeNodeFilterProp:"title"}),Ye=Ge.treeData,Je=Ge.keys;(0,l.useEffect)((function(){Le(q()([].concat(a()(Be),a()(Je))))}),[Je]);var Qe=function(){setTimeout((function(){Pe(!0)}),300)},Xe=function(){Pe(!1),T(o.ZP.get("加载中...")),$e(Ue)},et=function(){u.Z.confirm({title:"确认保存",content:(0,$.jsxs)($.Fragment,{children:[o.ZP.get("确认保存文件"),(0,$.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:Ue.title})," ",o.ZP.get("，保存后不可恢复")]}),onOk:function(){var e=Ce.current?Ce.current.getValue().replace(/\r\n/g,"\n"):M;return new Promise((function(t,n){k.W.put("".concat(Z.Z.apiPrefix,"scripts"),{filename:Ue.title,path:Ue.parent||"",content:e}).then((function(n){var r=n.code;n.data;200===r&&(f.ZP.success("保存成功"),T(e),Pe(!1)),t(null)})).catch((function(e){return n(e)}))}))},onCancel:function(){console.log("Cancel")}})},tt=function(){u.Z.confirm({title:"确认删除",content:(0,$.jsxs)($.Fragment,{children:[o.ZP.get("确认删除"),(0,$.jsx)(W,{style:{wordBreak:"break-all"},type:"warning",children:K}),o.ZP.get("文件"),"directory"===Ue.type?o.ZP.get("夹及其子文件"):"",o.ZP.get("，删除后不可恢复")]}),onOk:function(){k.W.delete("".concat(Z.Z.apiPrefix,"scripts"),{data:{filename:Ue.title,path:Ue.parent||"",type:Ue.type}}).then((function(e){if(200===e.code){f.ZP.success("删除成功");var t=a()(Q);if(Ue.parent)t=(0,U.I1)(t,(function(e){return e.key===Ue.key}));else{var n=t.findIndex((function(e){return e.key===Ue.key}));-1!==n&&t.splice(n,1)}X(t),at()}}))},onCancel:function(){console.log("Cancel")}})},nt=function(){Re(!0)},rt=function(){Ee(!0)},at=function(){G(""),De(null),T(o.ZP.get("请选择脚本文件"))};(0,l.useEffect)((function(){Ve()}),[]),(0,l.useEffect)((function(){de.current&&fe(de.current.clientHeight)}),[de.current,Q]);var it=be?{items:[{label:o.ZP.get("保存"),key:"save",icon:(0,$.jsx)(w.Z,{})},{label:o.ZP.get("退出编辑"),key:"exit",icon:(0,$.jsx)(F.Z,{})}],onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),function(e){switch(e){case"save":et();break;case"exit":Xe()}}(t)}}:{items:[{label:o.ZP.get("创建"),key:"add",icon:(0,$.jsx)(w.Z,{})},{label:o.ZP.get("编辑"),key:"edit",icon:(0,$.jsx)(F.Z,{}),disabled:!K},{label:o.ZP.get("重命名"),key:"rename",icon:(0,$.jsx)(B.Z,{type:"ql-icon-rename"}),disabled:!K},{label:o.ZP.get("删除"),key:"delete",icon:(0,$.jsx)(E.Z,{}),disabled:!K}],onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),function(e){switch(e){case"add":rt();break;case"edit":Qe();break;case"delete":tt();break;case"rename":nt()}}(t)}};return(0,$.jsx)(x.ZP,{className:"ql-container-wrapper log-wrapper",title:K,loading:ne,extra:n?[(0,$.jsx)(d.Z,{treeExpandAction:"click",className:"log-select",value:K,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:Q,placeholder:o.ZP.get("请选择脚本"),fieldNames:{value:"key"},treeNodeFilterProp:"title",showSearch:!0,allowClear:!0,onSelect:Te}),(0,$.jsx)(p.Z,{menu:it,trigger:["click"],children:(0,$.jsx)(h.Z,{type:"primary",icon:(0,$.jsx)(N.Z,{})})})]:be?[(0,$.jsx)(h.Z,{type:"primary",onClick:et,children:o.ZP.get("保存")}),(0,$.jsx)(h.Z,{type:"primary",onClick:Xe,children:o.ZP.get("退出编辑")})]:[(0,$.jsx)(m.Z,{title:o.ZP.get("创建"),children:(0,$.jsx)(h.Z,{type:"primary",onClick:rt,icon:(0,$.jsx)(w.Z,{})})}),(0,$.jsx)(m.Z,{title:o.ZP.get("编辑"),children:(0,$.jsx)(h.Z,{disabled:!K,type:"primary",onClick:Qe,icon:(0,$.jsx)(F.Z,{})})}),(0,$.jsx)(m.Z,{title:o.ZP.get("重命名"),children:(0,$.jsx)(h.Z,{disabled:!K,type:"primary",onClick:nt,icon:(0,$.jsx)(B.Z,{type:"ql-icon-rename"})})}),(0,$.jsx)(m.Z,{title:o.ZP.get("删除"),children:(0,$.jsx)(h.Z,{type:"primary",disabled:!K,onClick:tt,icon:(0,$.jsx)(E.Z,{})})}),(0,$.jsx)(h.Z,{type:"primary",onClick:function(){ge(!0)},children:o.ZP.get("调试")})],header:{style:t},children:(0,$.jsxs)("div",{className:"".concat(b["log-container"]," log-container"),children:[!n&&(0,$.jsxs)(S.Z,{split:"vertical",size:200,maxSize:-100,children:[(0,$.jsx)("div",{className:b["left-tree-container"],children:Q.length>0?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(g.Z.Search,{className:b["left-tree-search"],onChange:He,placeholder:o.ZP.get("请输入脚本名"),allowClear:!0}),(0,$.jsx)("div",{className:b["left-tree-scroller"],ref:de,children:(0,$.jsx)(v.Z,{expandAction:"click",className:b["left-tree"],treeData:Ye,showIcon:!0,height:ue,selectedKeys:[K],expandedKeys:Be,onExpand:function(e){Le(e)},showLine:{showLeafIcon:!0},onSelect:ze})})]}):(0,$.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,$.jsx)(y.Z,{description:o.ZP.get("暂无脚本"),image:y.Z.PRESENTED_IMAGE_SIMPLE})})}),(0,$.jsx)(j.ZP,{language:ce,value:M,theme:r,options:{readOnly:!be,fontSize:12,lineNumbersMinChars:3,glyphMargin:!1},onMount:function(e){Ce.current=e}})]}),n&&(0,$.jsx)(C.ZP,{value:M,extensions:ce?[V.RI[ce]()]:void 0,theme:r.includes("dark")?"dark":"light",readOnly:!be,onChange:function(e){T(e)}}),(0,$.jsx)(P.default,{visible:me,treeData:Q,currentNode:Ue,content:M,socketMessage:i,handleCancel:function(){ge(!1)}}),(0,$.jsx)(I.default,{visible:Fe,treeData:Q,handleCancel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filename:"",path:"",key:""},t=e.filename,n=e.path,r=e.key;if(t){var i=a()(Q),c={title:t,key:r,parent:n};if(n){i=(0,U.I1)(i,(function(e){return e.key===n}),c);var o=n.split("/"),l=[];o.reduce((function(e,t){return l.push(e),"".concat(e,"/").concat(t)})),Le([].concat(a()(Be),l,[n]))}else i.unshift(c);X(i),Te(c.title,c),Pe(!0)}Ee(!1)}}),(0,$.jsx)(L.default,{visible:Oe,handleCancel:function(){Re(!1),Ve(!1)},currentNode:Ue})]})})}},72186:function(e,t,n){"use strict";n.r(t);var r=n(25359),a=n.n(r),i=n(49811),c=n.n(i),o=n(54306),l=n.n(o),s=n(88265),u=n(63313),f=n(67393),d=n(9835),p=n(84163),h=n(22159),m=n(95176),g=n(5558),v=n(11527);t.default=function(e){var t=e.currentNode,n=e.handleCancel,r=e.visible,i=f.Z.useForm(),o=l()(i,1)[0],y=(0,u.useState)(!1),Z=l()(y,2),x=Z[0],j=Z[1],k=function(){var e=c()(a()().mark((function e(r){var i,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,m.W.put("".concat(g.Z.apiPrefix,"scripts/rename"),{filename:t.title,path:t.parent||"",newFilename:r.name});case 4:i=e.sent,c=i.code,i.data,200===c&&(d.ZP.success(s.ZP.get("更新名称成功")),n()),j(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){o.resetFields()}),[t,r]),(0,v.jsx)(p.Z,{title:s.ZP.get("重命名"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){o.validateFields().then((function(e){k(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return n()},confirmLoading:x,children:(0,v.jsx)(f.Z,{form:o,layout:"vertical",name:"edit_name_modal",children:(0,v.jsx)(f.Z.Item,{name:"name",rules:[{required:!0,message:s.ZP.get("请输入新名称")}],children:(0,v.jsx)(h.Z,{placeholder:s.ZP.get("请输入新名称")})})})})}},10726:function(e,t,n){"use strict";n.r(t);var r=n(25359),a=n.n(r),i=n(57213),c=n.n(i),o=n(49811),l=n.n(o),s=n(54306),u=n.n(s),f=n(88265),d=n(63313),p=n(67393),h=n(9835),m=n(84163),g=n(22159),v=n(95176),y=n(5558),Z=n(11527);t.default=function(e){var t=e.file,n=e.handleCancel,r=e.visible,i=p.Z.useForm(),o=u()(i,1)[0],s=(0,d.useState)(!1),x=u()(s,2),j=x[0],k=x[1],b=function(){var e=l()(a()().mark((function e(r){var i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0),i=c()(c()(c()({},t),r),{},{originFilename:t.title}),v.W.post("".concat(y.Z.apiPrefix,"scripts"),i).then((function(e){var t=e.code,r=e.data;200===t&&(h.ZP.success(f.ZP.get("保存文件成功")),n(r)),k(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){o.resetFields(),k(!1)}),[t,r]),(0,Z.jsx)(m.Z,{title:f.ZP.get("保存文件"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){o.validateFields().then((function(e){b(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return n()},confirmLoading:j,children:(0,Z.jsxs)(p.Z,{form:o,layout:"vertical",name:"script_modal",initialValues:{filename:null==t?void 0:t.title,path:(null==t?void 0:t.parent)||""},children:[(0,Z.jsx)(p.Z.Item,{name:"filename",label:f.ZP.get("文件名"),rules:[{required:!0,message:f.ZP.get("请输入文件名")}],children:(0,Z.jsx)(g.Z,{placeholder:f.ZP.get("请输入文件名")})}),(0,Z.jsx)(p.Z.Item,{name:"path",label:f.ZP.get("保存目录"),children:(0,Z.jsx)(g.Z,{placeholder:f.ZP.get("请输入保存目录，默认scripts目录")})})]})})}},77385:function(e,t,n){"use strict";n.r(t);n(25359),n(57213),n(49811);var r=n(54306),a=n.n(r),i=n(88265),c=n(63313),o=n(67393),l=(n(9835),n(84163)),s=n(22159),u=(n(95176),n(5558),n(11527));t.default=function(e){var t=e.file,n=e.handleCancel,r=e.visible,f=o.Z.useForm(),d=a()(f,1)[0],p=(0,c.useState)(!1),h=a()(p,2),m=(h[0],h[1]);return(0,c.useEffect)((function(){d.resetFields(),m(!1)}),[t,r]),(0,u.jsx)(l.Z,{title:i.ZP.get("运行设置"),open:r,forceRender:!0,centered:!0,onCancel:function(){return n()},children:(0,u.jsx)(o.Z,{form:d,layout:"vertical",name:"setting_modal",initialValues:t,children:(0,u.jsx)(o.Z.Item,{name:"filename",label:i.ZP.get("待开发"),rules:[{required:!0,message:i.ZP.get("待开发")}],children:(0,u.jsx)(s.Z,{placeholder:i.ZP.get("待开发")})})})})}},62753:function(e,t,n){"use strict";n.d(t,{F:function(){return l},e:function(){return o}});var r=n(54306),a=n.n(r),i=n(63313),c=n(82428),o=function(){var e=(0,i.useState)("100%"),t=a()(e,2),n=t[0],r=t[1],o=(0,i.useState)(0),l=a()(o,2),s=l[0],u=l[1],f=(0,i.useState)(-48),d=a()(f,2),p=d[0],h=d[1],m=(0,i.useState)(!1),g=a()(m,2),v=g[0],y=g[1],Z=(0,i.useMemo)((function(){return(0,c.ZP)()}),[]).platform;return(0,i.useEffect)((function(){"mobile"===Z&&document.body.offsetWidth<768?(r("auto"),u(0),h(0),y(!0),document.body.setAttribute("data-mode","phone")):(r("100%"),u(0),h(-48),y(!1),document.body.setAttribute("data-mode","desktop"))}),[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:p,width:n,marginLeft:s},isPhone:v}},l=function(){var e=(0,i.useState)(),t=a()(e,2),n=t[0],r=t[1];return(0,i.useEffect)((function(){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=localStorage.getItem("qinglong_dark_theme"),n=e.matches&&"light"!==t||"dark"===t;r(n?"vs-dark":"vs");var a=function(e){"auto"!==t&&t||(e.matches?r("vs-dark"):r("vs"))};"function"==typeof e.addEventListener?e.addEventListener("change",a):"function"==typeof e.addListener&&e.addListener(a)}),[]),{theme:n,reloadTheme:function(){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=localStorage.getItem("qinglong_dark_theme"),n=e.matches&&"light"!==t||"dark"===t;r(n?"vs-dark":"vs")}}}},97508:function(e,t,n){"use strict";var r=n(52510).default,a=n(54306).default,i=n(54689).default,c=n(37635).default,o=n(93525).default,l=n(41274),s=n(54525),u=n(31230),f=n(1469),d=Symbol("encodeFragmentIdentifier");function p(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function h(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function m(e,t){return t.decode?s(e):e}function g(e){return Array.isArray(e)?e.sort():"object"===c(e)?g(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function v(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function y(e){var t=(e=v(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function Z(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function x(e,t){p((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return function(e,n,r){t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var a="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!a&&m(n,e).includes(e.arrayFormatSeparator);n=i?m(n,e):n;var c=a||i?n.split(e.arrayFormatSeparator).map((function(t){return m(t,e)})):null===n?n:m(n,e);r[t]=c};case"bracket-separator":return function(t,n,r){var a=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),a){var i=null===n?[]:n.split(e.arrayFormatSeparator).map((function(t){return m(t,e)}));void 0!==r[t]?r[t]=[].concat(r[t],i):r[t]=i}else r[t]=n?m(n,e):n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;var o,l=i(e.split("&"));try{for(l.s();!(o=l.n()).done;){var s=o.value;if(""!==s){var f=u(t.decode?s.replace(/\+/g," "):s,"="),d=a(f,2),h=d[0],v=d[1];v=void 0===v?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?v:m(v,t),n(m(h,t),v,r)}}}catch(e){l.e(e)}finally{l.f()}for(var y=0,x=Object.keys(r);y<x.length;y++){var j=x[y],k=r[j];if("object"===c(k)&&null!==k)for(var b=0,P=Object.keys(k);b<P.length;b++){var C=P[b];k[C]=Z(k[C],t)}else r[j]=Z(k,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"===c(n)&&!Array.isArray(n)?e[t]=g(n):e[t]=n,e}),Object.create(null))}t.extract=y,t.parse=x,t.stringify=function(e,t){if(!e)return"";p((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n]},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[h(t,e),"[",a,"]"].join("")]:[[h(t,e),"[",h(a,e),"]=",h(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[h(t,e),"[]"].join("")]:[[h(t,e),"[]=",h(r,e)].join("")])}};case"colon-list-separator":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[h(t,e),":list="].join("")]:[[h(t,e),":list=",h(r,e)].join("")])}};case"comma":case"separator":case"bracket-separator":var t="bracket-separator"===e.arrayFormat?"[]=":"=";return function(n){return function(r,a){return void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?r:(a=null===a?"":a,0===r.length?[[h(n,e),t,h(a,e)].join("")]:[[r,h(a,e)].join(e.arrayFormatSeparator)])}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[h(t,e)]:[[h(t,e),"=",h(r,e)].join("")])}}}}(t),a={},i=0,c=Object.keys(e);i<c.length;i++){var l=c[i];n(l)||(a[l]=e[l])}var s=Object.keys(a);return!1!==t.sort&&s.sort(t.sort),s.map((function(n){var a=e[n];return void 0===a?"":null===a?h(n,t):Array.isArray(a)?0===a.length&&"bracket-separator"===t.arrayFormat?h(n,t)+"[]":a.reduce(r(n),[]).join("&"):h(n,t)+"="+h(a,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=u(e,"#"),r=a(n,2),i=r[0],c=r[1];return Object.assign({url:i.split("?")[0]||"",query:x(y(e),t)},t&&t.parseFragmentIdentifier&&c?{fragmentIdentifier:m(c,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign(r({encode:!0,strict:!0},d,!0),n);var a=v(e.url).split("?")[0]||"",i=t.extract(e.url),c=t.parse(i,{sort:!1}),o=Object.assign(c,e.query),l=t.stringify(o,n);l&&(l="?".concat(l));var s=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(s="#".concat(n[d]?h(e.fragmentIdentifier,n):e.fragmentIdentifier)),"".concat(a).concat(l).concat(s)},t.pick=function(e,n,a){a=Object.assign(r({parseFragmentIdentifier:!0},d,!1),a);var i=t.parseUrl(e,a),c=i.url,o=i.query,l=i.fragmentIdentifier;return t.stringifyUrl({url:c,query:f(o,n),fragmentIdentifier:l},a)},t.exclude=function(e,n,r){var a=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,a,r)}},31230:function(e){"use strict";e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},41274:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},34133:function(e,t,n){"use strict";var r=n(70029);t.Z=r.Z},54525:function(e){"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),r=new RegExp("("+t+")+","gi");function a(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function i(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n)||[],r=1;r<t.length;r++)t=(e=a(t,r).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var a=i(n[0]);a!==n[0]&&(t[n[0]]=a)}n=r.exec(e)}t["%C2"]="�";for(var c=Object.keys(t),o=0;o<c.length;o++){var l=c[o];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},1469:function(e){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),a=Array.isArray(t),i=0;i<r.length;i++){var c=r[i],o=e[c];(a?-1!==t.indexOf(c):t(c,o,e))&&(n[c]=o)}return n}},45170:function(e,t,n){var r=n(13807);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},94936:function(e){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},92504:function(e){e.exports=function(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}},13807:function(e,t,n){var r=n(92504),a=n(99940),i=n(3729);e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,a,n)}},99940:function(e){e.exports=function(e){return e!=e}},95453:function(e,t,n){var r=n(78188),a=n(45170),i=n(94936),c=n(29880),o=n(17319),l=n(79967);e.exports=function(e,t,n){var s=-1,u=a,f=e.length,d=!0,p=[],h=p;if(n)d=!1,u=i;else if(f>=200){var m=t?null:o(e);if(m)return l(m);d=!1,u=c,h=new r}else h=t?[]:p;e:for(;++s<f;){var g=e[s],v=t?t(g):g;if(g=n||0!==g?g:0,d&&v==v){for(var y=h.length;y--;)if(h[y]===v)continue e;t&&h.push(v),p.push(g)}else u(h,v,n)||(h!==p&&h.push(v),p.push(g))}return p}},17319:function(e,t,n){var r=n(81956),a=n(43226),i=n(79967),c=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:a;e.exports=c},3729:function(e){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},43226:function(e){e.exports=function(){}},4363:function(e,t,n){var r=n(95453);e.exports=function(e){return e&&e.length?r(e):[]}}}]);