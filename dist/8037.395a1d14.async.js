"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8037],{23421:function(t,e,r){r.d(e,{Z:function(){return f}});var o=r(14797),n=r(63313),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},a=r(46420),i=function(t,e){return n.createElement(a.Z,(0,o.Z)((0,o.Z)({},t),{},{ref:e,icon:c}))};i.displayName="StopOutlined";var f=n.forwardRef(i)},33503:function(t,e,r){r.d(e,{u:function(){return R}});var o=r(63313);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var c=["style","context"],a=["ctx"];function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){if(null==t)return{};var r,o,n=function(t,e){if(null==t)return{};var r,o,n={},c=Object.keys(t);for(o=0;o<c.length;o++)r=c[o],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(o=0;o<c.length;o++)r=c[o],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l(){return l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},l.apply(this,arguments)}var p,_=64;function d(t,e){if(t.debug){if("+"===e[0])return console.debug(e.slice(1));var r=new Date,o="".concat(r.toLocaleTimeString(),".").concat(r.getMilliseconds());console.debug("%c[".concat(t.id,"][").concat(o,"][").concat(e,"]"),"color:#a00",t)}}!function(t){t[t.INIT=1]="INIT",t[t.LOADED=2]="LOADED",t[t.RUNNING=4]="RUNNING"}(p||(p={}));var m=o.forwardRef((function(t,e){return o.createElement("table",l({ref:e},t))}));function h(t){return o.createElement("tbody",t)}var v=o.forwardRef((function(t,e){return o.createElement("tr",l({ref:e},t))}));function w(t,e,r,o){t._offset_top=0|e,t._offset_head=0|r,t._offset_tail=0|o}function y(t,e,r){if(t.wrap_inst.current){var o=t.wrap_inst.current.parentElement;o.scrollTop=e,o.scrollLeft=Math.max(r,o.scrollLeft)}}function b(t){if(!t.HND_PAINT){var e=t.cq,r=t.wrap_inst,o=function(){t.HND_PAINT=0;for(var o=0;o<e.length;++o)e[o].index>=t._offset_head&&e[o].index<t._offset_tail&&e[o].func();if(t.vt_state===p.RUNNING&&r.current){var n=t.computed_h;if(t.WH!==n){t.WH=n;var c=r.current.style;c.height=n?(c.maxHeight=n+"px",c.maxHeight):(c.maxHeight="unset",c.maxHeight),t.on_update_wrap_style()}}};t.HND_PAINT=8===t.evt?window.requestAnimationFrame(o):window.setTimeout(o)}}function g(t,e,r,o){var n=e-r,c=new Array(n).fill(o);t.row_height=t.row_height.concat(c),t.computed_h+=n*o}var N=function(t,e){var r,n=t.style,a=t.context,i=s(t,c),u=(0,o.useState)(0),m=(0,o.useRef)((function(){})),h=(0,o.useMemo)((function(){return o.createRef()}),[]),v=(0,o.useContext)(a);(0,o.useMemo)((function(){Object.assign(v,{vt_state:p.INIT,possible_hight_per_tr:-1,computed_h:0,re_computed:0,row_height:[],row_count:0,prev_row_count:0,_offset_top:0,_offset_head:0,_offset_tail:1,WH:0,top:0,left:0,evt:0,end:!1,final_top:0,f_final_top:1,update_count:0,indexMap:new WeakMap,HND_PAINT:0,retry_count:5}),v.wrap_inst&&v.wrap_inst.current&&v.wrap_inst.current.parentElement.removeEventListener("scroll",r),v.wrap_inst=h,v.top=v.initTop,v.on_update_wrap_style=function(){0===v._y&&"".concat(v._scroll_y).length&&r({flag:_,target:{scrollTop:v.top,scrollLeft:v.left}})},v.cq=[];var t=0,e=0;v.cq.push=function(r){if(v.vt_state===p.RUNNING){var o=v._offset_tail-v._offset_head+2*v.overscanRowCount+10;return e=Math.max(e,o),t>e&&(t=0),v.cq[t++]=r,0}}}),[]);var b,g=(0,o.useRef)([]).current;r=(0,o.useCallback)((function(t){if(v.vt_state===p.RUNNING){var e=performance.now();if(t){if("flag"in t)g.push(t);else{var r=t.target,o=Math.max(r.scrollTop,0);g.push({target:{scrollTop:o,scrollLeft:r.scrollLeft},end:r.scrollHeight-r.clientHeight===Math.round(o),flag:8})}if(0===v.f_final_top)return b(e)}v.HND_RAF||(v.HND_RAF=window.setTimeout((function(){return Promise.resolve().then((function(){return b(e)}))})))}}),[]),b=(0,o.useCallback)((function(t){if(v.HND_RAF=0,performance.now()-t>10&&v.retry_count-- >0)r();else if(v.retry_count=5,v.vt_state===p.RUNNING){var e,o=g;if(o.length){e=o.pop(),o.length=0;var n=e.target.scrollTop,c=e.target.scrollLeft,a=e.flag;d(v,"top: ".concat(n,", left: ").concat(c));var i=function(t,e){var r=t.row_height,o=t.row_count,n=t.overscanRowCount;t._scroll_y=t.scroll.y,"number"==typeof t._scroll_y?t._y=t._scroll_y:("string"==typeof t._scroll_y||console.assert(!1,"VT: did you forget to set `scroll.y`?"),t._y=t.wrap_inst.current.parentElement.offsetHeight),console.assert(t._y>=0);var c=0,a=0,i=0,f=0;if(-1===e&&o>0){for(a=o;a>0&&f<t._y;)f+=r[--a];return[0|a,0|o,0|t.computed_h-f]}for(;a<o&&c<e;++a)c+=r[a];for(i=a;i<o&&f<t._y;++i)f+=r[i];for(var u=n<0?0:n;a>0&&u--;)c-=r[--a];return(i+=n)>o&&(i=o),[0|a,0|i,0|c]}(v,0===v.f_final_top?v.final_top:n),f=i[0],s=i[1],l=i[2],m=v._offset_head,h=v._offset_tail,y=v._offset_top,b=!1;switch(a){case 1:d(v,"SCROLLEVT_INIT");break;case _:d(v,"SCROLLEVT_BY_HOOK"),f===m&&s===h&&l===y?(v.f_final_top=1,-1===v.final_top&&(n=v.computed_h-v._y),b=!0):-1===v.final_top&&(n=l);break;case 2:if(f===m&&s===h&&l===y)return;d(v,"SCROLLEVT_RECOMPUTE");break;case 8:if(f===m&&s===h&&l===y)return;d(v,"SCROLLEVT_NATIVE"),v.onScroll&&v.onScroll({top:n,left:c,isEnd:e.end}),b=e.end}w(v,l,f,s),function(t,e,r,o,n){t.top=e,t.left=r,t.evt=o,t.end=n}(v,n,c,a,b),u[1](++v.update_count)}}}),[]),(0,o.useImperativeHandle)(e,(function(){var t=function(t){v.f_final_top=0,v.final_top=t,r({target:{scrollTop:t,scrollLeft:-1},flag:_})};return{scrollTo:function(e){m.current=function(){return t(e)},m.current()},scrollToIndex:function(e){m.current=function(){e>v.row_count-1&&(e=v.row_count-1),e<0&&(e=0);for(var r=0,o=0;o<e;++o)r+=v.row_height[o];t(r)},m.current()}}}),[]),(0,o.useEffect)((function(){var t=h.current.parentElement;try{t.addEventListener("scroll",r,{passive:!0})}catch(e){t.addEventListener("scroll",r,!1)}}),[h.current]),(0,o.useEffect)((function(){r({flag:_,target:{scrollLeft:v.left,scrollTop:v.top}})}),[v.scroll.y]),(0,o.useEffect)((function(){switch(v.evt){case _:0===v.f_final_top?m.current():y(v,v.top,v.left);break;case 1:case 2:y(v,v.top,v.left)}}),[u[0]]),(0,o.useEffect)((function(){switch(v.vt_state){case p.LOADED:v.vt_state=p.RUNNING,r({target:{scrollTop:v.top,scrollLeft:0},flag:_});break;case p.RUNNING:0!==v.re_computed&&(v.re_computed=0,r({target:{scrollTop:v.top,scrollLeft:v.left},flag:2}))}}));var N=(0,o.useMemo)((function(){return{width:n.width,minWidth:"100%",position:"relative",transform:"translate(0)"}}),[n.width]),O=(0,o.useMemo)((function(){return f(f({},n),{},{width:void 0,position:"relative",top:v._offset_top,transform:"translate(0)"})}),[v._offset_top]),E=(0,o.useMemo)((function(){return f({},v)}),[v.update_count]),x=v.components.table;return o.createElement("div",{ref:h,style:N},o.createElement(a.Provider,{value:E},o.createElement(x,l({},i,{style:O}))))},O=function(t){var e=t.children,r=t.className,n=t.ctx,c=e[0],a=e[1],i=Array.isArray(a)?a.length:0,f=n._offset_head,u=n._offset_tail,s=[];switch(n.vt_state){case p.INIT:i>=0&&(console.assert(0===f),console.assert(1===u),Array.isArray(a)?(s=a.slice(f,u),n.indexMap.set(s[0].props.record,0)):s=a,n.re_computed=i,n.prev_row_count=i,n.row_count=i);break;case p.RUNNING:if(u>i){var l=u-i;(f-=l)<0&&(f=0),(u-=l)<0&&(u=0),w(n,n._offset_top,f,u)}n.row_count!==i&&function(t,e){t.re_computed=e-t.row_count,t.prev_row_count=t.row_count,t.row_count=e}(n,i),i=n.row_count;var _=n.prev_row_count;if(i<_)!function(t,e,r){if(0===e)return t.computed_h=0,t.row_height.length=0,void(t.top=0);for(var o=t.row_height,n=0,c=e;c<r;++c)n+=o[c];t.computed_h-=n}(n,i,_);else if(i>_){var d=n.row_height;i-d.length>0?g(n,i,_,n.possible_hight_per_tr):(d.fill(n.possible_hight_per_tr,_,i),n.computed_h+=n.possible_hight_per_tr*(i-_))}if(i){var m=f;(s=a.slice(m,u)).forEach((function(t){return n.indexMap.set(t.props.record,m++)}))}else s=a;n.prev_row_count=n.row_count;break;case p.LOADED:console.assert(!1)}var h=n.components.body.wrapper;return o.createElement(h,{className:r},c,s)},E=function(t){var e=o.createRef(),r=t.ctx,n=s(t,a),c=t.children,i=r.components.body.row;if(!Array.isArray(c))return o.createElement(i,n,c);var f=c[0].props,u=r.indexMap.get(f.record),_=(0,o.useRef)(u),m=(0,o.useMemo)((function(){return".".concat(f.prefixCls,"-expanded-row")}),[f.prefixCls]),h=performance.now();return(0,o.useLayoutEffect)((function(){var t=performance.now();return d(r,"+idx ".concat(u," tooks ").concat(t-h," ms")),r.vt_state===p.RUNNING?b(r):(r.possible_hight_per_tr=e.current.offsetHeight,g(r,r.row_count,0,r.possible_hight_per_tr),b(r),r.vt_state=p.LOADED),function(){b(r)}}),[]),(0,o.useEffect)((function(){r.cq.push({index:u,func:function(){var t=e.current;if(t){for(var o=t.offsetHeight,n=t.nextSibling;n&&n.matches(m);)o+=n.offsetHeight,n=n.nextSibling;var c=r.row_height[u],a=r.row_height[_.current];r.computed_h-=c,r.computed_h+=a,r.computed_h+=o-a,r.row_height[u]=o}}}),b(r)})),o.createElement(i,l({},n,{ref:e}))};function x(t,e){var r=e.table,o=e.body,n=e.header;t.components.body=f(f({},t.components.body),o),o&&o.cell&&(t._vtcomponents.body.cell=o.cell),n&&(t.components.header=n,t._vtcomponents.header=n),r&&(t.components.table=r)}function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function R(t,e){var r=function(t,e){var r=(0,o.useRef)(o.createContext({})).current,n=(0,o.useContext)(r),c=(0,o.useRef)({scrollTo:function(t){},scrollToIndex:function(t){}});return(0,o.useMemo)((function(){return Object.assign(n,{id:(+new Date).toString(36).slice(4),initTop:0,overscanRowCount:5,debug:!1,ref:c},t())}),e),(0,o.useMemo)((function(){var t=o.forwardRef(N);n._vtcomponents={table:function(e){return o.createElement(t,l({},e,{context:r,ref:n.ref}))},body:{wrapper:function(t){return o.createElement(r.Consumer,null,(function(){return o.createElement(O,l({},t,{ctx:n}))}))},row:function(t){return o.createElement(E,l({},t,{ctx:n}))}}},n.components={},x(n,{table:m,body:{wrapper:h,row:v}}),n.vt_state=p.INIT}),[]),n}(t,e||[]);return[r._vtcomponents,function(t){return x(r,t)},r.ref]}!function(){if(1&("object"===("undefined"==typeof window?"undefined":T(window))&&window instanceof Window?1:2)&&!Object.hasOwnProperty.call(window,"requestAnimationFrame")&&!window.requestAnimationFrame)throw new Error("Please using the modern browers or appropriate polyfill!")}(),console.log("wubostc/virtualized-table-for-antd")}}]);