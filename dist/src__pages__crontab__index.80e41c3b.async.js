(self.webpackChunk=self.webpackChunk||[]).push([[4473,5812,8044,4714],{13740:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(14797),a=n(63313),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},o=n(46420),l=function(e,t){return a.createElement(o.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t,icon:r}))};l.displayName="DeleteOutlined";var c=a.forwardRef(l)},68834:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(14797),a=n(63313),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},o=n(46420),l=function(e,t){return a.createElement(o.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t,icon:r}))};l.displayName="SettingOutlined";var c=a.forwardRef(l)},86755:function(e,t,n){"use strict";var i=(0,n(55258).Z)({scriptUrl:["//at.alicdn.com/t/c/font_3354854_ob5y15ewlyq.js"]});t.Z=i},66150:function(e,t,n){"use strict";var i=n(54306),a=n.n(i),r=n(63313),o=n(61761),l=n(82428);t.Z=function(e,t){var n=(0,r.useState)(0),i=a()(n,2),c=i[0],s=i[1];return(0,o.Z)(e,(function(e){var n=e.target;n.classList.contains("ant-table-wrapper")||(n=e.target.querySelector(".ant-table-wrapper")),s((0,l.W9)({extraHeight:t,target:n}))})),c}},84550:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var i=n(57213),a=n.n(i),r=n(54306),o=n.n(r),l=n(88265),c=n(63313),s=n(92260),u=n(64865),d=n(84163),g=n(9835),f=n(394),p=n(51704),m=n(15367),h=n(24378),Z=n(1953),v=n(25265),x=n(44968),P=n(69685),b=n(20209),y=n(65601),w=n(7688),j=n(76657),k=n(3563),C=n(33538),S=n(80755),_=n(95176),q=n(5558),N=n(42792),B=n(82755),R=n(86755),I=n(82428),O=n(2689),E=n(61761),D=n(11527),z=s.Z.Text,W=[{key:"log",tab:l.ZP.get("日志")},{key:"script",tab:l.ZP.get("脚本")}],T=navigator.language||navigator.languages[0],F=function(e){var t,n,i,r=e.cron,s=void 0===r?{}:r,F=e.handleCancel,L=e.visible,M=e.theme,H=e.isPhone,V=(0,c.useState)("log"),A=o()(V,2),K=A[0],U=A[1],X=(0,c.useState)(!0),$=o()(X,2),G=($[0],$[1]),Y=(0,c.useState)([]),Q=o()(Y,2),J=Q[0],ee=Q[1],te=(0,c.useState)(""),ne=o()(te,2),ie=ne[0],ae=ne[1],re=(0,c.useState)(""),oe=o()(re,2),le=oe[0],ce=oe[1],se=(0,c.useState)(!1),ue=o()(se,2),de=ue[0],ge=ue[1],fe=(0,c.useRef)(null),pe=(0,c.useState)({}),me=o()(pe,2),he=me[0],Ze=me[1],ve=(0,c.useState)(""),xe=o()(ve,2),Pe=xe[0],be=xe[1],ye=(0,c.useState)(W),we=o()(ye,2),je=we[0],ke=we[1],Ce=(0,c.useState)({}),Se=o()(Ce,2),_e=Se[0],qe=Se[1],Ne=(0,c.useRef)(null),Be=function(e){var t=(0,c.useState)(0),n=o()(t,2),i=n[0],a=n[1];return(0,E.Z)(e,(function(e){var t=e.target.clientHeight;i!==t&&a(t)})),i}(Ne),Re={log:(0,D.jsx)("div",{ref:Ne,children:(0,D.jsx)(u.ZP,{children:(0,D.jsx)(O.Z,{data:J,height:Be,itemHeight:47,itemKey:"filename",children:function(e){return(0,D.jsxs)(u.ZP.Item,{className:"log-item",onClick:function(){return Ie(e)},children:[(0,D.jsx)(v.Z,{style:{marginRight:10}}),e.directory,"/",e.filename]})}})})}),script:he.filename&&(0,D.jsx)(B.ZP,{language:(0,I.H$)(he.filename),theme:M,value:le,options:{fontSize:12,lineNumbersMinChars:3,fontFamily:"Source Code Pro",glyphMargin:!1,wordWrap:"on"},onMount:function(e,t){fe.current=e}})},Ie=function(e){localStorage.setItem("logCron",_e.id),be("".concat(q.Z.apiPrefix,"logs/").concat(e.filename,"?path=").concat(e.directory||"")),_.W.get("".concat(q.Z.apiPrefix,"logs/").concat(e.filename,"?path=").concat(e.directory||"")).then((function(e){var t=e.code,n=e.data;200===t&&(ae(n),ge(!0))}))},Oe=function(){G(!0),_.W.get("".concat(q.Z.apiPrefix,"crons/").concat(s.id,"/logs")).then((function(e){var t=e.code,n=e.data;200===t&&ee(n)})).finally((function(){return G(!1)}))};return(0,c.useEffect)((function(){s&&s.id&&(qe(s),Oe(),function(){var e=(0,I.FA)(s.command);if(Array.isArray(e)){ke(je);var t=o()(e,2),n=t[0],i=t[1];Ze({parent:i,filename:n}),_.W.get("".concat(q.Z.apiPrefix,"scripts/").concat(n,"?path=").concat(i||"")).then((function(e){var t=e.code,n=e.data;200===t&&ce(n)}))}else e&&ke([je[0]])}())}),[s]),(0,D.jsxs)(d.Z,{title:(0,D.jsxs)("div",{className:"crontab-title-wrapper",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("span",{children:_e.name}),(null===(t=_e.labels)||void 0===t?void 0:t.length)>0&&""!==_e.labels[0]&&(0,D.jsx)(f.Z,{type:"vertical"}),(null===(n=_e.labels)||void 0===n?void 0:n.length)>0&&""!==_e.labels[0]&&(null===(i=_e.labels)||void 0===i?void 0:i.map((function(e,t){return(0,D.jsx)(p.Z,{color:"blue",style:{marginRight:5},children:e},e)})))]}),(0,D.jsxs)("div",{className:"operations",children:[(0,D.jsx)(m.Z,{title:_e.status===C.CrontabStatus.idle?l.ZP.get("运行"):l.ZP.get("停止"),children:(0,D.jsx)(h.Z,{type:"link",icon:_e.status===C.CrontabStatus.idle?(0,D.jsx)(x.Z,{}):(0,D.jsx)(P.Z,{}),size:"small",onClick:_e.status===C.CrontabStatus.idle?function(){d.Z.confirm({title:l.ZP.get("确认运行"),content:(0,D.jsxs)(D.Fragment,{children:[l.ZP.get("确认运行定时任务")," ",(0,D.jsx)(z,{style:{wordBreak:"break-all"},type:"warning",children:_e.name})," ",l.ZP.get("吗")]}),onOk:function(){_.W.put("".concat(q.Z.apiPrefix,"crons/run"),[_e.id]).then((function(e){var t=e.code;e.data;200===t&&(qe(a()(a()({},_e),{},{status:C.CrontabStatus.running})),setTimeout((function(){Oe()}),1e3))}))},onCancel:function(){console.log("Cancel")}})}:function(){d.Z.confirm({title:l.ZP.get("确认停止"),content:(0,D.jsxs)(D.Fragment,{children:[l.ZP.get("确认停止定时任务")," ",(0,D.jsx)(z,{style:{wordBreak:"break-all"},type:"warning",children:_e.name})," ",l.ZP.get("吗")]}),onOk:function(){_.W.put("".concat(q.Z.apiPrefix,"crons/stop"),[_e.id]).then((function(e){var t=e.code;e.data;200===t&&qe(a()(a()({},_e),{},{status:C.CrontabStatus.idle}))}))},onCancel:function(){console.log("Cancel")}})}})}),(0,D.jsx)(m.Z,{title:1===_e.isDisabled?l.ZP.get("启用"):l.ZP.get("禁用"),children:(0,D.jsx)(h.Z,{type:"link",icon:(0,D.jsx)(R.Z,{type:1===_e.isDisabled?"ql-icon-enable":"ql-icon-disable"}),size:"small",onClick:function(){d.Z.confirm({title:"确认".concat(1===_e.isDisabled?l.ZP.get("启用"):l.ZP.get("禁用")),content:(0,D.jsxs)(D.Fragment,{children:[l.ZP.get("确认"),1===_e.isDisabled?l.ZP.get("启用"):l.ZP.get("禁用"),l.ZP.get("定时任务")," ",(0,D.jsx)(z,{style:{wordBreak:"break-all"},type:"warning",children:_e.name})," ",l.ZP.get("吗")]}),onOk:function(){_.W.put("".concat(q.Z.apiPrefix,"crons/").concat(1===_e.isDisabled?"enable":"disable"),[_e.id]).then((function(e){var t=e.code;e.data;200===t&&qe(a()(a()({},_e),{},{isDisabled:1===_e.isDisabled?0:1}))}))},onCancel:function(){console.log("Cancel")}})}})}),(0,D.jsx)(m.Z,{title:1===_e.isPinned?l.ZP.get("取消置顶"):l.ZP.get("置顶"),children:(0,D.jsx)(h.Z,{type:"link",icon:(0,D.jsx)(R.Z,{type:1===_e.isPinned?"ql-icon-untop":"ql-icon-top"}),size:"small",onClick:function(){d.Z.confirm({title:"确认".concat(1===_e.isPinned?l.ZP.get("取消置顶"):l.ZP.get("置顶")),content:(0,D.jsxs)(D.Fragment,{children:[l.ZP.get("确认"),1===_e.isPinned?l.ZP.get("取消置顶"):l.ZP.get("置顶"),l.ZP.get("定时任务")," ",(0,D.jsx)(z,{style:{wordBreak:"break-all"},type:"warning",children:_e.name})," ",l.ZP.get("吗")]}),onOk:function(){_.W.put("".concat(q.Z.apiPrefix,"crons/").concat(1===_e.isPinned?"unpin":"pin"),[_e.id]).then((function(e){var t=e.code;e.data;200===t&&qe(a()(a()({},_e),{},{isPinned:1===_e.isPinned?0:1}))}))},onCancel:function(){console.log("Cancel")}})}})})]})]}),centered:!0,open:L,forceRender:!0,footer:!1,onCancel:function(){return F()},wrapClassName:"crontab-detail",width:H?"":"80vw",children:[(0,D.jsxs)("div",{className:"card-wrapper",children:[(0,D.jsx)(Z.Z,{children:(0,D.jsxs)("div",{className:"cron-detail-info-item",children:[(0,D.jsx)("div",{className:"cron-detail-info-title",children:l.ZP.get("任务")}),(0,D.jsx)("div",{className:"cron-detail-info-value",children:_e.command})]})}),(0,D.jsxs)(Z.Z,{style:{marginTop:10},children:[(0,D.jsxs)("div",{className:"cron-detail-info-item",children:[(0,D.jsx)("div",{className:"cron-detail-info-title",children:l.ZP.get("状态")}),(0,D.jsxs)("div",{className:"cron-detail-info-value",children:[(!_e.isDisabled||_e.status!==C.CrontabStatus.idle)&&(0,D.jsxs)(D.Fragment,{children:[_e.status===C.CrontabStatus.idle&&(0,D.jsx)(p.Z,{icon:(0,D.jsx)(b.Z,{}),color:"default",children:l.ZP.get("空闲中")}),_e.status===C.CrontabStatus.running&&(0,D.jsx)(p.Z,{icon:(0,D.jsx)(y.Z,{spin:!0}),color:"processing",children:l.ZP.get("运行中")}),_e.status===C.CrontabStatus.queued&&(0,D.jsx)(p.Z,{icon:(0,D.jsx)(w.Z,{}),color:"default",children:l.ZP.get("队列中")})]}),1===_e.isDisabled&&_e.status===C.CrontabStatus.idle&&(0,D.jsx)(p.Z,{icon:(0,D.jsx)(j.Z,{}),color:"error",children:l.ZP.get("已禁用")})]})]}),(0,D.jsxs)("div",{className:"cron-detail-info-item",children:[(0,D.jsx)("div",{className:"cron-detail-info-title",children:l.ZP.get("定时")}),(0,D.jsx)("div",{className:"cron-detail-info-value",children:_e.schedule})]}),(0,D.jsxs)("div",{className:"cron-detail-info-item",children:[(0,D.jsx)("div",{className:"cron-detail-info-title",children:l.ZP.get("最后运行时间")}),(0,D.jsx)("div",{className:"cron-detail-info-value",children:_e.last_execution_time?new Date(1e3*_e.last_execution_time).toLocaleString(T,{hour12:!1}).replace(" 24:"," 00:"):"-"})]}),(0,D.jsxs)("div",{className:"cron-detail-info-item",children:[(0,D.jsx)("div",{className:"cron-detail-info-title",children:l.ZP.get("最后运行时长")}),(0,D.jsx)("div",{className:"cron-detail-info-value",children:_e.last_running_time?(0,S.E)(_e.last_running_time):"-"})]}),(0,D.jsxs)("div",{className:"cron-detail-info-item",children:[(0,D.jsx)("div",{className:"cron-detail-info-title",children:l.ZP.get("下次运行时间")}),(0,D.jsx)("div",{className:"cron-detail-info-value",children:_e.nextRunTime&&_e.nextRunTime.toLocaleString(T,{hour12:!1}).replace(" 24:"," 00:")})]})]}),(0,D.jsx)(Z.Z,{style:{marginTop:10},tabList:je,activeTabKey:K,onTabChange:function(e){!function(e){U(e)}(e)},tabBarExtraContent:"script"===K&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(h.Z,{type:"primary",style:{marginRight:8},onClick:function(){d.Z.confirm({title:"确认保存",content:(0,D.jsxs)(D.Fragment,{children:[l.ZP.get("确认保存文件"),(0,D.jsx)(z,{style:{wordBreak:"break-all"},type:"warning",children:he.filename})," ",l.ZP.get("，保存后不可恢复")]}),onOk:function(){var e=fe.current?fe.current.getValue().replace(/\r\n/g,"\n"):le;return new Promise((function(t,n){_.W.put("".concat(q.Z.apiPrefix,"scripts"),{filename:he.filename,path:he.parent||"",content:e}).then((function(n){var i=n.code;n.data;200===i&&(ce(e),g.ZP.success("保存成功")),t(null)})).catch((function(e){return n(e)}))}))},onCancel:function(){console.log("Cancel")}})},children:l.ZP.get("保存")}),(0,D.jsx)(h.Z,{type:"primary",icon:(0,D.jsx)(k.Z,{}),onClick:function(){var e;null===(e=fe.current._domElement.parentElement)||void 0===e||e.requestFullscreen()}})]}),children:Re[K]})]}),(0,D.jsx)(N.default,{visible:de,handleCancel:function(){ge(!1)},cron:s,data:ie,logUrl:Pe})]})}},60012:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return se}});var i=n(93525),a=n.n(i),r=n(54306),o=n.n(r),l=n(57213),c=n.n(l),s=n(88265),u=n(63313),d=n(92260),g=n(22159),f=n(51704),p=n(2947),m=n(84163),h=n(9835),Z=n(34133),v=n(24378),x=n(86986),P=n(94674),b=n(20209),y=n(65601),w=n(7688),j=n(76657),k=n(32132),C=n(38101),S=n(23421),_=n(13740),q=n(14797),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z"}}]},name:"pushpin",theme:"outlined"},B=n(46420),R=function(e,t){return u.createElement(B.Z,(0,q.Z)((0,q.Z)({},e),{},{ref:t,icon:N}))};R.displayName="PushpinOutlined";var I=u.forwardRef(R),O=n(23831),E=n(59673),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"},z=function(e,t){return u.createElement(B.Z,(0,q.Z)((0,q.Z)({},e),{},{ref:t,icon:D}))};z.displayName="UnorderedListOutlined";var W=u.forwardRef(z),T=n(26839),F=n(68834),L=n(99604),M=n(5558),H=n(78969),V=n(95176),A=n(8879),K=n(42792),U=n(84550),X=n(80755),$=n(98074),G=n(74714),Y=n(87421),Q=n(66150),J=n(82428),ee=n(33503),te=n(33538),ne=n(19631),ie=n(27705),ae=n(11527);function re(e){var t,n=e.service,i=e.options,a=(0,ne.Z)(n,i),r=a.loading,o=a.data;return(0,ae.jsx)(ie.Z,{spinning:r,children:(0,ae.jsx)(d.Z.Text,{ellipsis:!0,children:null==o||null===(t=o.data)||void 0===t?void 0:t.name})})}var oe=d.Z.Text,le=d.Z.Paragraph,ce=g.Z.Search,se=function(){var e=(0,$.useOutletContext)(),t=e.headerStyle,n=e.isPhone,i=e.theme,r=[{title:s.ZP.get("名称"),dataIndex:"name",key:"name",fixed:"left",width:120,render:function(e,t){return(0,ae.jsx)(le,{style:{wordBreak:"break-all",marginBottom:0},ellipsis:{tooltip:e,rows:2},children:(0,ae.jsx)("a",{onClick:function(){$e(t),Ae(!0)},children:t.name||"-"})})},sorter:{compare:function(e,t){var n;return null==e||null===(n=e.name)||void 0===n?void 0:n.localeCompare(null==t?void 0:t.name)}}},{title:s.ZP.get("命令/脚本"),dataIndex:"command",key:"command",width:240,render:function(e,t){return(0,ae.jsx)(le,{style:{wordBreak:"break-all",marginBottom:0},ellipsis:{tooltip:e,rows:2},children:(0,ae.jsx)("a",{onClick:function(){Nt(t)},children:e})})},sorter:{compare:function(e,t){return e.command.localeCompare(t.command)}}},{title:s.ZP.get("状态"),key:"status",dataIndex:"status",width:100,filters:[{text:s.ZP.get("运行中"),value:te.CrontabStatus.running},{text:s.ZP.get("空闲中"),value:te.CrontabStatus.idle},{text:s.ZP.get("已禁用"),value:te.CrontabStatus.disabled},{text:s.ZP.get("队列中"),value:te.CrontabStatus.queued}],render:function(e,t){return(0,ae.jsxs)(ae.Fragment,{children:[(!t.isDisabled||t.status!==te.CrontabStatus.idle)&&(0,ae.jsxs)(ae.Fragment,{children:[t.status===te.CrontabStatus.idle&&(0,ae.jsx)(f.Z,{icon:(0,ae.jsx)(b.Z,{}),color:"default",children:s.ZP.get("空闲中")}),t.status===te.CrontabStatus.running&&(0,ae.jsx)(f.Z,{icon:(0,ae.jsx)(y.Z,{spin:!0}),color:"processing",children:s.ZP.get("运行中")}),t.status===te.CrontabStatus.queued&&(0,ae.jsx)(f.Z,{icon:(0,ae.jsx)(w.Z,{}),color:"default",children:s.ZP.get("队列中")})]}),1===t.isDisabled&&t.status===te.CrontabStatus.idle&&(0,ae.jsx)(f.Z,{icon:(0,ae.jsx)(j.Z,{}),color:"error",children:s.ZP.get("已禁用")})]})}},{title:s.ZP.get("定时规则"),dataIndex:"schedule",key:"schedule",width:150,sorter:{compare:function(e,t){return e.schedule.localeCompare(t.schedule)}}},{title:s.ZP.get("最后运行时长"),width:167,dataIndex:"last_running_time",key:"last_running_time",sorter:{compare:function(e,t){return e.last_running_time-t.last_running_time}},render:function(e,t){return t.last_running_time?(0,X.E)(t.last_running_time):"-"}},{title:s.ZP.get("最后运行时间"),dataIndex:"last_execution_time",key:"last_execution_time",width:141,sorter:{compare:function(e,t){return(e.last_execution_time||0)-(t.last_execution_time||0)}},render:function(e,t){var n=navigator.language||navigator.languages[0];return(0,ae.jsx)("span",{style:{display:"block"},children:t.last_execution_time?new Date(1e3*t.last_execution_time).toLocaleString(n,{hour12:!1}).replace(" 24:"," 00:"):"-"})}},{title:s.ZP.get("下次运行时间"),width:144,sorter:{compare:function(e,t){return e.nextRunTime-t.nextRunTime}},render:function(e,t){var n=navigator.language||navigator.languages[0];return t.nextRunTime.toLocaleString(n,{hour12:!1}).replace(" 24:"," 00:")}},{title:s.ZP.get("关联订阅"),width:185,render:function(e,t){return t.sub_id?(0,ae.jsx)(re,{service:function(){return V.W.get("".concat(M.Z.apiPrefix,"subscriptions/").concat(t.sub_id))},options:{ready:null==t?void 0:t.sub_id,cacheKey:t.sub_id}}):"-"}},{title:s.ZP.get("操作"),key:"action",width:140,fixed:n?void 0:"right",render:function(e,t,n){return(0,ae.jsxs)(p.Z,{size:"middle",children:[t.status===te.CrontabStatus.idle&&(0,ae.jsx)("a",{onClick:function(e){e.stopPropagation(),Rt(t,n)},children:s.ZP.get("运行")}),t.status!==te.CrontabStatus.idle&&(0,ae.jsx)("a",{onClick:function(e){e.stopPropagation(),It(t,n)},children:s.ZP.get("停止")}),(0,ae.jsx)("a",{onClick:function(e){e.stopPropagation(),qe(c()(c()({},t),{},{timestamp:Date.now()}))},children:s.ZP.get("日志")}),(0,ae.jsx)(Et,{record:t,index:n},"more")]})}}],l=(0,u.useState)([]),d=o()(l,2),g=d[0],q=d[1],N=(0,u.useState)(!0),B=o()(N,2),R=B[0],D=B[1],z=(0,u.useState)(!1),ne=o()(z,2),ie=ne[0],se=ne[1],ue=(0,u.useState)(!1),de=o()(ue,2),ge=de[0],fe=de[1],pe=(0,u.useState)(),me=o()(pe,2),he=me[0],Ze=me[1],ve=(0,u.useState)(""),xe=o()(ve,2),Pe=xe[0],be=xe[1],ye=(0,u.useState)(!1),we=o()(ye,2),je=we[0],ke=we[1],Ce=(0,u.useState)(),Se=o()(Ce,2),_e=Se[0],qe=Se[1],Ne=(0,u.useState)([]),Be=o()(Ne,2),Re=Be[0],Ie=Be[1],Oe=(0,u.useState)({}),Ee=o()(Oe,2),De=Ee[0],ze=Ee[1],We=(0,u.useState)(),Te=o()(We,2),Fe=Te[0],Le=Te[1],Me=(0,u.useState)(!1),He=o()(Me,2),Ve=He[0],Ae=He[1],Ke=(0,u.useState)(),Ue=o()(Ke,2),Xe=Ue[0],$e=Ue[1],Ge=(0,u.useState)(""),Ye=o()(Ge,2),Qe=Ye[0],Je=Ye[1],et=(0,u.useState)(),tt=o()(et,2),nt=tt[0],it=tt[1],at=(0,u.useState)(!1),rt=o()(at,2),ot=rt[0],lt=rt[1],ct=(0,u.useState)(!1),st=o()(ct,2),ut=st[0],dt=st[1],gt=(0,u.useState)([]),ft=o()(gt,2),pt=ft[0],mt=ft[1],ht=(0,u.useState)([]),Zt=o()(ht,2),vt=Zt[0],xt=Zt[1],Pt=(0,u.useState)(!1),bt=o()(Pt,2),yt=bt[0],wt=bt[1],jt=(0,u.useRef)(null),kt=(0,Q.Z)(jt),Ct=(0,u.useState)(""),St=o()(Ct,2),_t=St[0],qt=St[1],Nt=function(e){var t=(0,J.FA)(e.command);if(Array.isArray(t)){var n=o()(t,2),i=n[0],a=n[1];$.history.push("/script?p=".concat(a,"&s=").concat(i))}else t&&(location.href=t)},Bt=function(){D(!0);var e=De.page,t=De.size,n=De.sorter,i=De.filters,a="".concat(M.Z.apiPrefix,"crons?searchValue=").concat(Pe,"&page=").concat(e,"&size=").concat(t,"&filters=").concat(JSON.stringify(i));n&&n.column&&n.order&&(a+="&sorter=".concat(JSON.stringify({field:n.column.key,type:"ascend"===n.order?"ASC":"DESC"}))),Fe&&(a+="&queryString=".concat(JSON.stringify({filters:Fe.filters,sorts:Fe.sorts,filterRelation:Fe.filterRelation||"and"}))),V.W.get(a).then((function(e){var t=e.code,n=e.data;if(200===t){var i=n.data,a=n.total;q(i.map((function(e){return c()(c()({},e),{},{nextRunTime:(0,J.n$)(e.schedule)})}))),it(a)}})).finally((function(){return D(!1)}))},Rt=function(e,t){m.Z.confirm({title:s.ZP.get("确认运行"),content:(0,ae.jsxs)(ae.Fragment,{children:[s.ZP.get("确认运行定时任务")," ",(0,ae.jsx)(oe,{style:{wordBreak:"break-all"},type:"warning",children:e.name})," ",s.ZP.get("吗")]}),onOk:function(){V.W.put("".concat(M.Z.apiPrefix,"crons/run"),[e.id]).then((function(t){var n=t.code;t.data;if(200===n){var i=a()(g),r=i.findIndex((function(t){return t.id===e.id}));-1!==r&&(i.splice(r,1,c()(c()({},e),{},{status:te.CrontabStatus.running})),q(i))}}))},onCancel:function(){console.log("Cancel")}})},It=function(e,t){m.Z.confirm({title:s.ZP.get("确认停止"),content:(0,ae.jsxs)(ae.Fragment,{children:[s.ZP.get("确认停止定时任务")," ",(0,ae.jsx)(oe,{style:{wordBreak:"break-all"},type:"warning",children:e.name})," ",s.ZP.get("吗")]}),onOk:function(){V.W.put("".concat(M.Z.apiPrefix,"crons/stop"),[e.id]).then((function(t){var n=t.code;t.data;if(200===n){var i=a()(g),r=i.findIndex((function(t){return t.id===e.id}));-1!==r&&(i.splice(r,1,c()(c()({},e),{},{pid:null,status:te.CrontabStatus.idle})),q(i))}}))},onCancel:function(){console.log("Cancel")}})},Ot=function(e){return[{label:s.ZP.get("编辑"),key:"edit",icon:(0,ae.jsx)(k.Z,{})},{label:1===e.isDisabled?s.ZP.get("启用"):s.ZP.get("禁用"),key:"enableOrDisable",icon:1===e.isDisabled?(0,ae.jsx)(C.Z,{}):(0,ae.jsx)(S.Z,{})},{label:s.ZP.get("删除"),key:"delete",icon:(0,ae.jsx)(_.Z,{})},{label:1===e.isPinned?s.ZP.get("取消置顶"):s.ZP.get("置顶"),key:"pinOrUnPin",icon:1===e.isPinned?(0,ae.jsx)(S.Z,{}):(0,ae.jsx)(I,{})}]},Et=function(e){var t=e.record,n=e.index;return(0,ae.jsx)(Z.Z,{placement:"bottomRight",trigger:["click"],menu:{items:Ot(t),onClick:function(e){var i=e.key;e.domEvent.stopPropagation(),Dt(i,t,n)}},children:(0,ae.jsx)("a",{onClick:function(e){return e.stopPropagation()},children:(0,ae.jsx)(O.Z,{})})})},Dt=function(e,t,n){switch(e){case"edit":!function(e,t){Ze(e),se(!0)}(t);break;case"enableOrDisable":!function(e,t){m.Z.confirm({title:"确认".concat(1===e.isDisabled?s.ZP.get("启用"):s.ZP.get("禁用")),content:(0,ae.jsxs)(ae.Fragment,{children:[s.ZP.get("确认"),1===e.isDisabled?s.ZP.get("启用"):s.ZP.get("禁用"),s.ZP.get("定时任务")," ",(0,ae.jsx)(oe,{style:{wordBreak:"break-all"},type:"warning",children:e.name})," ",s.ZP.get("吗")]}),onOk:function(){V.W.put("".concat(M.Z.apiPrefix,"crons/").concat(1===e.isDisabled?"enable":"disable"),[e.id]).then((function(t){var n=t.code;if(t.data,200===n){var i=1===e.isDisabled?0:1,r=a()(g),o=r.findIndex((function(t){return t.id===e.id}));-1!==o&&(r.splice(o,1,c()(c()({},e),{},{isDisabled:i})),q(r))}}))},onCancel:function(){console.log("Cancel")}})}(t);break;case"delete":!function(e,t){m.Z.confirm({title:s.ZP.get("确认删除"),content:(0,ae.jsxs)(ae.Fragment,{children:[s.ZP.get("确认删除定时任务")," ",(0,ae.jsx)(oe,{style:{wordBreak:"break-all"},type:"warning",children:e.name})," ",s.ZP.get("吗")]}),onOk:function(){V.W.delete("".concat(M.Z.apiPrefix,"crons"),{data:[e.id]}).then((function(t){var n=t.code;if(t.data,200===n){h.ZP.success(s.ZP.get("删除成功"));var i=a()(g),r=i.findIndex((function(t){return t.id===e.id}));-1!==r&&(i.splice(r,1),q(i))}}))},onCancel:function(){console.log("Cancel")}})}(t);break;case"pinOrUnPin":!function(e,t){m.Z.confirm({title:"确认".concat(1===e.isPinned?s.ZP.get("取消置顶"):s.ZP.get("置顶")),content:(0,ae.jsxs)(ae.Fragment,{children:[s.ZP.get("确认"),1===e.isPinned?s.ZP.get("取消置顶"):s.ZP.get("置顶"),s.ZP.get("定时任务")," ",(0,ae.jsx)(oe,{style:{wordBreak:"break-all"},type:"warning",children:e.name})," ",s.ZP.get("吗")]}),onOk:function(){V.W.put("".concat(M.Z.apiPrefix,"crons/").concat(1===e.isPinned?"unpin":"pin"),[e.id]).then((function(t){var n=t.code;if(t.data,200===n){var i=1===e.isPinned?0:1,r=a()(g),o=r.findIndex((function(t){return t.id===e.id}));-1!==o&&(r.splice(o,1,c()(c()({},e),{},{isPinned:i})),q(r))}}))},onCancel:function(){console.log("Cancel")}})}(t)}},zt={selectedRowKeys:Re,onChange:function(e){Ie(e)}},Wt=function(e){m.Z.confirm({title:"确认".concat(te.OperationName[e]),content:(0,ae.jsxs)(ae.Fragment,{children:[s.ZP.get("确认"),te.OperationName[e],s.ZP.get("选中的定时任务吗")]}),onOk:function(){V.W.put("".concat(M.Z.apiPrefix,"crons/").concat(te.OperationPath[e]),Re).then((function(e){var t=e.code;e.data;200===t&&Bt()}))},onCancel:function(){console.log("Cancel")}})};(0,u.useEffect)((function(){_e&&(localStorage.setItem("logCron",_e.id),ke(!0))}),[_e]),(0,u.useEffect)((function(){ze(c()(c()({},De),{},{page:1}))}),[Pe]),(0,u.useEffect)((function(){De.page&&De.size&&Bt(),Fe&&Fe.id&&qt(Fe.id)}),[De,Fe]),(0,u.useEffect)((function(){if(Fe&&vt&&vt.length>0){var e=vt.slice(4).find((function(e){return e.id===Fe.id}));wt(!!e)}}),[Fe,vt]),(0,u.useEffect)((function(){Ft()}),[]);var Tt={onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),function(e){switch(e){case"new":lt(!0);break;case"manage":dt(!0);break;default:Lt(e)}}(t)},items:[].concat(a()(a()(vt).slice(4).map((function(e){return{label:(0,ae.jsxs)(p.Z,{style:{display:"flex",justifyContent:"space-between"},children:[(0,ae.jsx)("span",{children:e.name}),(null==Fe?void 0:Fe.id)===e.id&&(0,ae.jsx)(E.Z,{style:{color:"#1890ff"}})]}),key:e.id,icon:(0,ae.jsx)(W,{})}}))),[{type:"divider"},{label:s.ZP.get("创建视图"),key:"new",icon:(0,ae.jsx)(T.Z,{})},{label:s.ZP.get("视图管理"),key:"manage",icon:(0,ae.jsx)(F.Z,{})}])},Ft=function(){D(!0),V.W.get("".concat(M.Z.apiPrefix,"crons/views")).then((function(e){var t=e.code,n=e.data;if(200===t){mt(n);var i=n.filter((function(e){return!e.isDisabled})).map((function(e){return c()(c()({},e),{},{name:"全部任务"===e.name?s.ZP.get("全部任务"):e.name})}));xt(i),ze({page:1,size:parseInt(localStorage.getItem("pageSize")||"20"),sorter:{},filters:{}}),Le(c()({},i[0]))}})).finally((function(){D(!1)}))},Lt=function(e){var t=vt.find((function(t){return t.id==e}));Ie([]),ze(c()(c()({},De),{},{page:1})),Le(t||null)},Mt=(0,ee.u)((function(){return{scroll:{y:kt}}}),[kt]),Ht=o()(Mt,1)[0];return(0,ae.jsxs)(H.ZP,{className:"ql-container-wrapper crontab-wrapper ql-container-wrapper-has-tab",title:s.ZP.get("定时任务"),extra:[(0,ae.jsx)(ce,{placeholder:s.ZP.get("请输入名称或者关键词"),style:{width:"auto"},enterButton:!0,allowClear:!0,loading:R,value:Qe,onChange:function(e){return Je(e.target.value)},onSearch:function(e){be(e.trim())}}),(0,ae.jsx)(v.Z,{type:"primary",onClick:function(){return Ze(null),void se(!0)},children:s.ZP.get("创建任务")},"2")],header:{style:t},children:[(0,ae.jsx)(x.Z,{defaultActiveKey:"all",size:"small",activeKey:_t,tabPosition:"top",className:"crontab-view ".concat(yt?"more-active":""),tabBarExtraContent:(0,ae.jsx)(Z.Z,{menu:Tt,trigger:["click"],overlayStyle:{minWidth:200},children:(0,ae.jsxs)("div",{className:"view-more ".concat(yt?"active":""),children:[(0,ae.jsxs)(p.Z,{children:[s.ZP.get("更多"),(0,ae.jsx)(L.Z,{})]}),(0,ae.jsx)("div",{className:"ant-tabs-ink-bar ant-tabs-ink-bar-animated"})]})}),onTabClick:Lt,items:a()(a()(vt).slice(0,4).map((function(e){return{key:e.id,label:e.name}})))}),(0,ae.jsxs)("div",{ref:jt,children:[Re.length>0&&(0,ae.jsxs)("div",{style:{marginBottom:16},children:[(0,ae.jsx)(v.Z,{type:"primary",style:{marginBottom:5},onClick:function(){m.Z.confirm({title:s.ZP.get("确认删除"),content:(0,ae.jsx)(ae.Fragment,{children:s.ZP.get("确认删除选中的定时任务吗")}),onOk:function(){V.W.delete("".concat(M.Z.apiPrefix,"crons"),{data:Re}).then((function(e){var t=e.code;e.data;200===t&&(h.ZP.success(s.ZP.get("批量删除成功")),Ie([]),Bt())}))},onCancel:function(){console.log("Cancel")}})},children:s.ZP.get("批量删除")}),(0,ae.jsx)(v.Z,{type:"primary",onClick:function(){return Wt(0)},style:{marginLeft:8,marginBottom:5},children:s.ZP.get("批量启用")}),(0,ae.jsx)(v.Z,{type:"primary",onClick:function(){return Wt(1)},style:{marginLeft:8,marginRight:8},children:s.ZP.get("批量禁用")}),(0,ae.jsx)(v.Z,{type:"primary",style:{marginRight:8},onClick:function(){return Wt(2)},children:s.ZP.get("批量运行")}),(0,ae.jsx)(v.Z,{type:"primary",onClick:function(){return Wt(3)},children:s.ZP.get("批量停止")}),(0,ae.jsx)(v.Z,{type:"primary",onClick:function(){return Wt(4)},style:{marginLeft:8,marginRight:8},children:s.ZP.get("批量置顶")}),(0,ae.jsx)(v.Z,{type:"primary",onClick:function(){return Wt(5)},style:{marginLeft:8,marginRight:8},children:s.ZP.get("批量取消置顶")}),(0,ae.jsx)(v.Z,{type:"primary",onClick:function(){return fe(!0)},style:{marginLeft:8,marginRight:8},children:s.ZP.get("批量修改标签")}),(0,ae.jsxs)("span",{style:{marginLeft:8},children:[s.ZP.get("已选择"),(0,ae.jsx)("a",{children:null==Re?void 0:Re.length}),s.ZP.get("项")]})]}),(0,ae.jsx)(P.Z,{columns:r,pagination:{current:De.page,pageSize:De.size,showSizeChanger:!0,simple:n,total:nt,showTotal:function(e,t){return"第 ".concat(t[0],"-").concat(t[1]," 条/总共 ").concat(e," 条")},pageSizeOptions:[10,20,50,100,200,500,nt||1e4].sort((function(e,t){return e-t}))},dataSource:g,rowKey:"id",size:"middle",scroll:{x:1200,y:kt},loading:R,rowSelection:zt,rowClassName:function(e,t){return e.isPinned?"pinned-cron cron":"cron"},onChange:function(e,t,n){var i=e.current,a=e.pageSize;ze({page:i,size:a,sorter:n,filters:t}),localStorage.setItem("pageSize",String(a))},components:n||De.size<50?void 0:Ht})]}),(0,ae.jsx)(K.default,{visible:je,handleCancel:function(){var e;e=_e,V.W.get("".concat(M.Z.apiPrefix,"crons/").concat(e.id)).then((function(t){var n=t.code,i=t.data;if(200===n){var r=g.findIndex((function(t){return t.id===e.id})),o=a()(g);i.nextRunTime=(0,J.n$)(i.schedule),-1!==r&&(o.splice(r,1,c()(c()({},e),i)),q(o))}})).finally((function(){return D(!1)})),ke(!1)},cron:_e}),(0,ae.jsx)(A.default,{visible:ie,handleCancel:function(){se(!1),Bt()},cron:he}),(0,ae.jsx)(A.CronLabelModal,{visible:ge,handleCancel:function(e){fe(!1),e&&Bt()},ids:Re}),(0,ae.jsx)(U.default,{visible:Ve,handleCancel:function(){Ae(!1)},cron:Xe,theme:i,isPhone:n}),(0,ae.jsx)(G.default,{visible:ot,handleCancel:function(e){lt(!1),Ft()}}),(0,ae.jsx)(Y.default,{cronViews:pt,visible:ut,handleCancel:function(){dt(!1)},cronViewChange:function(e){Ft()}})]})}},42792:function(e,t,n){"use strict";n.r(t);var i=n(54306),a=n.n(i),r=n(88265),o=n(63313),l=n(89065),c=n(84163),s=n(24378),u=n(95176),d=n(5558),g=n(65601),f=n(38101),p=n(91796),m=n(82428),h=n(11527);l.Z.Countdown;t.default=function(e){var t=e.cron,n=e.handleCancel,i=e.visible,l=e.data,Z=e.logUrl,v=(0,o.useState)(r.ZP.get("启动中...")),x=a()(v,2),P=x[0],b=x[1],y=(0,o.useState)(!0),w=a()(y,2),j=w[0],k=w[1],C=(0,o.useState)(!0),S=a()(C,2),_=S[0],q=S[1],N=(0,o.useState)(!1),B=a()(N,2),R=B[0],I=B[1],O=(0,o.useRef)({value:0,down:!0}),E=function e(n){n&&k(!0),u.W.get(Z||"".concat(d.Z.apiPrefix,"crons/").concat(t.id,"/log")).then((function(n){var i=n.code,a=n.data;if(200===i&&localStorage.getItem("logCron")===String(t.id)&&a!==P){var o=a;b(o||r.ZP.get("暂无日志"));var l=Boolean(o&&!(0,m.x$)(o)&&!o.includes("任务未运行"));q(l),l&&(D(),setTimeout((function(){e()}),2e3))}})).finally((function(){n&&k(!1)}))},D=function(){O.current.down&&setTimeout((function(){document.querySelector("#log-flag").scrollIntoView({behavior:"smooth"})}),600)},z=function(){localStorage.removeItem("logCron"),n()};return(0,o.useEffect)((function(){t&&t.id&&i&&E(!0)}),[t,i]),(0,o.useEffect)((function(){l&&b(l)}),[l]),(0,o.useEffect)((function(){I(document.body.clientWidth<768)}),[]),(0,h.jsx)(c.Z,{title:(0,h.jsxs)(h.Fragment,{children:[(_||j)&&(0,h.jsx)(g.Z,{spin:!0}),!_&&!j&&(0,h.jsx)(f.Z,{}),(0,h.jsx)("span",{style:{marginLeft:5},children:t&&t.name})]}),open:i,centered:!0,className:"log-modal",forceRender:!0,onOk:function(){return z()},onCancel:function(){return z()},footer:[(0,h.jsx)(s.Z,{type:"primary",onClick:function(){return z()},children:r.ZP.get("知道了")})],children:(0,h.jsxs)("div",{onScroll:function(e){var t=e.target.scrollTop;O.current.down&&(O.current={value:t,down:t>O.current.value})},className:"log-container",children:[j?(0,h.jsx)(p.Z,{}):(0,h.jsx)("pre",{style:R?{fontFamily:"Source Code Pro",zoom:.83}:{},children:P}),(0,h.jsx)("div",{id:"log-flag"})]})})}},8879:function(e,t,n){"use strict";n.r(t),n.d(t,{CronLabelModal:function(){return N},default:function(){return q}});var i=n(25359),a=n.n(i),r=n(57213),o=n.n(r),l=n(49811),c=n.n(l),s=n(54306),u=n.n(s),d=n(88265),g=n(63313),f=n(67393),p=n(9835),m=n(84163),h=n(22159),Z=n(24378),v=n(95176),x=n(5558),P=n(11186),b=n.n(P),y=n(93525),w=n.n(y),j=n(51704),k=n(8297),C=n(26839),S=n(11527),_=function(e){var t=e.value,n=e.onChange,i=(0,g.useState)(""),a=u()(i,2),r=a[0],o=a[1],l=(0,g.useState)(!1),c=u()(l,2),s=c[0],f=c[1],p=(0,g.useState)([]),m=u()(p,2),Z=m[0],v=m[1],x=(0,g.useRef)(),P=function(){r&&!Z.includes(r)&&(v([].concat(w()(Z),[r])),null==n||n([].concat(w()(Z),[r]))),f(!1),o("")},b=Z.map((function(e){var t=(0,S.jsx)(j.Z,{closable:!0,onClose:function(t){var i,a;t.preventDefault(),i=e,a=Z.filter((function(e){return e!==i})),v(a),null==n||n(a)},children:e});return(0,S.jsx)("span",{style:{display:"inline-block",marginBottom:8},children:t},e)}));return(0,g.useEffect)((function(){s&&x&&x.current.focus()}),[s]),(0,g.useEffect)((function(){t&&v(t)}),[t]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(k.Z,{enter:{scale:.8,opacity:0,type:"from",duration:100},leave:{opacity:0,width:0,scale:0,duration:200},appear:!1,children:b}),s&&(0,S.jsx)(h.Z,{ref:x,type:"text",size:"small",style:{width:78},value:r,onChange:function(e){o(e.target.value)},onBlur:P,onPressEnter:P}),!s&&(0,S.jsxs)(j.Z,{onClick:function(){f(!0)},style:{borderStyle:"dashed",cursor:"pointer"},children:[(0,S.jsx)(C.Z,{})," ",d.ZP.get("新建")]})]})},q=function(e){var t=e.cron,n=e.handleCancel,i=e.visible,r=f.Z.useForm(),l=u()(r,1)[0],s=(0,g.useState)(!1),Z=u()(s,2),P=Z[0],y=Z[1],w=function(){var e=c()(a()().mark((function e(i){var r,l,c,s,u;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),r=t?"put":"post",l=o()({},i),t&&(l.id=t.id),e.prev=4,e.next=7,v.W[r]("".concat(x.Z.apiPrefix,"crons"),l);case 7:c=e.sent,s=c.code,u=c.data,200===s&&(p.ZP.success(t?d.ZP.get("更新任务成功"):d.ZP.get("创建任务成功")),n(u)),y(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),y(!1);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,g.useEffect)((function(){l.resetFields()}),[t,i]),(0,S.jsx)(m.Z,{title:t?d.ZP.get("编辑任务"):d.ZP.get("创建任务"),open:i,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then((function(e){w(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return n()},confirmLoading:P,children:(0,S.jsxs)(f.Z,{form:l,layout:"vertical",name:"form_in_modal",initialValues:t,children:[(0,S.jsx)(f.Z.Item,{name:"name",label:d.ZP.get("名称"),children:(0,S.jsx)(h.Z,{placeholder:d.ZP.get("请输入任务名称")})}),(0,S.jsx)(f.Z.Item,{name:"command",label:d.ZP.get("命令/脚本"),rules:[{required:!0,whitespace:!0}],children:(0,S.jsx)(h.Z.TextArea,{rows:4,autoSize:{minRows:1,maxRows:5},placeholder:d.ZP.get("支持输入脚本路径/任意系统可执行命令/task 脚本路径")})}),(0,S.jsx)(f.Z.Item,{name:"schedule",label:d.ZP.get("定时规则"),rules:[{required:!0},{validator:function(e,t){return!t||b().parseExpression(t).hasNext()?Promise.resolve():Promise.reject(d.ZP.get("Cron表达式格式有误"))}}],children:(0,S.jsx)(h.Z,{placeholder:d.ZP.get("秒(可选) 分 时 天 月 周")})}),(0,S.jsx)(f.Z.Item,{name:"labels",label:d.ZP.get("标签"),children:(0,S.jsx)(_,{})})]})})},N=function(e){var t=e.ids,n=e.handleCancel,i=e.visible,r=f.Z.useForm(),o=u()(r,1)[0],l=(0,g.useState)(!1),s=u()(l,2),h=s[0],P=s[1],b=function(){var e=c()(a()().mark((function e(i){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.validateFields().then(function(){var e=c()(a()().mark((function e(r){var o,l,c;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),o={ids:t,labels:r.labels},e.prev=2,e.next=5,v.W[i]("".concat(x.Z.apiPrefix,"crons/labels"),o);case 5:l=e.sent,c=l.code,l.data,200===c&&(p.ZP.success("post"===i?d.ZP.get("添加Labels成功"):d.ZP.get("删除Labels成功")),n(!0)),P(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),P(!1);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Validate Failed:",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){o.resetFields()}),[t,i]);var y=[(0,S.jsx)(Z.Z,{onClick:function(){return n(!1)},children:d.ZP.get("取消")}),(0,S.jsx)(Z.Z,{type:"primary",danger:!0,onClick:function(){return b("delete")},children:d.ZP.get("删除")}),(0,S.jsx)(Z.Z,{type:"primary",onClick:function(){return b("post")},children:d.ZP.get("添加")})];return(0,S.jsx)(m.Z,{title:d.ZP.get("批量修改标签"),open:i,footer:y,centered:!0,maskClosable:!1,forceRender:!0,onCancel:function(){return n(!1)},confirmLoading:h,children:(0,S.jsx)(f.Z,{form:o,layout:"vertical",name:"form_in_label_modal",children:(0,S.jsx)(f.Z.Item,{name:"labels",label:d.ZP.get("标签"),children:(0,S.jsx)(_,{})})})})}},33538:function(e,t,n){"use strict";n.r(t),n.d(t,{CrontabStatus:function(){return i},OperationName:function(){return a},OperationPath:function(){return r}});var i=function(e){return e[e.running=0]="running",e[e.queued=.5]="queued",e[e.idle=1]="idle",e[e.disabled=2]="disabled",e}({}),a=function(e){return e[e["启用"]=0]="启用",e[e["禁用"]=1]="禁用",e[e["运行"]=2]="运行",e[e["停止"]=3]="停止",e[e["置顶"]=4]="置顶",e[e["取消置顶"]=5]="取消置顶",e}({}),r=function(e){return e[e.enable=0]="enable",e[e.disable=1]="disable",e[e.run=2]="run",e[e.stop=3]="stop",e[e.pin=4]="pin",e[e.unpin=5]="unpin",e}({})},74714:function(e,t,n){"use strict";n.r(t);var i=n(12342),a=n.n(i),r=n(25359),o=n.n(r),l=n(57213),c=n.n(l),s=n(49811),u=n.n(s),d=n(54306),g=n.n(d),f=n(88265),p=n(63313),m=n(67393),h=n(28756),Z=n(84163),v=n(22159),x=n(24378),P=n(2947),b=n(95176),y=n(5558),w=n(32320),j=n(26839),k=n(86755),C=n(33538),S=n(19631),_=n(11527),q=["key","name"],N=["key","name"],B=[{name:f.ZP.get("命令"),value:"command"},{name:f.ZP.get("名称"),value:"name"},{name:f.ZP.get("定时规则"),value:"schedule"},{name:f.ZP.get("状态"),value:"status",onlySelect:!0},{name:f.ZP.get("标签"),value:"labels"},{name:f.ZP.get("订阅"),value:"sub_id",onlySelect:!0}],R={Reg:"",NotReg:"",In:"select",Nin:"select"},I=[{name:f.ZP.get("包含"),value:"Reg"},{name:f.ZP.get("不包含"),value:"NotReg"},{name:f.ZP.get("属于"),value:"In",type:"select"},{name:f.ZP.get("不属于"),value:"Nin",type:"select"}],O=[{name:f.ZP.get("顺序"),value:"ASC"},{name:f.ZP.get("倒序"),value:"DESC"}],E=function(e){return e.and="且",e.or="或",e}(E||{});t.default=function(e){var t=e.view,n=e.handleCancel,i=e.visible,r=m.Z.useForm(),l=g()(r,1)[0],s=(0,p.useState)(!1),d=g()(s,2),D=d[0],z=d[1],W=(0,p.useState)("and"),T=g()(W,2),F=T[0],L=T[1],M=m.Z.useWatch("filters",l),H=(0,S.Z)((function(){return b.W.get("".concat(y.Z.apiPrefix,"subscriptions"))}),{cacheKey:"subscriptions"}).data,V={status:[{name:f.ZP.get("运行中"),value:C.CrontabStatus.running},{name:f.ZP.get("空闲中"),value:C.CrontabStatus.idle},{name:f.ZP.get("已禁用"),value:C.CrontabStatus.disabled}],sub_id:null==H?void 0:H.data.map((function(e){return{name:e.name,value:e.id}}))},A=function(){var e=u()(o()().mark((function e(i){var a,r,l,s;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),i.filterRelation=F,a=t?"put":"post",e.prev=3,e.next=6,b.W[a]("".concat(y.Z.apiPrefix,"crons/views"),t?c()(c()({},i),{},{id:t.id}):i);case 6:r=e.sent,l=r.code,s=r.data,200===l&&n(s),z(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),z(!1);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){t||l.resetFields(),l.setFieldsValue(t||{filters:[{property:"command",operation:"Reg"}]})}),[t,i]);var K=(0,_.jsx)(h.Z,{style:{width:120},children:I.map((function(e){return(0,_.jsx)(h.Z.Option,{value:e.value,children:e.name},e.name)}))}),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.jsx)(h.Z,{style:t,children:e.map((function(e){return(0,_.jsx)(h.Z.Option,{value:e.value,children:e.name},e.name)}))})},X=(0,_.jsx)(h.Z,{style:{width:80},children:O.map((function(e){return(0,_.jsx)(h.Z.Option,{value:e.value,children:e.name},e.name)}))});return(0,_.jsx)(Z.Z,{title:t?f.ZP.get("编辑视图"):f.ZP.get("创建视图"),open:i,forceRender:!0,width:580,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then((function(e){A(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return n()},confirmLoading:D,children:(0,_.jsxs)(m.Z,{form:l,layout:"vertical",name:"env_modal",children:[(0,_.jsx)(m.Z.Item,{name:"name",label:f.ZP.get("视图名称"),rules:[{required:!0,message:f.ZP.get("请输入视图名称")}],children:(0,_.jsx)(v.Z,{placeholder:f.ZP.get("请输入视图名称")})}),(0,_.jsx)(m.Z.List,{name:"filters",children:function(e,t){var n=t.add,i=t.remove;return(0,_.jsxs)("div",{style:{position:"relative"},className:"view-filters-container ".concat(e.length>1?"active":""),children:[e.length>1&&(0,_.jsx)("div",{style:{position:"absolute",width:50,borderRadius:10,border:"1px solid rgb(190, 220, 255)",borderRight:"none",height:56*(e.length-1),top:46,left:15},children:(0,_.jsx)(x.Z,{type:"primary",size:"small",style:{position:"absolute",top:"50%",translate:"-50% -50%",padding:"0 3px",cursor:"pointer"},onClick:function(){L("and"===F?"or":"and")},children:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{children:E[F]}),(0,_.jsx)(k.Z,{type:"ql-icon-d-caret"})]})})}),(0,_.jsxs)("div",{children:[e.map((function(e){var t,n,r=e.key,o=e.name,l=a()(e,q);return(0,_.jsx)(m.Z.Item,{label:0===o?f.ZP.get("筛选条件"):"",style:{marginBottom:0},required:!0,className:"filter-item",children:(0,_.jsxs)(P.Z,{className:"view-create-modal-filters",align:"baseline",children:[(0,_.jsx)(m.Z.Item,c()(c()({},l),{},{name:[o,"property"],rules:[{required:!0}],children:U(B,{width:120})})),(0,_.jsx)(m.Z.Item,c()(c()({},l),{},{name:[o,"operation"],rules:[{required:!0}],children:K})),(0,_.jsx)(m.Z.Item,c()(c()({},l),{},{name:[o,"value"],rules:[{required:!0,message:f.ZP.get("请输入内容")}],children:"select"===R[null==M?void 0:M[o].operation]?(t=null==M?void 0:M[o].property,(0,_.jsx)(h.Z,{mode:"tags",allowClear:!0,placeholder:f.ZP.get("输入后回车增加自定义选项"),children:null===(n=V[t])||void 0===n?void 0:n.map((function(e){return(0,_.jsx)(h.Z.Option,{value:e.value,children:e.name},e.name)}))})):(0,_.jsx)(v.Z,{placeholder:f.ZP.get("请输入内容")})})),0!==o&&(0,_.jsx)(w.Z,{onClick:function(){return i(o)}})]})},r)})),(0,_.jsx)(m.Z.Item,{children:(0,_.jsxs)("a",{onClick:function(){return n({property:"command",operation:"Reg"})},children:[(0,_.jsx)(j.Z,{}),f.ZP.get("新增筛选条件")]})})]})]})}}),(0,_.jsx)(m.Z.List,{name:"sorts",children:function(e,t){var n=t.add,i=t.remove;return(0,_.jsxs)("div",{style:{position:"relative"},className:"view-filters-container ".concat(e.length>1?"active":""),children:[e.length>1&&(0,_.jsx)("div",{style:{position:"absolute",width:50,borderRadius:10,border:"1px solid rgb(190, 220, 255)",borderRight:"none",height:56*(e.length-1),top:46,left:15},children:(0,_.jsx)(x.Z,{type:"primary",size:"small",style:{position:"absolute",top:"50%",translate:"-50% -50%",padding:"0 3px",cursor:"pointer"},children:(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("span",{children:E[F]})})})}),(0,_.jsxs)("div",{children:[e.map((function(e){var t=e.key,n=e.name,r=a()(e,N);return(0,_.jsx)(m.Z.Item,{label:0===n?f.ZP.get("排序方式"):"",style:{marginBottom:0},className:"filter-item",children:(0,_.jsxs)(P.Z,{className:"view-create-modal-sorts",align:"baseline",children:[(0,_.jsx)(m.Z.Item,c()(c()({},r),{},{name:[n,"property"],rules:[{required:!0}],children:U(B)})),(0,_.jsx)(m.Z.Item,c()(c()({},r),{},{name:[n,"type"],rules:[{required:!0}],children:X})),(0,_.jsx)(w.Z,{onClick:function(){return i(n)}})]})},t)})),(0,_.jsx)(m.Z.Item,{children:(0,_.jsxs)("a",{onClick:function(){return n({property:"command",type:"ASC"})},children:[(0,_.jsx)(j.Z,{}),f.ZP.get("新增排序方式")]})})]})]})}})]})})}},87421:function(e,t,n){"use strict";n.r(t);var i=n(93525),a=n.n(i),r=n(57213),o=n.n(r),l=n(54306),c=n.n(l),s=n(12342),u=n.n(s),d=n(88265),g=n(63313),f=n(92260),p=n(16861),m=n(2947),h=n(84163),Z=n(9835),v=n(24378),x=n(94674),P=n(95176),b=n(5558),y=n(32132),w=n(13740),j=n(18141),k=n(9058),C=n(33328),S=n(66255),_=n(74714),q=n(11527),N=["index","moveRow","className","style"],B=f.Z.Text,R="DragableBodyRow",I=function(e){var t=e.index,n=e.moveRow,i=e.className,a=e.style,r=u()(e,N),l=(0,g.useRef)(),s=(0,j.L)({accept:R,collect:function(e){var n=(e.getItem()||{}).index;return n===t?{}:{isOver:e.isOver(),dropClassName:n<t?" drop-over-downward":" drop-over-upward"}},drop:function(e){n(e.index,t)}}),d=c()(s,2),f=d[0],p=f.isOver,m=f.dropClassName,h=d[1],Z=(0,k.c)({type:R,item:{index:t},collect:function(e){return{isDragging:e.isDragging()}}});return h((0,c()(Z,2)[1])(l)),(0,q.jsx)("tr",o()({ref:l,className:"".concat(i).concat(p?m:""),style:o()({cursor:"move"},a)},r))};t.default=function(e){var t=e.cronViews,n=e.handleCancel,i=e.visible,r=e.cronViewChange,l=function(e){return j.filter((function(e){return!e.isDisabled})).length<=1&&!e.isDisabled},s=[{title:d.ZP.get("名称"),dataIndex:"name",key:"name",render:function(e){return"全部任务"===e?d.ZP.get("全部任务"):e}},{title:d.ZP.get("类型"),dataIndex:"type",key:"type",render:function(e){return 1===e?d.ZP.get("系统"):d.ZP.get("个人")}},{title:d.ZP.get("显示"),key:"isDisabled",dataIndex:"isDisabled",width:100,render:function(e,t,n){return(0,q.jsx)(p.Z,{disabled:l(t),checked:!t.isDisabled,onChange:function(e){return M(e,t,n)}})}},{title:d.ZP.get("操作"),key:"action",width:100,render:function(e,t,n){return 1!==t.type?(0,q.jsxs)(m.Z,{size:"middle",children:[(0,q.jsx)("a",{onClick:function(){return F(t,n)},children:(0,q.jsx)(y.Z,{})}),!l(t)&&(0,q.jsx)("a",{onClick:function(){return L(t,n)},children:(0,q.jsx)(w.Z,{})})]}):"-"}}],u=(0,g.useState)([]),f=c()(u,2),j=f[0],k=f[1],N=(0,g.useState)(!1),R=c()(N,2),O=R[0],E=R[1],D=(0,g.useState)(null),z=c()(D,2),W=z[0],T=z[1],F=function(e,t){T(e),E(!0)},L=function(e,t){h.Z.confirm({title:d.ZP.get("确认删除"),content:(0,q.jsxs)(q.Fragment,{children:[d.ZP.get("确认删除视图")," ",(0,q.jsx)(B,{style:{wordBreak:"break-all"},type:"warning",children:e.name})," ",d.ZP.get("吗")]}),onOk:function(){P.W.delete("".concat(b.Z.apiPrefix,"crons/views"),{data:[e.id]}).then((function(e){var t=e.code;e.data;200===t&&(Z.ZP.success(d.ZP.get("删除成功")),r())}))},onCancel:function(){console.log("Cancel")}})},M=function(e,t,n){P.W.put("".concat(b.Z.apiPrefix,"crons/views/").concat(e?"enable":"disable"),[t.id]).then((function(t){var i=t.code;t.data;if(200===i){var l=a()(j);l.splice(n,1,o()(o()({},j[n]),{},{isDisabled:!e})),k(l),r()}}))},H={body:{row:I}},V=(0,g.useCallback)((function(e,t){if(e!==t){var n=j[e];P.W.put("".concat(b.Z.apiPrefix,"crons/views/move"),{fromIndex:e,toIndex:t,id:n.id}).then((function(i){var l=i.code,c=i.data;if(200===l){var s=a()(j);s.splice(e,1),s.splice(t,0,o()(o()({},n),c)),k(s),r()}}))}}),[j]);return(0,g.useEffect)((function(){k(t)}),[t]),(0,q.jsxs)(h.Z,{title:d.ZP.get("视图管理"),open:i,centered:!0,width:620,onCancel:function(){return n()},className:"view-manage-modal",forceRender:!0,footer:!1,maskClosable:!1,children:[(0,q.jsx)(m.Z,{style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:(0,q.jsx)(v.Z,{type:"primary",onClick:function(){T(null),E(!0)},children:d.ZP.get("创建视图")},"2")}),(0,q.jsx)(C.W,{backend:S.PD,children:(0,q.jsx)(x.Z,{bordered:!0,columns:s,pagination:!1,dataSource:j,rowKey:"id",size:"middle",style:{marginBottom:20},components:H,onRow:function(e,t){return{index:t,moveRow:V}}})}),(0,q.jsx)(_.default,{view:W,visible:O,handleCancel:function(e){E(!1),r(e)}})]})}},5558:function(e,t,n){"use strict";var i=n(88265),a=window.__ENV__QlBaseUrl||"/";t.Z={siteName:i.ZP.get("青龙"),apiPrefix:"".concat(a,"api/"),authKey:"token",layouts:[{name:"primary",include:[/.*/],exclude:[/(\/(en|zh))*\/login/]}],i18n:{languages:[{key:"pt-br",title:"Português",flag:"/portugal.svg"},{key:"en",title:"English",flag:"/america.svg"},{key:"zh",title:i.ZP.get("中文"),flag:"/china.svg"}],defaultLanguage:"en"},scopes:[{name:i.ZP.get("定时任务"),value:"crons"},{name:i.ZP.get("环境变量"),value:"envs"},{name:i.ZP.get("订阅管理"),value:"subscriptions"},{name:i.ZP.get("配置文件"),value:"configs"},{name:i.ZP.get("脚本管理"),value:"scripts"},{name:i.ZP.get("日志管理"),value:"logs"},{name:i.ZP.get("依赖管理"),value:"dependencies"},{name:i.ZP.get("系统信息"),value:"system"}],scopesMap:{crons:i.ZP.get("定时任务"),envs:i.ZP.get("环境变量"),subscriptions:i.ZP.get("订阅管理"),configs:i.ZP.get("配置文件"),scripts:i.ZP.get("脚本管理"),logs:i.ZP.get("日志管理"),dependencies:i.ZP.get("依赖管理"),system:i.ZP.get("系统信息")},notificationModes:[{value:"gotify",label:"Gotify"},{value:"goCqHttpBot",label:"GoCqHttpBot"},{value:"serverChan",label:i.ZP.get("Server酱")},{value:"pushDeer",label:"PushDeer"},{value:"bark",label:"Bark"},{value:"telegramBot",label:i.ZP.get("Telegram机器人")},{value:"dingtalkBot",label:i.ZP.get("钉钉机器人")},{value:"weWorkBot",label:i.ZP.get("企业微信机器人")},{value:"weWorkApp",label:i.ZP.get("企业微信应用")},{value:"aibotk",label:i.ZP.get("智能微秘书")},{value:"iGot",label:"IGot"},{value:"pushPlus",label:"PushPlus"},{value:"chat",label:i.ZP.get("群晖chat")},{value:"email",label:i.ZP.get("邮箱")},{value:"lark",label:i.ZP.get("飞书机器人")},{value:"pushMe",label:"PushMe"},{value:"webhook",label:i.ZP.get("自定义通知")},{value:"closed",label:i.ZP.get("已关闭")}],notificationModeMap:{gotify:[{label:"gotifyUrl",tip:i.ZP.get("gotify的url地址，例如 https://push.example.de:8080"),required:!0},{label:"gotifyToken",tip:i.ZP.get("gotify的消息应用token码"),required:!0},{label:"gotifyPriority",tip:i.ZP.get("推送消息的优先级")}],chat:[{label:"chatUrl",tip:i.ZP.get("chat的url地址"),required:!0},{label:"chatToken",tip:i.ZP.get("chat的token码"),required:!0}],goCqHttpBot:[{label:"goCqHttpBotUrl",tip:i.ZP.get("推送到个人QQ: http://127.0.0.1/send_private_msg，群：http://127.0.0.1/send_group_msg"),required:!0},{label:"goCqHttpBotToken",tip:i.ZP.get("访问密钥"),required:!0},{label:"goCqHttpBotQq",tip:i.ZP.get("如果GOBOT_URL设置 /send_private_msg 则需要填入 user_id=个人QQ 相反如果是 /send_group_msg 则需要填入 group_id=QQ群"),required:!0}],serverChan:[{label:"serverChanKey",tip:i.ZP.get("Server酱SENDKEY"),required:!0}],pushDeer:[{label:"pushDeerKey",tip:i.ZP.get("PushDeer的Key，https://github.com/easychen/pushdeer"),required:!0},{label:"pushDeerUrl",tip:i.ZP.get("PushDeer的自架API endpoint，默认是 https://api2.pushdeer.com/message/push")}],bark:[{label:"barkPush",tip:i.ZP.get("Bark的信息IP/设备码，例如：https://api.day.app/XXXXXXXX"),required:!0},{label:"barkIcon",tip:i.ZP.get("BARK推送图标，自定义推送图标 (需iOS15或以上才能显示)")},{label:"barkSound",tip:i.ZP.get("BARK推送铃声，铃声列表去APP查看复制填写")},{label:"barkGroup",tip:i.ZP.get("BARK推送消息的分组，默认为qinglong")}],telegramBot:[{label:"telegramBotToken",tip:i.ZP.get("telegram机器人的token，例如：1077xxx4424:AAFjv0FcqxxxxxxgEMGfi22B4yh15R5uw"),required:!0},{label:"telegramBotUserId",tip:i.ZP.get("telegram用户的id，例如：129xxx206"),required:!0},{label:"telegramBotProxyHost",tip:i.ZP.get("代理IP")},{label:"telegramBotProxyPort",tip:i.ZP.get("代理端口")},{label:"telegramBotProxyAuth",tip:i.ZP.get("telegram代理配置认证参数，用户名与密码用英文冒号连接 user:password")},{label:"telegramBotApiHost",tip:i.ZP.get("telegram api自建的反向代理地址，默认tg官方api")}],dingtalkBot:[{label:"dingtalkBotToken",tip:i.ZP.get("钉钉机器人webhook token，例如：5a544165465465645d0f31dca676e7bd07415asdasd"),required:!0},{label:"dingtalkBotSecret",tip:i.ZP.get("密钥，机器人安全设置页面，加签一栏下面显示的SEC开头的字符串")}],weWorkBot:[{label:"weWorkBotKey",tip:i.ZP.get("企业微信机器人的webhook(详见文档 https://work.weixin.qq.com/api/doc/90000/90136/91770)，例如：693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa"),required:!0},{label:"weWorkOrigin",tip:i.ZP.get("企业微信代理地址")}],weWorkApp:[{label:"weWorkAppKey",tip:i.ZP.get("corpid、corpsecret、touser(注:多个成员ID使用|隔开)、agentid、消息类型(选填，不填默认文本消息类型) 注意用,号隔开(英文输入法的逗号)，例如：wwcfrs,B-76WERQ,qinglong,1000001,2COat"),required:!0},{label:"weWorkOrigin",tip:i.ZP.get("企业微信代理地址")}],aibotk:[{label:"aibotkKey",tip:i.ZP.get("密钥key，智能微秘书个人中心获取apikey，申请地址：https://wechat.aibotk.com/signup?from=ql"),required:!0},{label:"aibotkType",tip:i.ZP.get("发送的目标，群组或者好友"),required:!0,placeholder:i.ZP.get("请输入要发送的目标"),items:[{value:"room",label:i.ZP.get("群聊")},{value:"contact",label:i.ZP.get("好友")}]},{label:"aibotkName",tip:i.ZP.get("要发送的用户昵称或群名，如果目标是群，需要填群名，如果目标是好友，需要填好友昵称"),required:!0}],iGot:[{label:"iGotPushKey",tip:i.ZP.get("iGot的信息推送key，例如：https://push.hellyw.com/XXXXXXXX"),required:!0}],pushPlus:[{label:"pushPlusToken",tip:i.ZP.get("微信扫码登录后一对一推送或一对多推送下面的token(您的Token)，不提供PUSH_PLUS_USER则默认为一对一推送，参考 https://www.pushplus.plus/"),required:!0},{label:"pushPlusUser",tip:i.ZP.get("一对多推送的“群组编码”（一对多推送下面->您的群组(如无则创建)->群组编码，如果您是创建群组人。也需点击“查看二维码”扫描绑定，否则不能接受群组消息推送）")}],lark:[{label:"larkKey",tip:i.ZP.get("飞书群组机器人：https://www.feishu.cn/hc/zh-CN/articles/360024984973"),required:!0}],email:[{label:"emailService",tip:i.ZP.get("邮箱服务名称，比如126、163、Gmail、QQ等，支持列表https://nodemailer.com/smtp/well-known/"),required:!0},{label:"emailUser",tip:i.ZP.get("邮箱地址"),required:!0},{label:"emailPass",tip:i.ZP.get("邮箱SMTP授权码"),required:!0}],pushMe:[{label:"pushMeKey",tip:i.ZP.get("PushMe的Key，https://push.i-i.me/"),required:!0}],webhook:[{label:"webhookMethod",tip:i.ZP.get("请求方法"),required:!0,items:[{value:"GET"},{value:"POST"},{value:"PUT"}]},{label:"webhookContentType",tip:i.ZP.get("请求头Content-Type"),required:!0,items:[{value:"application/json"},{value:"multipart/form-data"},{value:"application/x-www-form-urlencoded"}]},{label:"webhookUrl",tip:i.ZP.get("请求链接以http或者https开头。url或者body中必须包含$title，$content可选，对应api内容的位置"),required:!0,placeholder:"https://xxx.cn/api?content=$title\n"},{label:"webhookHeaders",tip:i.ZP.get("请求头格式Custom-Header1: Header1，多个换行分割"),placeholder:"Custom-Header1: Header1\nCustom-Header2: Header2"},{label:"webhookBody",tip:i.ZP.get("请求体格式key1: value1，多个换行分割。url或者body中必须包含$title，$content可选，对应api内容的位置"),placeholder:"key1: $title\nkey2: $content"}]},documentTitleMap:{"/login":i.ZP.get("登录"),"/initialization":i.ZP.get("初始化"),"/crontab":i.ZP.get("定时任务"),"/env":i.ZP.get("环境变量"),"/subscription":i.ZP.get("订阅管理"),"/config":i.ZP.get("配置文件"),"/script":i.ZP.get("脚本管理"),"/diff":i.ZP.get("对比工具"),"/log":i.ZP.get("日志管理"),"/setting":i.ZP.get("系统设置"),"/error":i.ZP.get("错误日志"),"/dependence":i.ZP.get("依赖管理")},dependenceTypes:["nodejs","python3","linux"]}},80755:function(e,t,n){"use strict";function i(e){var t=1e3*e,n=Math.floor(t/864e5),i=t%864e5,a=Math.floor(i/36e5),r=i%36e5,o=Math.floor(r/6e4),l=r%6e4,c=Math.round(l/1e3)+"秒";return o>0&&(c=o+"分"+c),a>0&&(c=a+"小时"+c),n>0&&(c=n+"天"+c),c}n.d(t,{E:function(){return i}})},95176:function(e,t,n){"use strict";n.d(t,{W:function(){return m}});var i=n(25359),a=n.n(i),r=n(49811),o=n.n(r),l=n(88265),c=n(9835),s=n(5558),u=n(98074),d=n(73669);c.ZP.config({duration:2});var g=Date.now(),f=d.Z.create({timeout:6e4,params:{t:g}}),p=["/api/user/login","/open/auth/token","/api/user/two-factor/login","/api/system","/api/user/init","/api/user/notification/init"];f.interceptors.request.use((function(e){var t=localStorage.getItem(s.Z.authKey);return t&&!p.includes(e.url)?(e.headers.Authorization="Bearer ".concat(t),e):e})),f.interceptors.response.use(function(){var e=o()(a()().mark((function e(t){var n,i,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.status,![502,504].includes(n)){e.next=5;break}u.history.push("/error"),e.next=18;break;case 5:if(401!==n){e.next=9;break}"/login"!==u.history.location.pathname&&(localStorage.removeItem(s.Z.authKey),u.history.push("/login")),e.next=18;break;case 9:return e.prev=9,200!==(i=t.data).code&&(r=i.message||i.data)&&c.ZP.error({content:r,style:{maxWidth:500,margin:"0 auto"}}),e.abrupt("return",i);case 15:e.prev=15,e.t0=e.catch(9);case 17:case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){if(e.response){var t=e.response.data?e.response.data.message||e.message||e.response.data:e.response.statusText,n=e.response.status;[502,504].includes(n)?u.history.push("/error"):401===n?"/login"!==u.history.location.pathname&&(c.ZP.error(l.ZP.get("登录已过期，请重新登录")),localStorage.removeItem(s.Z.authKey),u.history.push("/login")):c.ZP.error({content:t,style:{maxWidth:500,margin:"0 auto"}})}else console.log(e.message);return Promise.reject(e)}));var m=f},82428:function(e,t,n){"use strict";n.d(t,{ZP:function(){return s},I1:function(){return g},w7:function(){return d},DY:function(){return f},FA:function(){return m},H$:function(){return Z},W9:function(){return u},x$:function(){return p},n$:function(){return h}});var i=n(93525),a=n.n(i),r=n(88265),o={".py":"python",".js":"javascript",".mjs":"javascript",".sh":"shell",".ts":"typescript"},l=n(11186),c=n.n(l);function s(){var e=navigator.userAgent.toLowerCase(),t=function(t){return t.test(e)},n=function(t){return(e.match(t)||[]).toString().replace(/[^0-9|_.]/g,"").replace(/_/g,".")},i="unknow";t(/windows|win32|win64|wow32|wow64/g)?i="windows":t(/macintosh|macintel/g)?i="macos":t(/x11/g)?i="linux":t(/android|adr/g)?i="android":t(/ios|iphone|ipad|ipod|iwatch/g)&&(i="ios");var a="unknow";"windows"===i?t(/windows nt 5.0|windows 2000/g)?a="2000":t(/windows nt 5.1|windows xp/g)?a="xp":t(/windows nt 5.2|windows 2003/g)?a="2003":t(/windows nt 6.0|windows vista/g)?a="vista":t(/windows nt 6.1|windows 7/g)?a="7":t(/windows nt 6.2|windows 8/g)?a="8":t(/windows nt 6.3|windows 8.1/g)?a="8.1":t(/windows nt 10.0|windows 10/g)&&(a="10"):"macos"===i?a=n(/os x [\d._]+/g):"android"===i?a=n(/android [\d._]+/g):"ios"===i&&(a=n(/os [\d._]+/g));var r="unknow";"windows"===i||"macos"===i||"linux"===i?r="desktop":("android"===i||"ios"===i||t(/mobile/g))&&(r="mobile");var o="unknow",l="unknow";t(/applewebkit/g)?(o="webkit",t(/edge/g)?l="edge":t(/opr/g)?l="opera":t(/chrome/g)?l="chrome":t(/safari/g)&&(l="safari")):t(/gecko/g)&&t(/firefox/g)?(o="gecko",l="firefox"):t(/presto/g)?(o="presto",l="opera"):t(/trident|compatible|msie/g)&&(o="trident",l="iexplore");var c="unknow";"webkit"===o?c=n(/applewebkit\/[\d._]+/g):"gecko"===o?c=n(/gecko\/[\d._]+/g):"presto"===o?c=n(/presto\/[\d._]+/g):"trident"===o&&(c=n(/trident\/[\d._]+/g));var s="unknow";"chrome"===l?s=n(/chrome\/[\d._]+/g):"safari"===l?s=n(/version\/[\d._]+/g):"firefox"===l?s=n(/firefox\/[\d._]+/g):"opera"===l?s=n(/opr\/[\d._]+/g):"iexplore"===l?s=n(/(msie [\d._]+)|(rv:[\d._]+)/g):"edge"===l&&(s=n(/edge\/[\d._]+/g));var u="none",d="unknow";t(/micromessenger/g)?(u="wechat",d=n(/micromessenger\/[\d._]+/g)):t(/qqbrowser/g)?(u="qq",d=n(/qqbrowser\/[\d._]+/g)):t(/ucbrowser/g)?(u="uc",d=n(/ucbrowser\/[\d._]+/g)):t(/qihu 360se/g)?u="360":t(/2345explorer/g)?(u="2345",d=n(/2345explorer\/[\d._]+/g)):t(/metasr/g)?u="sougou":t(/lbbrowser/g)?u="liebao":t(/maxthon/g)&&(u="maxthon",d=n(/maxthon\/[\d._]+/g));var g=Object.assign({engine:o,engineVs:c,platform:r,supporter:l,supporterVs:s,system:i,systemVs:a},"none"===u?{}:{shell:u,shellVs:d});return console.log("%c\n .d88b.  d888888b d8b   db  d888b  db       .d88b.  d8b   db  d888b  \n.8P  Y8.   `88'   888o  88 88' Y8b 88      .8P  Y8. 888o  88 88' Y8b \n88    88    88    88V8o 88 88      88      88    88 88V8o 88 88      \n88    88    88    88 V8o88 88  ooo 88      88    88 88 V8o88 88  ooo \n`8P  d8'   .88.   88  V888 88. ~8~ 88booo. `8b  d8' 88  V888 88. ~8~ \n `Y88'Y8 Y888888P VP   V8P  Y888P  Y88888P  `Y88P'  VP   V8P  Y888P  \n                                                                     \n                                                                     \n","color: blue;font-size: 14px;"),console.log("%c忘形雨笠烟蓑，知心牧唱樵歌。明月清风共我，闲人三个，从他今古消磨。\n","color: yellow;font-size: 18px;"),console.log("%c青龙运行环境:\n\n系统：".concat(g.system,"/").concat(g.systemVs,"\n浏览器：").concat(g.supporter,"/").concat(g.supporterVs,"\n内核：").concat(g.engine,"/").concat(g.engineVs),"color: green;font-size: 14px;font-weight: bold;"),g}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.extraHeight,n=e.target;void 0===t&&(t=99);var i=null,a=0;(i=n||document.querySelector(".ant-table-wrapper"))&&(a=i.getBoundingClientRect().top);var r=document.body.clientHeight-a-t;return r}function d(e,t){var n,i,a=window.URL||window.webkitURL||window,r=new Blob([t]),o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=a.createObjectURL(r),o.download=e,n=o,(i=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}function g(e,t,n){var i=a()(e),r=[];return function e(i){if(i)for(var a=0;a<(null==i?void 0:i.length);a++){if(t(i[a]))return n?void(i[a].children?i[a].children.unshift(n):i[a].children=[n]):void i.splice(a,1);i[a].children&&(r.push(i[a].key),e(i[a].children))}}(i),i}function f(e,t){var n;return function e(i){if(i)for(var a=0;a<(null==i?void 0:i.length);a++)t(i[a])?n=i[a]:i[a].children&&e(i[a].children)}(a()(e)),n}function p(e){return["　　　　　",r.ZP.get("执行结束")].some((function(t){return e.includes(t)}))}function m(e){var t=e.split(" ");if("repo"===t[1]||"raw"===t[1])return t[2];var n=t.find((function(e){return[".js",".ts",".sh",".py"].some((function(t){return e.endsWith(t)}))}));if(n){var i,a;n.startsWith("/ql/data/scripts")&&(n=n.replace("/ql/data/scripts/",""));var r=n.lastIndexOf("/");return r>=0?(a=n.slice(r+1),i=n.slice(0,r)):(a=n,i=""),[a,i]}}function h(e){try{var t=c().parseExpression(e);if(t)return t.next().toDate()}catch(e){}return new Date("1970")}function Z(e){var t=function(e){if(!e)return"";var t=e.split(".");return".".concat(t[t.length-1])}(e);return o[t]}},16861:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(60795),a=n(87807),r=n(24090),o=n(84875),l=n.n(o),c=n(17079),s=n(67725),u=n(63313),d=n(26230),g=n(25641),f=u.forwardRef((function(e,t){var n,i=e.prefixCls,r=void 0===i?"rc-switch":i,o=e.className,f=e.checked,p=e.defaultChecked,m=e.disabled,h=e.loadingIcon,Z=e.checkedChildren,v=e.unCheckedChildren,x=e.onClick,P=e.onChange,b=e.onKeyDown,y=(0,s.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),w=(0,d.Z)(!1,{value:f,defaultValue:p}),j=(0,c.Z)(w,2),k=j[0],C=j[1];function S(e,t){var n=k;return m||(C(n=e),null==P||P(n,t)),n}var _=l()(r,o,(n={},(0,a.Z)(n,"".concat(r,"-checked"),k),(0,a.Z)(n,"".concat(r,"-disabled"),m),n));return u.createElement("button",Object.assign({},y,{type:"button",role:"switch","aria-checked":k,disabled:m,className:_,ref:t,onKeyDown:function(e){e.which===g.Z.LEFT?S(!1,e):e.which===g.Z.RIGHT&&S(!0,e),null==b||b(e)},onClick:function(e){var t=S(!k,e);null==x||x(t,e)}}),h,u.createElement("span",{className:"".concat(r,"-inner")},k?Z:v))}));f.displayName="Switch";var p=f,m=n(82259),h=n(7893),Z=n(65189),v=n(1570),x=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n},P=u.forwardRef((function(e,t){var n,o=e.prefixCls,c=e.size,s=e.disabled,d=e.loading,g=e.className,f=void 0===g?"":g,P=x(e,["prefixCls","size","disabled","loading","className"]),b=u.useContext(m.E_),y=b.getPrefixCls,w=b.direction,j=u.useContext(Z.Z),k=u.useContext(h.Z),C=(null!=s?s:k)||d,S=y("switch",o),_=u.createElement("div",{className:"".concat(S,"-handle")},d&&u.createElement(r.Z,{className:"".concat(S,"-loading-icon")})),q=l()((n={},(0,a.Z)(n,"".concat(S,"-small"),"small"===(c||j)),(0,a.Z)(n,"".concat(S,"-loading"),d),(0,a.Z)(n,"".concat(S,"-rtl"),"rtl"===w),n),f);return u.createElement(v.Z,{insertExtraNode:!0},u.createElement(p,(0,i.Z)({},P,{prefixCls:S,className:q,disabled:C,ref:t,loadingIcon:_})))}));P.__ANT_SWITCH=!0;var b=P},38433:function(){}}]);