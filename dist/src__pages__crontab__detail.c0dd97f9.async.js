"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9558,5812],{75875:function(e,n,t){t.d(n,{iN:function(){return Z},R_:function(){return u}});var a=t(96299),r=t(28556),i=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function o(e){var n=e.r,t=e.g,r=e.b,i=(0,a.py)(n,t,r);return{h:360*i.h,s:i.s,v:i.v}}function c(e){var n=e.r,t=e.g,r=e.b;return"#".concat((0,a.vq)(n,t,r,!1))}function l(e,n,t){var a=t/100;return{r:(n.r-e.r)*a+e.r,g:(n.g-e.g)*a+e.g,b:(n.b-e.b)*a+e.b}}function s(e,n,t){var a;return(a=Math.round(e.h)>=60&&Math.round(e.h)<=240?t?Math.round(e.h)-2*n:Math.round(e.h)+2*n:t?Math.round(e.h)+2*n:Math.round(e.h)-2*n)<0?a+=360:a>=360&&(a-=360),a}function f(e,n,t){return 0===e.h&&0===e.s?e.s:((a=t?e.s-.16*n:4===n?e.s+.16:e.s+.05*n)>1&&(a=1),t&&5===n&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2)));var a}function d(e,n,t){var a;return(a=t?e.v+.05*n:e.v-.15*n)>1&&(a=1),Number(a.toFixed(2))}function u(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=[],a=(0,r.uA)(e),u=5;u>0;u-=1){var m=o(a),p=c((0,r.uA)({h:s(m,u,!0),s:f(m,u,!0),v:d(m,u,!0)}));t.push(p)}t.push(c(a));for(var v=1;v<=4;v+=1){var g=o(a),b=c((0,r.uA)({h:s(g,v),s:f(g,v),v:d(g,v)}));t.push(b)}return"dark"===n.theme?i.map((function(e){var a=e.index,i=e.opacity;return c(l((0,r.uA)(n.backgroundColor||"#141414"),(0,r.uA)(t[a]),100*i))})):t}var m=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];m.primary=m[5];var p=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];p.primary=p[5];var v=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];v.primary=v[5];var g=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];g.primary=g[5];var b=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];b.primary=b[5];var h=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];h.primary=h[5];var x=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];x.primary=x[5];var y=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];y.primary=y[5];var Z=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];Z.primary=Z[5];var C=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];C.primary=C[5];var j=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];j.primary=j[5];var P=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];P.primary=P[5];var w=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];w.primary=w[5];var k=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];k.primary=k[5];var N=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];N.primary=N[5];var S=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];S.primary=S[5];var E=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];E.primary=E[5];var O=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];O.primary=O[5];var T=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];T.primary=T[5];var R=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];R.primary=R[5];var M=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];M.primary=M[5];var _=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];_.primary=_[5];var I=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];I.primary=I[5];var A=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];A.primary=A[5];var z=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];z.primary=z[5];var H=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];H.primary=H[5]},57024:function(e,n){n.Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"}},43008:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(98037),r=t(75271),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},o=t(64720),c=function(e,n){return r.createElement(o.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:n,icon:i}))};var l=r.forwardRef(c)},48881:function(e,n,t){t.d(n,{Z:function(){return Z}});var a=t(2053),r=t(99459),i=t(57904),o=t(53162),c=t(75271),l=t(82187),s=t.n(l),f=t(75875),d=t(28771),u=t(98037),m=t(39765),p=["icon","className","onClick","style","primaryColor","secondaryColor"],v={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var g=function(e){var n=e.icon,t=e.className,a=e.onClick,r=e.style,i=e.primaryColor,l=e.secondaryColor,s=(0,o.Z)(e,p),f=c.useRef(),d=v;if(i&&(d={primaryColor:i,secondaryColor:l||(0,m.pw)(i)}),(0,m.C3)(f),(0,m.Kp)((0,m.r)(n),"icon should be icon definiton, but got ".concat(n)),!(0,m.r)(n))return null;var g=n;return g&&"function"==typeof g.icon&&(g=(0,u.Z)((0,u.Z)({},g),{},{icon:g.icon(d.primaryColor,d.secondaryColor)})),(0,m.R_)(g.icon,"svg-".concat(g.name),(0,u.Z)((0,u.Z)({className:t,onClick:a,style:r,"data-icon":g.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s),{},{ref:f}))};g.displayName="IconReact",g.getTwoToneColors=function(){return(0,u.Z)({},v)},g.setTwoToneColors=function(e){var n=e.primaryColor,t=e.secondaryColor;v.primaryColor=n,v.secondaryColor=t||(0,m.pw)(n),v.calculated=!!t};var b=g;function h(e){var n=(0,m.H9)(e),t=(0,r.Z)(n,2),a=t[0],i=t[1];return b.setTwoToneColors({primaryColor:a,secondaryColor:i})}var x=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];h(f.iN.primary);var y=c.forwardRef((function(e,n){var t=e.className,l=e.icon,f=e.spin,u=e.rotate,p=e.tabIndex,v=e.onClick,g=e.twoToneColor,h=(0,o.Z)(e,x),y=c.useContext(d.Z),Z=y.prefixCls,C=void 0===Z?"anticon":Z,j=y.rootClassName,P=s()(j,C,(0,i.Z)((0,i.Z)({},"".concat(C,"-").concat(l.name),!!l.name),"".concat(C,"-spin"),!!f||"loading"===l.name),t),w=p;void 0===w&&v&&(w=-1);var k=u?{msTransform:"rotate(".concat(u,"deg)"),transform:"rotate(".concat(u,"deg)")}:void 0,N=(0,m.H9)(g),S=(0,r.Z)(N,2),E=S[0],O=S[1];return c.createElement("span",(0,a.Z)({role:"img","aria-label":l.name},h,{ref:n,tabIndex:w,onClick:v,className:P}),c.createElement(b,{icon:l,primaryColor:E,secondaryColor:O,style:k}))}));y.displayName="AntdIcon",y.getTwoToneColor=function(){var e=b.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},y.setTwoToneColor=h;var Z=y},28771:function(e,n,t){var a=(0,t(75271).createContext)({});n.Z=a},39765:function(e,n,t){t.d(n,{R_:function(){return g},pw:function(){return b},r:function(){return p},H9:function(){return h},vD:function(){return x},C3:function(){return y},Kp:function(){return m}});var a=t(98037),r=t(24744),i=t(75875),o=t(61984);function c(e){var n;return null==e||null===(n=e.getRootNode)||void 0===n?void 0:n.call(e)}function l(e){return function(e){return c(e)instanceof ShadowRoot}(e)?c(e):null}var s=t(7432),f=t(75271),d=t(28771);function u(e){return e.replace(/-(.)/g,(function(e,n){return n.toUpperCase()}))}function m(e,n){(0,s.ZP)(e,"[@ant-design/icons] ".concat(n))}function p(e){return"object"===(0,r.Z)(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===(0,r.Z)(e.icon)||"function"==typeof e.icon)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(n,t){var a=e[t];if("class"===t)n.className=a,delete n.class;else delete n[t],n[u(t)]=a;return n}),{})}function g(e,n,t){return t?f.createElement(e.tag,(0,a.Z)((0,a.Z)({key:n},v(e.attrs)),t),(e.children||[]).map((function(t,a){return g(t,"".concat(n,"-").concat(e.tag,"-").concat(a))}))):f.createElement(e.tag,(0,a.Z)({key:n},v(e.attrs)),(e.children||[]).map((function(t,a){return g(t,"".concat(n,"-").concat(e.tag,"-").concat(a))})))}function b(e){return(0,i.R_)(e)[0]}function h(e){return e?Array.isArray(e)?e:[e]:[]}var x={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},y=function(e){var n=(0,f.useContext)(d.Z),t=n.csp,a=n.prefixCls,r="\n.anticon {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";a&&(r=r.replace(/anticon/g,a)),(0,f.useEffect)((function(){var n=l(e.current);(0,o.hq)(r,"@ant-design-icons",{prepend:!0,csp:t,attachTo:n})}),[])}},44224:function(e,n,t){var a=(0,t(19919).Z)({scriptUrl:["//at.alicdn.com/t/c/font_3354854_lc939gab1iq.js"]});n.Z=a},94526:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var a=t(26068),r=t.n(a),i=t(48305),o=t.n(i),c=t(72317),l=t(75271),s=t(50691),f=t(19293),d=t(45520),u=t(61508),m=t(48758),p=t(47667),v=t(59816),g=t(93481),b=t(66633),h=t(70175),x=t(33886),y=t(9798),Z=t(15631),C=t(56958),j=t(89709),P=t(86935),w=t(72523),k=t(44860),N=t(62348),S=t(16314),E=t(3475),O=t(63549),T=t(83383),R=t(44224),M=t(52076),_=t(17355),I=t(30502),A=t(16483),z=t.n(A),H=t(52676),F=s.Z.Text,q=[{key:"log",tab:c.ZP.get("日志")},{key:"script",tab:c.ZP.get("脚本")}],D=function(e){var n,t,a,i,A=e.cron,D=void 0===A?{}:A,W=e.handleCancel,B=e.visible,L=e.theme,Y=e.isPhone,$=(0,l.useState)("log"),V=o()($,2),K=V[0],U=V[1],G=(0,l.useState)(!0),J=o()(G,2),Q=(J[0],J[1]),X=(0,l.useState)([]),ee=o()(X,2),ne=ee[0],te=ee[1],ae=(0,l.useState)(""),re=o()(ae,2),ie=re[0],oe=re[1],ce=(0,l.useState)(""),le=o()(ce,2),se=le[0],fe=le[1],de=(0,l.useState)(!1),ue=o()(de,2),me=ue[0],pe=ue[1],ve=(0,l.useRef)(null),ge=(0,l.useState)({}),be=o()(ge,2),he=be[0],xe=be[1],ye=(0,l.useState)(""),Ze=o()(ye,2),Ce=Ze[0],je=Ze[1],Pe=(0,l.useState)(q),we=o()(Pe,2),ke=we[0],Ne=we[1],Se=(0,l.useState)({}),Ee=o()(Se,2),Oe=Ee[0],Te=Ee[1],Re=(0,l.useRef)(null),Me=function(e){var n=(0,l.useState)(0),t=o()(n,2),a=t[0],r=t[1];return(0,I.Z)(e,(function(e){var n=e.target.clientHeight;a!==n&&r(n)})),a}(Re),_e={log:(0,H.jsx)("div",{ref:Re,children:(0,H.jsx)(f.ZP,{children:(0,H.jsx)(_.Z,{data:ne,height:Me,itemHeight:47,itemKey:"filename",children:function(e){return(0,H.jsxs)(f.ZP.Item,{className:"log-item",onClick:function(){return Ie(e)},children:[(0,H.jsx)(h.Z,{style:{marginRight:10}}),e.directory,"/",e.filename]})}})})}),script:he.filename&&(0,H.jsx)(T.ZP,{language:(0,M.H$)(he.filename),theme:L,value:se,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1,accessibilitySupport:"off"},onMount:function(e,n){ve.current=e}})},Ie=function(e){var n="".concat(E.Z.apiPrefix,"logs/detail?file=").concat(e.filename,"&path=").concat(e.directory||"");localStorage.setItem("logCron",n),je(n),S.W.get(n).then((function(e){var n=e.code,t=e.data;200===n&&(oe(t),pe(!0))}))},Ae=function(){Q(!0),S.W.get("".concat(E.Z.apiPrefix,"crons/").concat(D.id,"/logs")).then((function(e){var n=e.code,t=e.data;200===n&&te(t)})).finally((function(){return Q(!1)}))};return(0,l.useEffect)((function(){D&&D.id&&(Te(D),Ae(),function(){var e=(0,M.FA)(D.command);if(Array.isArray(e)){Ne(ke);var n=o()(e,2),t=n[0],a=n[1];xe({parent:a,filename:t}),S.W.get("".concat(E.Z.apiPrefix,"scripts/detail?file=").concat(t,"&path=").concat(a||"")).then((function(e){var n=e.code,t=e.data;200===n&&fe(t)}))}else Ne([ke[0]]),U("log")}())}),[D]),(0,H.jsxs)(d.Z,{title:(0,H.jsxs)("div",{className:"crontab-title-wrapper",children:[(0,H.jsxs)("div",{style:{minWidth:0,display:"flex",alignItems:"center"},children:[(0,H.jsx)(s.Z.Text,{style:{width:200,boxSizing:"content-box"},ellipsis:{onEllipsis:function(e){return e},tooltip:Oe.name},children:Oe.name}),(null===(n=Oe.labels)||void 0===n?void 0:n.length)>0&&""!==Oe.labels[0]&&(0,H.jsx)(m.Z,{type:"vertical"}),(null===(t=Oe.labels)||void 0===t?void 0:t.length)>0&&""!==Oe.labels[0]&&(null===(a=Oe.labels)||void 0===a?void 0:a.map((function(e,n){return(0,H.jsx)(p.Z,{color:"blue",style:{marginRight:5},children:e},e)})))]}),(0,H.jsxs)("div",{className:"operations",children:[(0,H.jsx)(v.Z,{title:Oe.status===k.CrontabStatus.idle?c.ZP.get("运行"):c.ZP.get("停止"),children:(0,H.jsx)(g.Z,{type:"link",icon:Oe.status===k.CrontabStatus.idle?(0,H.jsx)(x.Z,{}):(0,H.jsx)(y.Z,{}),size:"small",onClick:Oe.status===k.CrontabStatus.idle?function(){d.Z.confirm({title:c.ZP.get("确认运行"),content:(0,H.jsxs)(H.Fragment,{children:[c.ZP.get("确认运行定时任务")," ",(0,H.jsx)(F,{style:{wordBreak:"break-all"},type:"warning",children:Oe.name})," ",c.ZP.get("吗")]}),onOk:function(){S.W.put("".concat(E.Z.apiPrefix,"crons/run"),[Oe.id]).then((function(e){var n=e.code;e.data;200===n&&(Te(r()(r()({},Oe),{},{status:k.CrontabStatus.running})),setTimeout((function(){Ae()}),1e3))}))},onCancel:function(){console.log("Cancel")}})}:function(){d.Z.confirm({title:c.ZP.get("确认停止"),content:(0,H.jsxs)(H.Fragment,{children:[c.ZP.get("确认停止定时任务")," ",(0,H.jsx)(F,{style:{wordBreak:"break-all"},type:"warning",children:Oe.name})," ",c.ZP.get("吗")]}),onOk:function(){S.W.put("".concat(E.Z.apiPrefix,"crons/stop"),[Oe.id]).then((function(e){var n=e.code;e.data;200===n&&Te(r()(r()({},Oe),{},{status:k.CrontabStatus.idle}))}))},onCancel:function(){console.log("Cancel")}})}})}),(0,H.jsx)(v.Z,{title:1===Oe.isDisabled?c.ZP.get("启用"):c.ZP.get("禁用"),children:(0,H.jsx)(g.Z,{type:"link",icon:(0,H.jsx)(R.Z,{type:1===Oe.isDisabled?"ql-icon-enable":"ql-icon-disable"}),size:"small",onClick:function(){d.Z.confirm({title:"确认".concat(1===Oe.isDisabled?c.ZP.get("启用"):c.ZP.get("禁用")),content:(0,H.jsxs)(H.Fragment,{children:[c.ZP.get("确认"),1===Oe.isDisabled?c.ZP.get("启用"):c.ZP.get("禁用"),c.ZP.get("定时任务")," ",(0,H.jsx)(F,{style:{wordBreak:"break-all"},type:"warning",children:Oe.name})," ",c.ZP.get("吗")]}),onOk:function(){S.W.put("".concat(E.Z.apiPrefix,"crons/").concat(1===Oe.isDisabled?"enable":"disable"),[Oe.id]).then((function(e){var n=e.code;e.data;200===n&&Te(r()(r()({},Oe),{},{isDisabled:1===Oe.isDisabled?0:1}))}))},onCancel:function(){console.log("Cancel")}})}})}),(0,H.jsx)(v.Z,{title:1===Oe.isPinned?c.ZP.get("取消置顶"):c.ZP.get("置顶"),children:(0,H.jsx)(g.Z,{type:"link",icon:(0,H.jsx)(R.Z,{type:1===Oe.isPinned?"ql-icon-untop":"ql-icon-top"}),size:"small",onClick:function(){d.Z.confirm({title:"确认".concat(1===Oe.isPinned?c.ZP.get("取消置顶"):c.ZP.get("置顶")),content:(0,H.jsxs)(H.Fragment,{children:[c.ZP.get("确认"),1===Oe.isPinned?c.ZP.get("取消置顶"):c.ZP.get("置顶"),c.ZP.get("定时任务")," ",(0,H.jsx)(F,{style:{wordBreak:"break-all"},type:"warning",children:Oe.name})," ",c.ZP.get("吗")]}),onOk:function(){S.W.put("".concat(E.Z.apiPrefix,"crons/").concat(1===Oe.isPinned?"unpin":"pin"),[Oe.id]).then((function(e){var n=e.code;e.data;200===n&&Te(r()(r()({},Oe),{},{isPinned:1===Oe.isPinned?0:1}))}))},onCancel:function(){console.log("Cancel")}})}})})]})]}),centered:!0,open:B,forceRender:!0,footer:!1,onCancel:function(){return W()},wrapClassName:"crontab-detail",width:Y?"":"80vw",children:[(0,H.jsxs)("div",{className:"card-wrapper",children:[(0,H.jsx)(b.Z,{children:(0,H.jsxs)("div",{className:"cron-detail-info-item",children:[(0,H.jsx)("div",{className:"cron-detail-info-title",children:c.ZP.get("任务")}),(0,H.jsx)("div",{className:"cron-detail-info-value",children:Oe.command})]})}),(0,H.jsxs)(b.Z,{style:{marginTop:10},children:[(0,H.jsxs)("div",{className:"cron-detail-info-item",children:[(0,H.jsx)("div",{className:"cron-detail-info-title",children:c.ZP.get("状态")}),(0,H.jsxs)("div",{className:"cron-detail-info-value",children:[(!Oe.isDisabled||Oe.status!==k.CrontabStatus.idle)&&(0,H.jsxs)(H.Fragment,{children:[Oe.status===k.CrontabStatus.idle&&(0,H.jsx)(p.Z,{icon:(0,H.jsx)(Z.Z,{}),color:"default",children:c.ZP.get("空闲中")}),Oe.status===k.CrontabStatus.running&&(0,H.jsx)(p.Z,{icon:(0,H.jsx)(C.Z,{spin:!0}),color:"processing",children:c.ZP.get("运行中")}),Oe.status===k.CrontabStatus.queued&&(0,H.jsx)(p.Z,{icon:(0,H.jsx)(j.Z,{}),color:"default",children:c.ZP.get("队列中")})]}),1===Oe.isDisabled&&Oe.status===k.CrontabStatus.idle&&(0,H.jsx)(p.Z,{icon:(0,H.jsx)(P.Z,{}),color:"error",children:c.ZP.get("已禁用")})]})]}),(0,H.jsxs)("div",{className:"cron-detail-info-item",children:[(0,H.jsx)("div",{className:"cron-detail-info-title",children:c.ZP.get("定时")}),(0,H.jsxs)("div",{className:"cron-detail-info-value",children:[(0,H.jsx)("div",{children:Oe.schedule}),null===(i=Oe.extra_schedules)||void 0===i?void 0:i.map((function(e){return(0,H.jsx)("div",{children:e.schedule},e.schedule)}))]})]}),(0,H.jsxs)("div",{className:"cron-detail-info-item",children:[(0,H.jsx)("div",{className:"cron-detail-info-title",children:c.ZP.get("最后运行时间")}),(0,H.jsx)("div",{className:"cron-detail-info-value",children:Oe.last_execution_time?z()(1e3*Oe.last_execution_time).format("YYYY-MM-DD HH:mm:ss"):"-"})]}),(0,H.jsxs)("div",{className:"cron-detail-info-item",children:[(0,H.jsx)("div",{className:"cron-detail-info-title",children:c.ZP.get("最后运行时长")}),(0,H.jsx)("div",{className:"cron-detail-info-value",children:Oe.last_running_time?(0,N.E)(Oe.last_running_time):"-"})]}),(0,H.jsxs)("div",{className:"cron-detail-info-item",children:[(0,H.jsx)("div",{className:"cron-detail-info-title",children:c.ZP.get("下次运行时间")}),(0,H.jsx)("div",{className:"cron-detail-info-value",children:Oe.nextRunTime&&z()(Oe.nextRunTime).format("YYYY-MM-DD HH:mm:ss")})]})]}),(0,H.jsx)(b.Z,{style:{marginTop:10},tabList:ke,activeTabKey:K,onTabChange:function(e){!function(e){U(e)}(e)},tabBarExtraContent:"script"===K&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(g.Z,{type:"primary",style:{marginRight:8},onClick:function(){d.Z.confirm({title:"确认保存",content:(0,H.jsxs)(H.Fragment,{children:[c.ZP.get("确认保存文件"),(0,H.jsxs)(F,{style:{wordBreak:"break-all"},type:"warning",children:[" ",he.filename]}),c.ZP.get("，保存后不可恢复")]}),onOk:function(){var e=ve.current?ve.current.getValue().replace(/\r\n/g,"\n"):se;return new Promise((function(n,t){S.W.put("".concat(E.Z.apiPrefix,"scripts"),{filename:he.filename,path:he.parent||"",content:e}).then((function(t){var a=t.code;t.data;200===a&&(fe(e),u.ZP.success("保存成功")),n(null)})).catch((function(e){return t(e)}))}))},onCancel:function(){console.log("Cancel")}})},children:c.ZP.get("保存")}),(0,H.jsx)(g.Z,{type:"primary",icon:(0,H.jsx)(w.Z,{}),onClick:function(){var e;null===(e=ve.current._domElement.parentElement)||void 0===e||e.requestFullscreen()}})]}),children:_e[K]})]}),(0,H.jsx)(O.default,{visible:me,handleCancel:function(){pe(!1)},cron:D,data:ie,logUrl:Ce})]})}},63549:function(e,n,t){t.r(n);var a=t(48305),r=t.n(a),i=t(72317),o=t(75271),c=t(32890),l=t(50691),s=t(45520),f=t(93481),d=t(16314),u=t(3475),m=t(56958),p=t(44084),v=t(34014),g=t(52076),b=t(78060),h=t.n(b),x=t(52676);c.Z.Countdown;n.default=function(e){var n=e.cron,t=e.handleCancel,a=e.visible,c=e.data,b=e.logUrl,y=(0,o.useState)(i.ZP.get("启动中...")),Z=r()(y,2),C=Z[0],j=Z[1],P=(0,o.useState)(!0),w=r()(P,2),k=w[0],N=w[1],S=(0,o.useState)(!0),E=r()(S,2),O=E[0],T=E[1],R=(0,o.useState)(!1),M=r()(R,2),_=M[0],I=M[1],A=(0,o.useRef)({value:0,down:!0}),z=b||String(null==n?void 0:n.id),H=function e(t){t&&N(!0),d.W.get(b||"".concat(u.Z.apiPrefix,"crons/").concat(n.id,"/log")).then((function(n){var t=n.code,a=n.data;if(200===t&&localStorage.getItem("logCron")===z&&a!==C){var r=a;j(r||i.ZP.get("暂无日志"));var o=Boolean(r&&!(0,g.x$)(r)&&!r.includes("任务未运行"));o||(0,g.x$)(C)||C===i.ZP.get("启动中...")||setTimeout((function(){F()})),T(o),o&&setTimeout((function(){F(),e()}),2e3)}})).finally((function(){t&&N(!1)}))},F=function(){A.current.down&&setTimeout((function(){document.querySelector("#log-flag").scrollIntoView({behavior:"smooth"})}),600)},q=function(){localStorage.removeItem("logCron"),t()};return(0,o.useEffect)((function(){n&&n.id&&a&&(H(!0),A.current.down=!0)}),[n,a]),(0,o.useEffect)((function(){c&&j(c)}),[c]),(0,o.useEffect)((function(){I(document.body.clientWidth<768)}),[]),(0,x.jsx)(s.Z,{title:(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(O||k)&&(0,x.jsx)(m.Z,{spin:!0}),!O&&!k&&(0,x.jsx)(p.Z,{}),(0,x.jsx)(l.Z.Text,{ellipsis:!0,style:{marginLeft:5},children:n&&n.name})]}),open:a,centered:!0,className:"log-modal",forceRender:!0,onOk:function(){return q()},onCancel:function(){return q()},footer:[(0,x.jsx)(f.Z,{type:"primary",onClick:function(){return q()},children:i.ZP.get("知道了")})],children:(0,x.jsxs)("div",{onScroll:function(e){var n=e.target.scrollTop;A.current.down&&(A.current={value:n,down:n-A.current.value>-5||!n})},className:"log-container",children:[k?(0,x.jsx)(v.Z,{}):(0,x.jsx)("pre",{style:_?{fontFamily:"Source Code Pro",zoom:.83}:{},children:(0,x.jsx)(h(),{children:C})}),(0,x.jsx)("div",{id:"log-flag"})]})})}},44860:function(e,n,t){t.r(n),t.d(n,{CrontabStatus:function(){return a},OperationName:function(){return r},OperationPath:function(){return i}});var a=function(e){return e[e.running=0]="running",e[e.queued=.5]="queued",e[e.idle=1]="idle",e[e.disabled=2]="disabled",e}({}),r=function(e){return e[e["启用"]=0]="启用",e[e["禁用"]=1]="禁用",e[e["运行"]=2]="运行",e[e["停止"]=3]="停止",e[e["置顶"]=4]="置顶",e[e["取消置顶"]=5]="取消置顶",e}({}),i=function(e){return e[e.enable=0]="enable",e[e.disable=1]="disable",e[e.run=2]="run",e[e.stop=3]="stop",e[e.pin=4]="pin",e[e.unpin=5]="unpin",e}({})},62348:function(e,n,t){function a(e){var n=1e3*e,t=Math.floor(n/864e5),a=n%864e5,r=Math.floor(a/36e5),i=a%36e5,o=Math.floor(i/6e4),c=i%6e4,l=Math.round(c/1e3)+"秒";return o>0&&(l=o+"分"+l),r>0&&(l=r+"小时"+l),t>0&&(l=t+"天"+l),l}t.d(n,{E:function(){return a}})},76908:function(e,n,t){var a=t(99459),r=t(75271),i=t(43541);n.Z=function(){var e=r.useState(!1),n=(0,a.Z)(e,2),t=n[0],o=n[1];return r.useEffect((function(){o((0,i.fk)())}),[]),t}},46555:function(e,n,t){t.d(n,{c4:function(){return i}});var a=t(57904),r=t(2053),i=["xxl","xl","lg","md","sm","xs"],o={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},c=new Map,l=-1,s={},f={matchHandlers:{},dispatch:function(e){return s=e,c.forEach((function(e){return e(s)})),c.size>=1},subscribe:function(e){return c.size||this.register(),l+=1,c.set(l,e),e(s),l},unsubscribe:function(e){c.delete(e),c.size||this.unregister()},unregister:function(){var e=this;Object.keys(o).forEach((function(n){var t=o[n],a=e.matchHandlers[t];null==a||a.mql.removeListener(null==a?void 0:a.listener)})),c.clear()},register:function(){var e=this;Object.keys(o).forEach((function(n){var t=o[n],i=function(t){var i=t.matches;e.dispatch((0,r.Z)((0,r.Z)({},s),(0,a.Z)({},n,i)))},c=window.matchMedia(t);c.addListener(i),e.matchHandlers[t]={mql:c,listener:i},i(c)}))}};n.ZP=f},27204:function(e,n,t){var a=(0,t(75271).createContext)({});n.Z=a},59398:function(e,n,t){var a=t(57904),r=t(2053),i=t(24744),o=t(82187),c=t.n(o),l=t(75271),s=t(96820),f=t(27204),d=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t};var u=["xs","sm","md","lg","xl","xxl"],m=l.forwardRef((function(e,n){var t=l.useContext(s.E_),o=t.getPrefixCls,m=t.direction,p=l.useContext(f.Z),v=p.gutter,g=p.wrap,b=p.supportFlexGap,h=e.prefixCls,x=e.span,y=e.order,Z=e.offset,C=e.push,j=e.pull,P=e.className,w=e.children,k=e.flex,N=e.style,S=d(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),E=o("col",h),O={};u.forEach((function(n){var t={},o=e[n];"number"==typeof o?t.span=o:"object"===(0,i.Z)(o)&&(t=o||{}),delete S[n],O=(0,r.Z)((0,r.Z)({},O),(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},"".concat(E,"-").concat(n,"-").concat(t.span),void 0!==t.span),"".concat(E,"-").concat(n,"-order-").concat(t.order),t.order||0===t.order),"".concat(E,"-").concat(n,"-offset-").concat(t.offset),t.offset||0===t.offset),"".concat(E,"-").concat(n,"-push-").concat(t.push),t.push||0===t.push),"".concat(E,"-").concat(n,"-pull-").concat(t.pull),t.pull||0===t.pull),"".concat(E,"-rtl"),"rtl"===m))}));var T=c()(E,(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},"".concat(E,"-").concat(x),void 0!==x),"".concat(E,"-order-").concat(y),y),"".concat(E,"-offset-").concat(Z),Z),"".concat(E,"-push-").concat(C),C),"".concat(E,"-pull-").concat(j),j),P,O),R={};if(v&&v[0]>0){var M=v[0]/2;R.paddingLeft=M,R.paddingRight=M}if(v&&v[1]>0&&!b){var _=v[1]/2;R.paddingTop=_,R.paddingBottom=_}return k&&(R.flex=function(e){return"number"==typeof e?"".concat(e," ").concat(e," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?"0 0 ".concat(e):e}(k),!1!==g||R.minWidth||(R.minWidth=0)),l.createElement("div",(0,r.Z)({},S,{style:(0,r.Z)((0,r.Z)({},R),N),className:T,ref:n}),w)}));n.Z=m},94523:function(e,n,t){var a=t(2053),r=t(57904),i=t(24744),o=t(99459),c=t(82187),l=t.n(c),s=t(75271),f=t(96820),d=t(76908),u=t(46555),m=t(86428),p=t(27204),v=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t};(0,m.b)("top","middle","bottom","stretch"),(0,m.b)("start","end","center","space-around","space-between","space-evenly");function g(e,n){var t=s.useState("string"==typeof e?e:""),a=(0,o.Z)(t,2),r=a[0],c=a[1];return s.useEffect((function(){!function(){if("string"==typeof e&&c(e),"object"===(0,i.Z)(e))for(var t=0;t<u.c4.length;t++){var a=u.c4[t];if(n[a]){var r=e[a];if(void 0!==r)return void c(r)}}}()}),[JSON.stringify(e),n]),r}var b=s.forwardRef((function(e,n){var t=e.prefixCls,c=e.justify,m=e.align,b=e.className,h=e.style,x=e.children,y=e.gutter,Z=void 0===y?0:y,C=e.wrap,j=v(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),P=s.useContext(f.E_),w=P.getPrefixCls,k=P.direction,N=s.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),S=(0,o.Z)(N,2),E=S[0],O=S[1],T=s.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),R=(0,o.Z)(T,2),M=R[0],_=R[1],I=g(m,M),A=g(c,M),z=(0,d.Z)(),H=s.useRef(Z);s.useEffect((function(){var e=u.ZP.subscribe((function(e){_(e);var n=H.current||0;(!Array.isArray(n)&&"object"===(0,i.Z)(n)||Array.isArray(n)&&("object"===(0,i.Z)(n[0])||"object"===(0,i.Z)(n[1])))&&O(e)}));return function(){return u.ZP.unsubscribe(e)}}),[]);var F,q=w("row",t),D=(F=[void 0,void 0],(Array.isArray(Z)?Z:[Z,void 0]).forEach((function(e,n){if("object"===(0,i.Z)(e))for(var t=0;t<u.c4.length;t++){var a=u.c4[t];if(E[a]&&void 0!==e[a]){F[n]=e[a];break}}else F[n]=e})),F),W=l()(q,(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},"".concat(q,"-no-wrap"),!1===C),"".concat(q,"-").concat(A),A),"".concat(q,"-").concat(I),I),"".concat(q,"-rtl"),"rtl"===k),b),B={},L=null!=D[0]&&D[0]>0?D[0]/-2:void 0,Y=null!=D[1]&&D[1]>0?D[1]/-2:void 0;if(L&&(B.marginLeft=L,B.marginRight=L),z){var $=(0,o.Z)(D,2);B.rowGap=$[1]}else Y&&(B.marginTop=Y,B.marginBottom=Y);var V=(0,o.Z)(D,2),K=V[0],U=V[1],G=s.useMemo((function(){return{gutter:[K,U],wrap:C,supportFlexGap:z}}),[K,U,C,z]);return s.createElement(p.Z.Provider,{value:G},s.createElement("div",(0,a.Z)({},j,{className:W,style:(0,a.Z)((0,a.Z)({},B),h),ref:n}),x))}));n.Z=b},47667:function(e,n,t){t.d(n,{Z:function(){return Z}});var a=t(57904),r=t(2053),i=t(99459),o=t(32324),c=t(82187),l=t.n(c),s=t(2021),f=t(75271),d=t(96820),u=t(1667),m=t(74244),p=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t},v=function(e){var n=e.prefixCls,t=e.className,i=e.checked,o=e.onChange,c=e.onClick,s=p(e,["prefixCls","className","checked","onChange","onClick"]),u=(0,f.useContext(d.E_).getPrefixCls)("tag",n),m=l()(u,(0,a.Z)((0,a.Z)({},"".concat(u,"-checkable"),!0),"".concat(u,"-checkable-checked"),i),t);return f.createElement("span",(0,r.Z)({},s,{className:m,onClick:function(e){null==o||o(!i),null==c||c(e)}}))},g=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t},b=new RegExp("^(".concat(u.Y.join("|"),")(-inverse)?$")),h=new RegExp("^(".concat(u.E.join("|"),")$")),x=function(e,n){var t=e.prefixCls,c=e.className,u=e.style,p=e.children,v=e.icon,x=e.color,y=e.onClose,Z=e.closeIcon,C=e.closable,j=void 0!==C&&C,P=g(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),w=f.useContext(d.E_),k=w.getPrefixCls,N=w.direction,S=f.useState(!0),E=(0,i.Z)(S,2),O=E[0],T=E[1];f.useEffect((function(){"visible"in P&&T(P.visible)}),[P.visible]);var R=function(){return!!x&&(b.test(x)||h.test(x))},M=(0,r.Z)({backgroundColor:x&&!R()?x:void 0},u),_=R(),I=k("tag",t),A=l()(I,(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},"".concat(I,"-").concat(x),_),"".concat(I,"-has-color"),x&&!_),"".concat(I,"-hidden"),!O),"".concat(I,"-rtl"),"rtl"===N),c),z=function(e){e.stopPropagation(),null==y||y(e),e.defaultPrevented||"visible"in P||T(!1)},H="onClick"in P||p&&"a"===p.type,F=(0,s.Z)(P,["visible"]),q=v||null,D=q?f.createElement(f.Fragment,null,q,f.createElement("span",null,p)):p,W=f.createElement("span",(0,r.Z)({},F,{ref:n,className:A,style:M}),D,j?Z?f.createElement("span",{className:"".concat(I,"-close-icon"),onClick:z},Z):f.createElement(o.Z,{className:"".concat(I,"-close-icon"),onClick:z}):null);return H?f.createElement(m.Z,null,W):W},y=f.forwardRef(x);y.CheckableTag=v;var Z=y}}]);