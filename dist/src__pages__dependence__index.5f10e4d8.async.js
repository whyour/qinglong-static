"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9914],{39449:function(ae,D,e){e.d(D,{Z:function(){return r}});var E=e(79105),o=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},_=s,j=e(17980),v=function(O,x){return o.createElement(j.Z,(0,E.Z)((0,E.Z)({},O),{},{ref:x,icon:_}))};v.displayName="DeleteOutlined";var r=o.forwardRef(v)},67020:function(ae,D,e){e.d(D,{Z:function(){return r}});var E=e(79105),o=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},_=s,j=e(17980),v=function(O,x){return o.createElement(j.Z,(0,E.Z)((0,E.Z)({},O),{},{ref:x,icon:_}))};v.displayName="FileTextOutlined";var r=o.forwardRef(v)},7651:function(ae,D,e){e.d(D,{Z:function(){return r}});var E=e(79105),o=e(63313),s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"}}]},name:"loading-3-quarters",theme:"outlined"},_=s,j=e(17980),v=function(O,x){return o.createElement(j.Z,(0,E.Z)((0,E.Z)({},O),{},{ref:x,icon:_}))};v.displayName="Loading3QuartersOutlined";var r=o.forwardRef(v)},84201:function(ae,D,e){var E=e(46686),o=e.n(E),s=e(63313),_=e.n(s),j=e(61761),v=e(89993);D.Z=function(r,B){var O=(0,s.useState)(),x=o()(O,2),k=x[0],p=x[1];return(0,j.Z)(r,function(I){var c=I.target;c.classList.contains("ant-table-wrapper")||(c=I.target.querySelector(".ant-table-wrapper")),p((0,v.W9)({extraHeight:B,target:c}))}),k}},81778:function(ae,D,e){e.r(D),e.d(D,{default:function(){return J}});var E=e(94434),o=e.n(E),s=e(46686),_=e.n(s),j=e(30279),v=e.n(j),r=e(63313),B=e(6946),O=e(2991),x=e(26591),k=e(34541),p=e(74318),I=e(97325),c=e(74309),le=e(48810),_e=e(46669),Z=e(79105),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1a184.31 184.31 0 00-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9a184.31 184.31 0 00-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8a63 63 0 01-63 63H232a63 63 0 01-63-63c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5.2 13 .7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7a273 273 0 0022.7 49c24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2a281.38 281.38 0 00123.2-149.5A120 120 0 01836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7.4-6.4.7-12.8.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3C584 874.3 548.8 884 512 884s-72-9.7-102.9-27.8c-30.3-17.7-55.6-43-73.3-73.3A202.75 202.75 0 01308 680V412h408v268z"}}]},name:"bug",theme:"outlined"},fe=d,$=e(17980),W=function(C,U){return r.createElement($.Z,(0,Z.Z)((0,Z.Z)({},C),{},{ref:U,icon:fe}))};W.displayName="BugOutlined";var L=r.forwardRef(W),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"},S=z,G=function(C,U){return r.createElement($.Z,(0,Z.Z)((0,Z.Z)({},C),{},{ref:U,icon:S}))};G.displayName="DeleteFilled";var re=r.forwardRef(G),oe=e(67020),ie=e(39449),T=e(7619),Y=e(38418),R=e(76385),ue=e(57205),ve=e(21158),X=e(66255),de=e(41072),V=e(63335),M=e(84201),n=e(11527),K=B.Z.Text,w=O.Z.Search,h;(function(i){i[i.\u5B89\u88C5\u4E2D=0]="\u5B89\u88C5\u4E2D",i[i.\u5DF2\u5B89\u88C5=1]="\u5DF2\u5B89\u88C5",i[i.\u5B89\u88C5\u5931\u8D25=2]="\u5B89\u88C5\u5931\u8D25",i[i.\u5220\u9664\u4E2D=3]="\u5220\u9664\u4E2D",i[i.\u5DF2\u5220\u9664=4]="\u5DF2\u5220\u9664",i[i.\u5220\u9664\u5931\u8D25=5]="\u5220\u9664\u5931\u8D25"})(h||(h={}));var N;(function(i){i[i.processing=0]="processing",i[i.success=1]="success",i[i.error=2]="error"})(N||(N={}));var q=function(){var C=(0,V.bx)(),U=C.headerStyle,se=C.isPhone,Q=C.socketMessage,P=[{title:"\u5E8F\u53F7",align:"center",width:50,render:function(t,a,l){return(0,n.jsxs)("span",{style:{cursor:"text"},children:[l+1," "]})}},{title:"\u540D\u79F0",dataIndex:"name",key:"name",align:"center"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",align:"center",render:function(t,a,l){return(0,n.jsx)(x.Z,{size:"middle",style:{cursor:"text"},children:(0,n.jsx)(k.Z,{color:N[a.status%3],style:{marginRight:0},children:h[a.status]})})}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"timestamp",dataIndex:"timestamp",align:"center",render:function(t,a){var l=navigator.language||navigator.languages[0],u=a.createdAt||a.timestamp,g=new Date(u).toLocaleString(l,{hour12:!1}).replace(" 24:"," 00:");return(0,n.jsx)(p.Z,{placement:"topLeft",title:g,trigger:["hover","click"],children:(0,n.jsx)("span",{children:g})})}},{title:"\u64CD\u4F5C",key:"action",align:"center",render:function(t,a,l){var u=!se;return(0,n.jsxs)(x.Z,{size:"middle",children:[(0,n.jsx)(p.Z,{title:u?"\u65E5\u5FD7":"",children:(0,n.jsx)("a",{onClick:function(){$e(v()(v()({},a),{},{timestamp:Date.now()}))},children:(0,n.jsx)(oe.Z,{})})}),a.status!==h.\u5B89\u88C5\u4E2D&&a.status!==h.\u5220\u9664\u4E2D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{title:u?"\u91CD\u65B0\u5B89\u88C5":"",children:(0,n.jsx)("a",{onClick:function(){return en(a,l)},children:(0,n.jsx)(L,{})})}),(0,n.jsx)(p.Z,{title:u?"\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return Re(a,l)},children:(0,n.jsx)(ie.Z,{})})}),(0,n.jsx)(p.Z,{title:u?"\u5F3A\u5236\u5220\u9664":"",children:(0,n.jsx)("a",{onClick:function(){return Re(a,l,!0)},children:(0,n.jsx)(re,{})})})]})]})}}],A=(0,r.useState)([]),y=_()(A,2),m=y[0],b=y[1],me=(0,r.useState)(!0),Oe=_()(me,2),xe=Oe[0],De=Oe[1],Ue=(0,r.useState)(!1),Me=_()(Ue,2),be=Me[0],Ee=Me[1],He=(0,r.useState)(),Pe=_()(He,2),ze=Pe[0],ye=Pe[1],Ve=(0,r.useState)([]),je=_()(Ve,2),ee=je[0],ge=je[1],Ne=(0,r.useState)(""),Be=_()(Ne,2),Ze=Be[0],Qe=Be[1],ke=(0,r.useState)(),Se=_()(ke,2),ne=Se[0],$e=Se[1],Ge=(0,r.useState)(!1),Ae=_()(Ge,2),Je=Ae[0],Ie=Ae[1],Ye=(0,r.useState)("nodejs"),Le=_()(Ye,2),pe=Le[0],Xe=Le[1],Te=(0,r.useRef)(),we=(0,M.Z)(Te,59),Ce=function(){De(!0),R.W.get("".concat(T.Z.apiPrefix,"dependencies?searchValue=").concat(Ze,"&type=").concat(pe)).then(function(t){var a=t.code,l=t.data;a===200&&b(l)}).finally(function(){return De(!1)})},qe=function(){ye(null),Ee(!0)},cn=function(t,a){ye(t),Ee(!0)},Re=function(t,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;I.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u5220\u9664\u4F9D\u8D56"," ",(0,n.jsx)(K,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){R.W.delete("".concat(T.Z.apiPrefix,"dependencies").concat(l?"/force":""),{data:[t.id]}).then(function(g){var F=g.code,te=g.data;if(F===200&&l){var ce=m.findIndex(function(he){return he.id===te.data[0].id});if(ce!==-1){var H=o()(m);H.splice(ce,1),b(H)}}})},onCancel:function(){console.log("Cancel")}})},en=function(t,a){I.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsxs)(n.Fragment,{children:["\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5"," ",(0,n.jsx)(K,{style:{wordBreak:"break-all"},type:"warning",children:t.name})," ","\u5417"]}),onOk:function(){R.W.put("".concat(T.Z.apiPrefix,"dependencies/reinstall"),{data:[t.id]}).then(function(u){var g=u.code,F=u.data;g===200&&Fe(F[0])})},onCancel:function(){console.log("Cancel")}})},nn=function(t){Ee(!1),t&&Fe(t)},Fe=function(t){var a=o()(m);if(Array.isArray(t))a.push.apply(a,o()(t));else{var l=m.findIndex(function(u){return u.id===t.id});l!==-1&&a.splice(l,1,v()({},t))}b(a)},tn=function(t){ge(t)},an={selectedRowKeys:ee,onChange:tn},We=function(t){var a=t?"/force":"";I.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){R.W.delete("".concat(T.Z.apiPrefix,"dependencies").concat(a),{data:ee}).then(function(u){var g=u.code,F=u.data;g===200&&(ge([]),Ce())})},onCancel:function(){console.log("Cancel")}})},ln=function(){I.Z.confirm({title:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5",content:(0,n.jsx)(n.Fragment,{children:"\u786E\u8BA4\u91CD\u65B0\u5B89\u88C5\u9009\u4E2D\u7684\u4F9D\u8D56\u5417"}),onOk:function(){R.W.put("".concat(T.Z.apiPrefix,"dependencies/reinstall"),{data:ee}).then(function(a){var l=a.code,u=a.data;l===200&&(ge([]),Ce())})},onCancel:function(){console.log("Cancel")}})},rn=function(t){R.W.get("".concat(T.Z.apiPrefix,"dependencies/").concat(t.id)).then(function(a){var l=a.code,u=a.data;if(l===200){var g=m.findIndex(function(te){return te.id===t.id}),F=o()(m);g!==-1&&(F.splice(g,1,v()(v()({},t),u)),b(F))}}).finally(function(){return De(!1)})},on=function(t){Qe(t.trim())};(0,r.useEffect)(function(){Ce()},[Ze,pe]),(0,r.useEffect)(function(){ne&&(localStorage.setItem("logDependence",ne.id),Ie(!0))},[ne]),(0,r.useEffect)(function(){if(!!Q){var f=Q.type,t=Q.message,a=Q.references;if(f==="installDependence"&&t.includes("\u7ED3\u675F\u65F6\u95F4")&&a.length>0){var l;t.includes("\u5B89\u88C5")?l=t.includes("\u6210\u529F")?h.\u5DF2\u5B89\u88C5:h.\u5B89\u88C5\u5931\u8D25:l=t.includes("\u6210\u529F")?h.\u5DF2\u5220\u9664:h.\u5220\u9664\u5931\u8D25;for(var u=o()(m),g=function(ce){var H=m.findIndex(function(he){return he.id===a[ce]});H!==-1&&u.splice(H,1,v()(v()({},m[H]),{},{status:l}))},F=0;F<a.length;F++)g(F);b(u),l===h.\u5DF2\u5220\u9664&&setTimeout(function(){for(var te=o()(m),ce=function(dn){var Ke=m.findIndex(function(sn){return sn.id===a[dn]});Ke!==-1&&te.splice(Ke,1)},H=0;H<a.length;H++)ce(H);b(te)},5e3)}}},[Q]);var un=function(t){ge([]),Xe(t)};return(0,n.jsxs)(Y.ZP,{className:"ql-container-wrapper dependence-wrapper ql-container-wrapper-has-tab",title:"\u4F9D\u8D56\u7BA1\u7406",extra:[(0,n.jsx)(w,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",style:{width:"auto"},enterButton:!0,loading:xe,onSearch:on}),(0,n.jsx)(c.Z,{type:"primary",onClick:function(){return qe()},children:"\u65B0\u5EFA\u4F9D\u8D56"},"2")],header:{style:U},children:[(0,n.jsx)(le.Z,{defaultActiveKey:"nodejs",size:"small",tabPosition:"top",onChange:un,items:[{key:"nodejs",label:"NodeJs"},{key:"python3",label:"Python3"},{key:"linux",label:"Linux"}]}),(0,n.jsxs)("div",{ref:Te,children:[ee.length>0&&(0,n.jsxs)("div",{style:{marginBottom:16},children:[(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return ln()},children:"\u6279\u91CF\u5B89\u88C5"}),(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return We(!1)},children:"\u6279\u91CF\u5220\u9664"}),(0,n.jsx)(c.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:function(){return We(!0)},children:"\u6279\u91CF\u5F3A\u5236\u5220\u9664"}),(0,n.jsxs)("span",{style:{marginLeft:8},children:["\u5DF2\u9009\u62E9",(0,n.jsx)("a",{children:ee==null?void 0:ee.length}),"\u9879"]})]}),(0,n.jsx)(ve.W,{backend:X.PD,children:(0,n.jsx)(_e.Z,{columns:P,rowSelection:an,pagination:!1,dataSource:m,rowKey:"id",size:"middle",scroll:{x:768,y:we},loading:xe})})]}),(0,n.jsx)(ue.default,{visible:be,handleCancel:nn,dependence:ze,defaultType:pe}),(0,n.jsx)(de.default,{visible:Je,handleCancel:function(t){if(Ie(!1),t){var a=m.findIndex(function(u){return u.id===ne.id}),l=o()(m);a!==-1&&(l.splice(a,1),b(l))}else o()(m).map(function(u){return u.id}).includes(ne.id)&&rn(ne)},socketMessage:Q,dependence:ne})]})},J=q},41072:function(ae,D,e){e.r(D);var E=e(46686),o=e.n(E),s=e(63313),_=e.n(s),j=e(97325),v=e(74309),r=e(76385),B=e(7619),O=e(7651),x=e(96320),k=e(35459),p=e(42881),I=e.n(p),c=e(11527),le=function(Z){var d=Z.dependence,fe=Z.handleCancel,$=Z.visible,W=Z.socketMessage,L=(0,s.useState)(""),z=o()(L,2),S=z[0],G=z[1],re=(0,s.useState)(!0),oe=o()(re,2),ie=oe[0],T=oe[1],Y=(0,s.useState)(!1),R=o()(Y,2),ue=R[0],ve=R[1],X=(0,s.useState)(!0),de=o()(X,2),V=de[0],M=de[1],n=(0,s.useState)(!1),K=o()(n,2),w=K[0],h=K[1],N=(0,s.useState)(!1),q=o()(N,2),J=q[0],i=q[1],C=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;localStorage.removeItem("logDependence"),fe(y)},U=function(){return(0,c.jsxs)(c.Fragment,{children:[ie&&(0,c.jsx)(O.Z,{spin:!0}),!ie&&(0,c.jsx)(x.Z,{}),(0,c.jsxs)("span",{style:{marginLeft:5},children:["\u65E5\u5FD7 - ",d&&d.name]})," "]})},se=function(){M(!0),r.W.get("".concat(B.Z.apiPrefix,"dependencies/").concat(d.id)).then(function(y){var m=y.code,b=y.data;if(m===200&&localStorage.getItem("logDependence")===String(d.id)){var me=(b.log||[]).join("");G(me),T(!me.includes("\u7ED3\u675F\u65F6\u95F4")),h(me.includes("\u5220\u9664\u5931\u8D25"))}}).finally(function(){M(!1)})},Q=function(){i(!0),r.W.delete("".concat(B.Z.apiPrefix,"dependencies/force"),{data:[d.id]}).then(function(y){var m=y.code,b=y.data;m===200&&C(!0)}).finally(function(){i(!1)})},P=function(){w?Q():C()};return(0,s.useEffect)(function(){d&&se()},[d]),(0,s.useEffect)(function(){if(!(!W||!d)){var A=W.type,y=W.message,m=W.references;A==="installDependence"&&m.length>0&&m.includes(d.id)&&(y.includes("\u7ED3\u675F\u65F6\u95F4")&&(T(!1),h(y.includes("\u5220\u9664\u5931\u8D25"))),G("".concat(S).concat(y)))}},[W]),(0,s.useEffect)(function(){ve(document.body.clientWidth<768)},[]),(0,c.jsx)(j.Z,{title:U(),open:$,centered:!0,className:"log-modal",bodyStyle:{overflowY:"auto",maxHeight:"calc(70vh - var(--vh-offset, 0px))",minHeight:"300px"},forceRender:!0,onOk:function(){return C()},onCancel:function(){return C()},footer:[(0,c.jsx)(v.Z,{type:"primary",onClick:P,loading:J,children:w?"\u5F3A\u5236\u5220\u9664":"\u77E5\u9053\u4E86"})],children:V?(0,c.jsx)(k.Z,{}):(0,c.jsx)("pre",{style:ue?{fontFamily:"Source Code Pro",width:375,zoom:.83}:{},children:(0,c.jsx)(I(),{children:S})})})};D.default=le},57205:function(ae,D,e){e.r(D);var E=e(35290),o=e.n(E),s=e(30279),_=e.n(s),j=e(411),v=e.n(j),r=e(46686),B=e.n(r),O=e(63313),x=e.n(O),k=e(77073),p=e(78455),I=e(97325),c=e(39958),le=e(2991),_e=e(76385),Z=e(7619),d=e(11527),fe=k.Z.Option,$;(function(L){L[L.nodejs=0]="nodejs",L[L.python3=1]="python3",L[L.linux=2]="linux"})($||($={}));var W=function(z){var S=z.dependence,G=z.handleCancel,re=z.visible,oe=z.defaultType,ie=p.Z.useForm(),T=B()(ie,1),Y=T[0],R=(0,O.useState)(!1),ue=B()(R,2),ve=ue[0],X=ue[1],de=function(){var V=v()(o()().mark(function M(n){var K,w,h,N,q,J,i,C,U,se;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return X(!0),K=n.name,w=n.split,h=n.type,N=n.remark,q=S?"put":"post",S?J=_()(_()({},n),{},{id:S.id}):w==="1"?(i=K.includes("&")?"&":`
`,J=K.split(i).map(function(A){return{name:A,type:h,remark:N}})):J=[{name:K,type:h,remark:N}],P.prev=4,P.next=7,_e.W[q]("".concat(Z.Z.apiPrefix,"dependencies"),{data:J});case 7:C=P.sent,U=C.code,se=C.data,U===200&&G(se),X(!1),P.next=17;break;case 14:P.prev=14,P.t0=P.catch(4),X(!1);case 17:case"end":return P.stop()}},M,null,[[4,14]])}));return function(n){return V.apply(this,arguments)}}();return(0,O.useEffect)(function(){Y.resetFields()},[S,re]),(0,d.jsx)(I.Z,{title:S?"\u7F16\u8F91\u4F9D\u8D56":"\u65B0\u5EFA\u4F9D\u8D56",open:re,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){Y.validateFields().then(function(M){de(M)}).catch(function(M){console.log("Validate Failed:",M)})},onCancel:function(){return G()},confirmLoading:ve,children:(0,d.jsxs)(p.Z,{form:Y,layout:"vertical",name:"dependence_modal",initialValues:S,children:[(0,d.jsx)(p.Z.Item,{name:"type",label:"\u4F9D\u8D56\u7C7B\u578B",initialValue:$[oe],children:(0,d.jsx)(k.Z,{children:Z.Z.dependenceTypes.map(function(V,M){return(0,d.jsx)(fe,{value:M,children:V},M)})})}),!S&&(0,d.jsx)(p.Z.Item,{name:"split",label:"\u81EA\u52A8\u62C6\u5206",initialValue:"0",tooltip:"\u591A\u4E2A\u4F9D\u8D56\u662F\u5426\u6362\u884C\u5206\u5272",children:(0,d.jsxs)(c.ZP.Group,{children:[(0,d.jsx)(c.ZP,{value:"1",children:"\u662F"}),(0,d.jsx)(c.ZP,{value:"0",children:"\u5426"})]})}),(0,d.jsx)(p.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0",whitespace:!0}],children:(0,d.jsx)(le.Z.TextArea,{rows:4,autoSize:!0,placeholder:"\u8BF7\u8F93\u5165\u4F9D\u8D56\u540D\u79F0"})}),(0,d.jsx)(p.Z.Item,{name:"remark",label:"\u5907\u6CE8",children:(0,d.jsx)(le.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})})};D.default=W}}]);
