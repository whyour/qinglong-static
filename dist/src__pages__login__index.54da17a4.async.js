(self.webpackChunk=self.webpackChunk||[]).push([[9939,3830],{71449:function(Z,l,e){"use strict";e.r(l),e.d(l,{default:function(){return ee}});var f=e(57213),r=e.n(f),o=e(54306),c=e.n(o),a=e(88265),n=e(63313),x=e(67393),j=e(89065),M=e(43848),h=e(22159),y=e(24378),v=e(59873),g=e(5558),i=e(98074),s={container:"container___ldtvs",top:"top___D7yFW",header:"header___j_Z_f",logo:"logo___Cf9cM",title:"title___zhtS2",desc:"desc___gUnVR",main:"main___sAFzH",icon:"icon___CBYA8",other:"other___ldu__",register:"register___e1aGB",prefixIcon:"prefixIcon___CnW6Q",extra:"extra___e62Gt"},m=e(95176),p=e(62753),E=e(14797),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},C=T,I=e(46420),D=function(L,F){return n.createElement(I.Z,(0,E.Z)((0,E.Z)({},L),{},{ref:F,icon:C}))};D.displayName="MobileOutlined";var A=n.forwardRef(D),t=e(11527),O=x.Z.Item,b=j.Z.Countdown,B=window.__ENV__DeployEnv==="demo",q=function(){var L=(0,i.useOutletContext)(),F=L.reloadUser,ae=(0,n.useState)(!1),K=c()(ae,2),ne=K[0],R=K[1],oe=(0,n.useState)(),N=c()(oe,2),z=N[0],U=N[1],se=(0,p.F)(),re=se.theme,ie=(0,n.useState)(!1),G=c()(ie,2),W=G[0],V=G[1],le=(0,n.useState)(!1),H=c()(le,2),de=H[0],w=H[1],ue=(0,n.useState)(),k=c()(ue,2),ce=k[0],me=k[1],fe=function(u){R(!0),V(!1),U(null),m.W.post("".concat(g.Z.apiPrefix,"user/login"),{username:u.username,password:u.password}).then(function(d){Q(d,u),R(!1)}).catch(function(d){console.log(d),R(!1)})},$=function(u){w(!0),m.W.put("".concat(g.Z.apiPrefix,"user/two-factor/login"),r()(r()({},ce),{},{code:u.code})).then(function(d){Q(d),w(!1)}).catch(function(d){console.log(d),w(!1)})},Q=function(u,d){var P=u.code,_=u.data,xe=u.message;if(P===200){var ve=_.token,ge=_.lastip,_e=_.lastaddr,Y=_.lastlogon,J=_.retries,X=J===void 0?0:J,pe=_.platform;localStorage.setItem(g.Z.authKey,ve),M.Z.success({message:a.ZP.get("\u767B\u5F55\u6210\u529F\uFF01"),description:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[a.ZP.get("\u4E0A\u6B21\u767B\u5F55\u65F6\u95F4\uFF1A"),Y?new Date(Y).toLocaleString():"-"]}),(0,t.jsxs)("div",{children:[a.ZP.get("\u4E0A\u6B21\u767B\u5F55\u5730\u70B9\uFF1A"),_e||"-"]}),(0,t.jsxs)("div",{children:[a.ZP.get("\u4E0A\u6B21\u767B\u5F55IP\uFF1A"),ge||"-"]}),(0,t.jsxs)("div",{children:[a.ZP.get("\u4E0A\u6B21\u767B\u5F55\u8BBE\u5907\uFF1A"),pe||"-"]}),(0,t.jsxs)("div",{children:[a.ZP.get("\u4E0A\u6B21\u767B\u5F55\u72B6\u6001\uFF1A"),X>0?"\u5931\u8D25".concat(X,"\u6B21"):a.ZP.get("\u6210\u529F")]})]})}),F(!0),i.history.push("/crontab")}else P===410?U(_):P===420?(me({username:d.username,password:d.password}),V(!0)):P===100&&setTimeout(function(){location.reload()},1e3)},he=function(u){var d=u.target,P=d.value,_=/^[0-9]{6}$/;_.test(P)&&$({code:P})};return(0,n.useEffect)(function(){var S=localStorage.getItem(g.Z.authKey);S&&i.history.push("/crontab")},[]),(0,t.jsxs)("div",{className:s.container,children:[(0,t.jsx)("div",{className:s.top,children:(0,t.jsxs)("div",{className:s.header,children:[(0,t.jsx)("img",{alt:"logo",className:s.logo,src:"https://qn.whyour.cn/logo.png"}),(0,t.jsx)("span",{className:s.title,children:W?a.ZP.get("\u4E24\u6B65\u9A8C\u8BC1"):g.Z.siteName})]})}),(0,t.jsx)("div",{className:s.main,children:W?(0,t.jsxs)(x.Z,{layout:"vertical",onFinish:$,children:[(0,t.jsx)(O,{name:"code",label:a.ZP.get("\u9A8C\u8BC1\u7801"),rules:[{pattern:/^[0-9]{6}$/,message:a.ZP.get("\u9A8C\u8BC1\u7801\u4E3A6\u4F4D\u6570\u5B57")}],validateTrigger:"onBlur",children:(0,t.jsx)(h.Z,{placeholder:a.ZP.get("6\u4F4D\u6570\u5B57"),onChange:he,autoFocus:!0,autoComplete:"off"})}),(0,t.jsx)(y.Z,{type:"primary",htmlType:"submit",style:{width:"100%"},loading:de,children:a.ZP.get("\u9A8C\u8BC1")})]}):(0,t.jsxs)(x.Z,{layout:"vertical",onFinish:fe,children:[(0,t.jsx)(O,{name:"username",label:a.ZP.get("\u7528\u6237\u540D"),hasFeedback:!0,children:(0,t.jsx)(h.Z,{placeholder:"".concat(a.ZP.get("\u7528\u6237\u540D")).concat(B?": admin":""),autoFocus:!0})}),(0,t.jsx)(O,{name:"password",label:a.ZP.get("\u5BC6\u7801"),hasFeedback:!0,children:(0,t.jsx)(h.Z,{type:"password",placeholder:"".concat(a.ZP.get("\u5BC6\u7801")).concat(B?": 123":"")})}),(0,t.jsx)(v.Z,{children:z?(0,t.jsxs)(y.Z,{type:"primary",style:{width:"100%"},disabled:!0,children:[a.ZP.get("\u8BF7"),(0,t.jsx)(b,{valueStyle:{color:re==="vs"?"rgba(0,0,0,.25)":"rgba(232, 230, 227, 0.25)"},className:"inline-countdown",onFinish:function(){return U(null)},format:"ss",value:Date.now()+1e3*z}),a.ZP.get("\u79D2\u540E\u91CD\u8BD5")]}):(0,t.jsx)(y.Z,{type:"primary",htmlType:"submit",style:{width:"100%"},loading:ne,children:a.ZP.get("\u767B\u5F55")})})]})}),(0,t.jsx)("div",{className:s.extra,children:W?(0,t.jsxs)("div",{style:{paddingLeft:20,position:"relative"},children:[(0,t.jsx)(A,{style:{position:"absolute",left:0,top:4}}),a.ZP.get("\u5728\u60A8\u7684\u8BBE\u5907\u4E0A\u6253\u5F00\u4E24\u6B65\u9A8C\u8BC1\u5E94\u7528\u7A0B\u5E8F\u4EE5\u67E5\u770B\u60A8\u7684\u8EAB\u4EFD\u9A8C\u8BC1\u4EE3\u7801\u5E76\u9A8C\u8BC1\u60A8\u7684\u8EAB\u4EFD\u3002")]}):""})]})},ee=q},62753:function(Z,l,e){"use strict";e.d(l,{F:function(){return x},e:function(){return n}});var f=e(54306),r=e.n(f),o=e(63313),c=e.n(o),a=e(82428),n=function(){var M=(0,o.useState)("100%"),h=r()(M,2),y=h[0],v=h[1],g=(0,o.useState)(0),i=r()(g,2),s=i[0],m=i[1],p=(0,o.useState)(-48),E=r()(p,2),T=E[0],C=E[1],I=(0,o.useState)(!1),D=r()(I,2),A=D[0],t=D[1],O=(0,o.useMemo)(function(){return(0,a.ZP)()},[]),b=O.platform;return(0,o.useEffect)(function(){b==="mobile"&&document.body.offsetWidth<768?(v("auto"),m(0),C(0),t(!0),document.body.setAttribute("data-mode","phone")):(v("100%"),m(0),C(-48),t(!1),document.body.setAttribute("data-mode","desktop"))},[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:T,width:y,marginLeft:s},isPhone:A}},x=function(){var M=(0,o.useState)(),h=r()(M,2),y=h[0],v=h[1],g=function(){var s=window.matchMedia("(prefers-color-scheme: dark)"),m=localStorage.getItem("qinglong_dark_theme"),p=s.matches&&m!=="light"||m==="dark";v(p?"vs-dark":"vs")};return(0,o.useEffect)(function(){var i=window.matchMedia("(prefers-color-scheme: dark)"),s=localStorage.getItem("qinglong_dark_theme"),m=i.matches&&s!=="light"||s==="dark";v(m?"vs-dark":"vs");var p=function(T){(s==="auto"||!s)&&(T.matches?v("vs-dark"):v("vs"))};typeof i.addEventListener=="function"?i.addEventListener("change",p):typeof i.addListener=="function"&&i.addListener(p)},[]),{theme:y,reloadTheme:g}}},92235:function(Z,l,e){"use strict";e.d(l,{Z:function(){return c}});var f=e(17079),r=e(63313),o=e.n(r);function c(){var a=r.useReducer(function(j){return j+1},0),n=(0,f.Z)(a,2),x=n[1];return x}},68098:function(Z,l,e){"use strict";e.d(l,{fk:function(){return c},jD:function(){return r}});var f=e(65021),r=function(){return(0,f.Z)()&&window.document.documentElement},o,c=function(){if(!r())return!1;if(o!==void 0)return o;var n=document.createElement("div");return n.style.display="flex",n.style.flexDirection="column",n.style.rowGap="1px",n.appendChild(document.createElement("div")),n.appendChild(document.createElement("div")),document.body.appendChild(n),o=n.scrollHeight===1,document.body.removeChild(n),o}},59873:function(Z,l,e){"use strict";var f=e(19698);l.Z=f.Z},24669:function(Z){var l=Array.isArray;Z.exports=l}}]);
