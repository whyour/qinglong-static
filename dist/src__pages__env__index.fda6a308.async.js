"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8247],{35272:function(he,K,e){e.d(K,{i:function(){return x}});var V=e(54306),b=e.n(V),oe=e(12342),z=e.n(oe),ae=e(57213),_=e.n(ae),v=e(63313),S=e.n(v),w=e(32699),ne=e.n(w),j=e(11527),R=["children"],m=["children","style"],Z=["children"],J=["style","children"],k=["width"],le={rowHeight:0,curScrollTop:0,totalLen:0};function M(s,c){var p=c.curScrollTop,i=c.totalLen,D=c.ifScrollTopClear,g=c.scrollTop,O=s.curScrollTop;switch(c.type){case"changeTrs":return _()(_()({},s),{},{curScrollTop:p});case"changeTotalLen":return i===0&&(O=0),_()(_()({},s),{},{totalLen:i,curScrollTop:O});case"reset":return _()(_()({},s),{},{curScrollTop:D?0:g!=null?g:s.curScrollTop});default:throw new Error}}var N="vtable",I=new Map,te=0,n=(0,v.createContext)({dispatch:void 0,renderLen:1,start:0,offsetStart:0,rowHeight:le.rowHeight,totalLen:0,vid:N});function o(s){var c=s.children,p=z()(s,R);return(0,j.jsx)("td",_()(_()({},p),{},{children:(0,j.jsx)("div",{children:c[1]})}))}function l(s,c){var p=(0,v.useContext)(n),i=p.rowHeight,D=s.children,g=s.style,O=z()(s,m),E=(0,v.useRef)(null);return(0,j.jsx)("tr",_()(_()({},O),{},{ref:Object.prototype.hasOwnProperty.call(c,"current")?c:E,style:_()(_()({},g),{},{height:i||"auto",boxSizing:"border-box"}),children:D}))}function u(s){var c=s.children,p=z()(s,Z),i=(0,v.useContext)(n),D=i.renderLen,g=i.start,O=i.dispatch,E=i.vid,G=i.totalLen,C=(0,v.useMemo)(function(){return c[1]},[c]),re=(0,v.useMemo)(function(){var F;return(F=C==null?void 0:C.length)!==null&&F!==void 0?F:0},[C]);(0,v.useEffect)(function(){G!==re&&O({type:"changeTotalLen",totalLen:re!=null?re:0})},[re,O,E,G]);var Y=null;return Array.isArray(C)&&C.length?Y=[c[0],C.slice(g,g+(D!=null?D:1)).map(function(F){return Array.isArray(F)?F[0]:F})]:Y=c,(0,j.jsx)("tbody",_()(_()({},p),{},{children:Y}))}function f(s,c){var p,i,D,g,O=s.style,E=s.children,G=z()(s,J),C=O.width,re=z()(O,k),Y=c!=null?c:{},F=Y.vid,de=Y.scrollY,ge=Y.resetScrollTopWhenDataChange,U=Y.rowHeight,r=Y.scrollTop,Oe=(0,v.useReducer)(M,_()(_()({},le),{},{curScrollTop:r,rowHeight:U})),be=b()(Oe,2),B=be[0],fe=be[1],me=(0,v.useRef)(null),Se=(0,v.useRef)(null),Ee=(0,v.useRef)(!1),Q=(0,v.useState)((p=(i=E[1])===null||i===void 0||(D=i.props)===null||D===void 0||(g=D.data)===null||g===void 0?void 0:g.length)!==null&&p!==void 0?p:0),Pe=b()(Q,2),X=Pe[0],je=Pe[1];(0,v.useEffect)(function(){je(B.totalLen)},[B.totalLen]),(0,v.useEffect)(function(){return function(){I.delete(F)}},[F]),(0,v.useEffect)(function(){var h,L,$;if(Ee.current=!0,(0,w.isNumber)((h=E[1])===null||h===void 0||(L=h.props)===null||L===void 0||($=L.data)===null||$===void 0?void 0:$.length)){var A,q,ue,H;fe({type:"changeTotalLen",totalLen:(A=(q=E[1])===null||q===void 0||(ue=q.props)===null||ue===void 0||(H=ue.data)===null||H===void 0?void 0:H.length)!==null&&A!==void 0?A:0})}},[E[1].props.data]);var xe=(0,v.useMemo)(function(){var h="auto";return U&&X&&(h=U*X),h},[X]),Fe=(0,v.useState)(0),Re=b()(Fe,2),P=Re[0],ye=Re[1];(0,v.useEffect)(function(){var h=0;if(typeof de=="string"){var L,$,A;h=(L=($=me.current)===null||$===void 0||(A=$.parentNode)===null||A===void 0?void 0:A.offsetHeight)!==null&&L!==void 0?L:0}else h=de;h<=0&&(h=0),ye(h)},[de,xe]);var Ce=(0,v.useMemo)(function(){var h=1;if(U&&X&&P)if(P<=0)h=0;else{var L=(P/U|0)+10;h=L}return h},[X,P]),ce=U?B.curScrollTop/U|0:0;ce=ce<5?0:ce-5+1;var _e=B.curScrollTop%(U*5);return ce>0&&(_e=_e%U),B.curScrollTop&&B.curScrollTop>=U*5?_e+=U*4:ce=0,(0,v.useEffect)(function(){var h,L=(h=me.current)===null||h===void 0?void 0:h.parentNode;Ee!=null&&Ee.current&&(Ee.current=!1,ge?(L&&(L.scrollTop=0),fe({type:"reset",ifScrollTopClear:!0})):fe({type:"reset",ifScrollTopClear:!1})),I.has(F)&&I.set(F,_()(_()({},I.get(F)),{},{scrollNode:L}))},[X,ge,F,E]),(0,v.useEffect)(function(){var h,L=(0,w.throttle)(function(A){var q,ue,H=(q=A==null||(ue=A.target)===null||ue===void 0?void 0:ue.scrollTop)!==null&&q!==void 0?q:0;H&&(te=H),fe({type:"changeTrs",curScrollTop:Ce<=X?H:0})},60),$=me==null||(h=me.current)===null||h===void 0?void 0:h.parentNode;return $&&$.addEventListener("scroll",L,{passive:!0}),function(){$.removeEventListener("scroll",L)}},[Ce,X]),(0,j.jsx)("div",{className:"virtuallist",ref:me,style:{width:"100%",position:"relative",height:xe,boxSizing:"border-box",paddingTop:B.curScrollTop},children:(0,j.jsx)(n.Provider,{value:{dispatch:fe,start:ce,offsetStart:_e,renderLen:Ce,totalLen:X,vid:F,rowHeight:U},children:(0,j.jsx)("table",_()(_()({},G),{},{ref:Se,style:_()(_()({},re),{},{width:C,position:"relative",transform:"translateY(-".concat(_e,"px)")}),children:E}))})})}function x(s){var c=s.vid,p=c===void 0?N:c,i=s.rowHeight,D=s.height,g=s.reset,O=s.scrollTop,E=g!=null?g:!0;return I.has(p)||I.set(p,{_id:p}),{table:function(C){return f(C,{vid:p,scrollY:D,rowHeight:i,resetScrollTopWhenDataChange:E,scrollTop:O})},body:{wrapper:u,row:l,cell:o}}}},78527:function(he,K,e){var V=e(54306),b=e.n(V),oe=e(63313),z=e.n(oe),ae=e(61761),_=e(96001);K.Z=function(v,S){var w=(0,oe.useState)(0),ne=b()(w,2),j=ne[0],R=ne[1];return(0,ae.Z)(v,function(m){var Z=m.target;Z.classList.contains("ant-table-wrapper")||(Z=m.target.querySelector(".ant-table-wrapper")),R((0,_.W9)({extraHeight:S,target:Z}))}),j}},75708:function(he,K,e){e.r(K);var V=e(25359),b=e.n(V),oe=e(49811),z=e.n(oe),ae=e(54306),_=e.n(ae),v=e(63313),S=e.n(v),w=e(91692),ne=e(32049),j=e(24550),R=e(38626),m=e(96786),Z=e(45277),J=e(11527),k=function(M){var N=M.ids,I=M.handleCancel,te=M.visible,n=w.Z.useForm(),o=_()(n,1),l=o[0],u=(0,v.useState)(!1),f=_()(u,2),x=f[0],s=f[1],c=function(){var p=z()(b()().mark(function i(D){var g,O,E;return b()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return s(!0),C.prev=1,C.next=4,m.W.put("".concat(Z.Z.apiPrefix,"envs/name"),{data:{ids:N,name:D.name}});case 4:g=C.sent,O=g.code,E=g.data,O===200&&(ne.ZP.success("\u66F4\u65B0\u73AF\u5883\u53D8\u91CF\u540D\u79F0\u6210\u529F"),I()),s(!1),C.next=14;break;case 11:C.prev=11,C.t0=C.catch(1),s(!1);case 14:case"end":return C.stop()}},i,null,[[1,11]])}));return function(D){return p.apply(this,arguments)}}();return(0,v.useEffect)(function(){l.resetFields()},[N,te]),(0,J.jsx)(j.Z,{title:"\u4FEE\u6539\u73AF\u5883\u53D8\u91CF\u540D\u79F0",open:te,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then(function(i){c(i)}).catch(function(i){console.log("Validate Failed:",i)})},onCancel:function(){return I()},confirmLoading:x,children:(0,J.jsx)(w.Z,{form:l,layout:"vertical",name:"edit_name_modal",children:(0,J.jsx)(w.Z.Item,{name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u7684\u73AF\u5883\u53D8\u91CF\u540D\u79F0"}],children:(0,J.jsx)(R.Z,{placeholder:"\u8BF7\u8F93\u5165\u65B0\u7684\u73AF\u5883\u53D8\u91CF\u540D\u79F0"})})})})};K.default=k},97976:function(he,K,e){e.r(K),e.d(K,{default:function(){return Re}});var V=e(25359),b=e.n(V),oe=e(49811),z=e.n(oe),ae=e(12342),_=e.n(ae),v=e(57213),S=e.n(v),w=e(93525),ne=e.n(w),j=e(54306),R=e.n(j),m=e(63313),Z=e(10816),J=e(38626),k=e(75448),le=e(33682),M=e(46236),N=e(24550),I=e(32049),te=e(47661),n=e(21728),o=e(31625),l=e(97947),u=e(9734),f=e(85451),x=e(5962),s=e(74241),c=e(45277),p=e(97302),i=e(96786),D=e(23881),g=e(75708),O=e(12927),E=e(56833),G=e(94701),C=e(66255),re=e(96001),Y=e(95354),F=e(78527),de=e(21391),ge=e(68059),U=e(90943),r=e(11527),Oe=Z.Z.Link,be=function(ye){var Ce=ye.text,ce=(0,m.useState)(!1),_e=R()(ce,2),h=_e[0],L=_e[1],$=(0,m.useRef)(),A=function(H){H==null||H.preventDefault(),H==null||H.stopPropagation(),L(!0),q(),$.current=window.setTimeout(function(){L(!1)},3e3)},q=function(){window.clearTimeout($.current)};return(0,r.jsx)(Oe,{onClick:A,style:{marginLeft:1},children:(0,r.jsx)(U.CopyToClipboard,{text:Ce,children:(0,r.jsx)(k.Z,{title:h?"\u590D\u5236\u6210\u529F":"\u590D\u5236",children:h?(0,r.jsx)(de.Z,{}):(0,r.jsx)(ge.Z,{})},"copy")})})},B=be,fe=e(35272),me=["index","moveRow","className","style"],Se=Z.Z.Text,Ee=J.Z.Search,Q;(function(P){P[P.\u5DF2\u542F\u7528=0]="\u5DF2\u542F\u7528",P[P.\u5DF2\u7981\u7528=1]="\u5DF2\u7981\u7528"})(Q||(Q={}));var Pe;(function(P){P[P.success=0]="success",P[P.error=1]="error"})(Pe||(Pe={}));var X;(function(P){P[P.\u542F\u7528=0]="\u542F\u7528",P[P.\u7981\u7528=1]="\u7981\u7528"})(X||(X={}));var je;(function(P){P[P.enable=0]="enable",P[P.disable=1]="disable"})(je||(je={}));var xe="DragableBodyRow",Fe=function(){var ye=(0,Y.bx)(),Ce=ye.headerStyle,ce=ye.isPhone,_e=ye.theme,h=[{title:"\u5E8F\u53F7",width:60,render:function(t,a,y){return(0,r.jsxs)("span",{style:{cursor:"text"},children:[y+1," "]})}},{title:"\u540D\u79F0",dataIndex:"name",key:"name",sorter:function(t,a){return t.name.localeCompare(a.name)}},{title:"\u503C",dataIndex:"value",key:"value",width:"35%",render:function(t,a){return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(k.Z,{title:t,placement:"topLeft",children:(0,r.jsx)("div",{className:"text-ellipsis",children:t})}),(0,r.jsx)(B,{text:t})]})}},{title:"\u5907\u6CE8",dataIndex:"remarks",key:"remarks",render:function(t,a){return(0,r.jsx)(k.Z,{title:t,placement:"topLeft",children:(0,r.jsx)("div",{className:"text-ellipsis",children:t})})}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"timestamp",key:"timestamp",width:165,ellipsis:{showTitle:!1},sorter:{compare:function(t,a){var y=new Date(t.updatedAt||t.timestamp).getTime(),T=new Date(a.updatedAt||a.timestamp).getTime();return y-T}},render:function(t,a){var y=navigator.language||navigator.languages[0],T=a.updatedAt||a.timestamp,W=new Date(T).toLocaleString(y,{hour12:!1}).replace(" 24:"," 00:");return(0,r.jsx)(k.Z,{placement:"topLeft",title:W,trigger:["hover","click"],children:(0,r.jsx)("span",{children:W})})}},{title:"\u72B6\u6001",key:"status",dataIndex:"status",width:70,filters:[{text:"\u5DF2\u542F\u7528",value:0},{text:"\u5DF2\u7981\u7528",value:1}],onFilter:function(t,a){return a.status===t},render:function(t,a,y){return(0,r.jsx)(le.Z,{size:"middle",style:{cursor:"text"},children:(0,r.jsx)(M.Z,{color:Pe[a.status],style:{marginRight:0},children:Q[a.status]})})}},{title:"\u64CD\u4F5C",key:"action",width:120,render:function(t,a,y){var T=!ce;return(0,r.jsxs)(le.Z,{size:"middle",children:[(0,r.jsx)(k.Z,{title:T?"\u7F16\u8F91":"",children:(0,r.jsx)("a",{onClick:function(){return En(a,y)},children:(0,r.jsx)(l.Z,{})})}),(0,r.jsx)(k.Z,{title:T?a.status===Q.\u5DF2\u7981\u7528?"\u542F\u7528":"\u7981\u7528":"",children:(0,r.jsx)("a",{onClick:function(){return hn(a,y)},children:a.status===Q.\u5DF2\u7981\u7528?(0,r.jsx)(u.Z,{}):(0,r.jsx)(f.Z,{})})}),(0,r.jsx)(k.Z,{title:T?"\u5220\u9664":"",children:(0,r.jsx)("a",{onClick:function(){return yn(a,y)},children:(0,r.jsx)(x.Z,{})})})]})}}],L=(0,m.useState)([]),$=R()(L,2),A=$[0],q=$[1],ue=(0,m.useState)(!0),H=R()(ue,2),Ue=H[0],Ke=H[1],an=(0,m.useState)(!1),we=R()(an,2),ln=we[0],Be=we[1],un=(0,m.useState)(!1),Ne=R()(un,2),sn=Ne[0],$e=Ne[1],dn=(0,m.useState)(),He=R()(dn,2),cn=He[0],Ve=He[1],vn=(0,m.useState)([]),ze=R()(vn,2),ve=ze[0],ke=ze[1],fn=(0,m.useState)(""),Ge=R()(fn,2),Ye=Ge[0],_n=Ge[1],mn=(0,m.useState)(!1),Je=R()(mn,2),pn=Je[0],Ie=Je[1],We=(0,m.useRef)(),Ze=(0,F.Z)(We,59),Le=(0,m.useRef)(!0),pe=function(t){Le.current=t},De=function(){Ke(!0),i.W.get("".concat(c.Z.apiPrefix,"envs?searchValue=").concat(Ye)).then(function(t){var a=t.code,y=t.data;a===200&&q(y)}).finally(function(){return Ke(!1)})},hn=function(t,a){pe(!1),N.Z.confirm({title:"\u786E\u8BA4".concat(t.status===Q.\u5DF2\u7981\u7528?"\u542F\u7528":"\u7981\u7528"),content:(0,r.jsxs)(r.Fragment,{children:["\u786E\u8BA4",t.status===Q.\u5DF2\u7981\u7528?"\u542F\u7528":"\u7981\u7528","Env"," ",(0,r.jsx)(Se,{style:{wordBreak:"break-all"},type:"warning",children:t.value})," ","\u5417"]}),onOk:function(){i.W.put("".concat(c.Z.apiPrefix,"envs/").concat(t.status===Q.\u5DF2\u7981\u7528?"enable":"disable"),{data:[t.id]}).then(function(T){var W=T.code,ie=T.data;if(W===200){I.ZP.success("".concat(t.status===Q.\u5DF2\u7981\u7528?"\u542F\u7528":"\u7981\u7528","\u6210\u529F"));var se=t.status===Q.\u5DF2\u7981\u7528?Q.\u5DF2\u542F\u7528:Q.\u5DF2\u7981\u7528,Me=ne()(A);Me.splice(a,1,S()(S()({},t),{},{status:se})),q(Me)}})},onCancel:function(){console.log("Cancel")}})},gn=function(){pe(!1),Ve(null),Be(!0)},En=function(t,a){pe(!1),Ve(t),Be(!0)},yn=function(t,a){pe(!1),N.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,r.jsxs)(r.Fragment,{children:["\u786E\u8BA4\u5220\u9664\u53D8\u91CF"," ",(0,r.jsxs)(Se,{style:{wordBreak:"break-all"},type:"warning",children:[t.name,": ",t.value]})," ","\u5417"]}),onOk:function(){i.W.delete("".concat(c.Z.apiPrefix,"envs"),{data:[t.id]}).then(function(T){var W=T.code,ie=T.data;if(W===200){I.ZP.success("\u5220\u9664\u6210\u529F");var se=ne()(A);se.splice(a,1),q(se)}})},onCancel:function(){console.log("Cancel")}})},Cn=function(t){Be(!1),De()},On=function(t){$e(!1),De()},Ae=(0,m.useMemo)(function(){var d,t;return(0,fe.i)({height:Ze,reset:Le.current,rowHeight:48,scrollTop:Le.current?0:(d=We.current)===null||d===void 0||(t=d.querySelector(".ant-table-body"))===null||t===void 0?void 0:t.scrollTop})},[Ze,Le.current]),Pn=function(t){var a=t.index,y=t.moveRow,T=t.className,W=t.style,ie=_()(t,me),se=(0,m.useRef)(),Me=(0,O.L)({accept:xe,collect:function(Te){var Wn=Te.getItem()||{},on=Wn.index;return on===a?{}:{isOver:Te.isOver(),dropClassName:on<a?" drop-over-downward":" drop-over-upward"}},drop:function(Te){y(Te.index,a)}}),ee=R()(Me,2),Xe=ee[0],qe=Xe.isOver,en=Xe.dropClassName,nn=ee[1],An=(0,E.c)({type:xe,item:{index:a},collect:function(Te){return{isDragging:Te.isDragging()}}}),Fn=R()(An,2),tn=Fn[1];(0,m.useEffect)(function(){nn(tn(se))},[tn,nn]);var Bn=(0,m.useMemo)(function(){return Ae.body.row},[]),In=(0,m.useMemo)(function(){return S()({ref:se,className:"".concat(T).concat(qe?en:""),style:S()({cursor:"move"},W)},ie)},[T,en,ie,W,qe]);return(0,r.jsxs)(r.Fragment,{children:[" ",Bn(In,se)," "]})},Dn=(0,m.useMemo)(function(){return S()(S()({},Ae),{},{body:S()(S()({},Ae.body),{},{row:Pn})})},[Ae]),Tn=(0,m.useCallback)(function(d,t){if(d!==t){var a=A[d];i.W.put("".concat(c.Z.apiPrefix,"envs/").concat(a.id,"/move"),{data:{fromIndex:d,toIndex:t}}).then(function(y){var T=y.code,W=y.data;if(T===200){var ie=ne()(A);ie.splice(d,1),ie.splice(t,0,S()(S()({},a),W.data)),q(ne()(ie))}})}},[A]),bn=function(t){ke(t)};(0,m.useEffect)(function(){pe(!1)},[ve]);var jn={selectedRowKeys:ve,onChange:bn},xn=function(){pe(!1),N.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,r.jsx)(r.Fragment,{children:"\u786E\u8BA4\u5220\u9664\u9009\u4E2D\u7684\u53D8\u91CF\u5417"}),onOk:function(){i.W.delete("".concat(c.Z.apiPrefix,"envs"),{data:ve}).then(function(a){var y=a.code,T=a.data;y===200&&(I.ZP.success("\u6279\u91CF\u5220\u9664\u6210\u529F"),ke([]),De())})},onCancel:function(){console.log("Cancel")}})},Qe=function(t){pe(!1),N.Z.confirm({title:"\u786E\u8BA4".concat(X[t]),content:(0,r.jsxs)(r.Fragment,{children:["\u786E\u8BA4",X[t],"\u9009\u4E2D\u7684\u53D8\u91CF\u5417"]}),onOk:function(){i.W.put("".concat(c.Z.apiPrefix,"envs/").concat(je[t]),{data:ve}).then(function(y){var T=y.code,W=y.data;T===200&&De()})},onCancel:function(){console.log("Cancel")}})},Mn=function(){var t=A.filter(function(a){return ve.includes(a.id)}).map(function(a){return{value:a.value,name:a.name,remarks:a.remarks}});(0,re.w7)("env.json",JSON.stringify(t))},Sn=function(){$e(!0)},Rn=function(t){pe(!0),_n(t.trim())},Ln={accept:"application/json",beforeUpload:function(){var d=z()(b()().mark(function a(y){var T,W,ie,se;return b()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return T=new FormData,T.append("env",y),Ie(!0),ee.prev=3,ee.next=6,i.W.post("".concat(c.Z.apiPrefix,"envs/upload"),{data:T});case 6:W=ee.sent,ie=W.code,se=W.data,ie===200&&(I.ZP.success("\u6210\u529F\u4E0A\u4F20".concat(se.length,"\u4E2A\u73AF\u5883\u53D8\u91CF")),De()),Ie(!1),ee.next=16;break;case 13:ee.prev=13,ee.t0=ee.catch(3),Ie(!1);case 16:return ee.abrupt("return",!1);case 17:case"end":return ee.stop()}},a,null,[[3,13]])}));function t(a){return d.apply(this,arguments)}return t}(),fileList:[]};return(0,m.useEffect)(function(){De()},[Ye]),(0,r.jsxs)(p.ZP,{className:"ql-container-wrapper env-wrapper",title:"\u73AF\u5883\u53D8\u91CF",extra:[(0,r.jsx)(Ee,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0/\u503C/\u5907\u6CE8",style:{width:"auto"},enterButton:!0,loading:Ue,onSearch:Rn}),(0,r.jsx)(te.Z,S()(S()({},Ln),{},{children:(0,r.jsx)(n.Z,{type:"primary",icon:(0,r.jsx)(s.Z,{}),loading:pn,children:"\u5BFC\u5165"})})),(0,r.jsx)(n.Z,{type:"primary",onClick:function(){return gn()},children:"\u65B0\u5EFA\u53D8\u91CF"},"2")],header:{style:Ce},children:[(0,r.jsxs)("div",{ref:We,children:[ve.length>0&&(0,r.jsxs)("div",{style:{marginBottom:16},children:[(0,r.jsx)(n.Z,{type:"primary",style:{marginBottom:5},onClick:Sn,children:"\u6279\u91CF\u4FEE\u6539\u53D8\u91CF\u540D\u79F0"}),(0,r.jsx)(n.Z,{type:"primary",style:{marginBottom:5,marginLeft:8},onClick:xn,children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsx)(n.Z,{type:"primary",onClick:function(){return Mn()},style:{marginLeft:8,marginRight:8},children:"\u6279\u91CF\u5BFC\u51FA"}),(0,r.jsx)(n.Z,{type:"primary",onClick:function(){return Qe(0)},style:{marginLeft:8,marginBottom:5},children:"\u6279\u91CF\u542F\u7528"}),(0,r.jsx)(n.Z,{type:"primary",onClick:function(){return Qe(1)},style:{marginLeft:8,marginRight:8},children:"\u6279\u91CF\u7981\u7528"}),(0,r.jsxs)("span",{style:{marginLeft:8},children:["\u5DF2\u9009\u62E9",(0,r.jsx)("a",{children:ve==null?void 0:ve.length}),"\u9879"]})]}),(0,r.jsx)(G.W,{backend:C.PD,children:(0,r.jsx)(o.Z,{columns:h,rowSelection:jn,pagination:!1,dataSource:A,rowKey:"id",size:"middle",scroll:{x:1e3,y:Ze},components:Dn,loading:Ue,onRow:function(t,a){return{index:a,moveRow:Tn}}})})]}),(0,r.jsx)(D.default,{visible:ln,handleCancel:Cn,env:cn}),(0,r.jsx)(g.default,{visible:sn,handleCancel:On,ids:ve})]})},Re=Fe},23881:function(he,K,e){e.r(K);var V=e(25359),b=e.n(V),oe=e(57213),z=e.n(oe),ae=e(49811),_=e.n(ae),v=e(54306),S=e.n(v),w=e(63313),ne=e.n(w),j=e(91692),R=e(32049),m=e(24550),Z=e(38626),J=e(59720),k=e(96786),le=e(45277),M=e(11527),N=function(te){var n=te.env,o=te.handleCancel,l=te.visible,u=j.Z.useForm(),f=S()(u,1),x=f[0],s=(0,w.useState)(!1),c=S()(s,2),p=c[0],i=c[1],D=function(){var g=_()(b()().mark(function O(E){var G,C,re,Y,F,de,ge,U,r,Oe;return b()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return i(!0),G=E.value,C=E.split,re=E.name,Y=E.remarks,F=n?"put":"post",n?de=z()(z()({},E),{},{id:n.id}):C==="1"?(ge=G.includes("&")?"&":`
`,de=G.split(ge).map(function(fe){return{name:re,value:fe,remarks:Y}})):de=[{value:G,name:re,remarks:Y}],B.prev=4,B.next=7,k.W[F]("".concat(le.Z.apiPrefix,"envs"),{data:de});case 7:U=B.sent,r=U.code,Oe=U.data,r===200&&(R.ZP.success(n?"\u66F4\u65B0\u53D8\u91CF\u6210\u529F":"\u65B0\u5EFA\u53D8\u91CF\u6210\u529F"),o(Oe)),i(!1),B.next=17;break;case 14:B.prev=14,B.t0=B.catch(4),i(!1);case 17:case"end":return B.stop()}},O,null,[[4,14]])}));return function(E){return g.apply(this,arguments)}}();return(0,w.useEffect)(function(){x.resetFields()},[n,l]),(0,M.jsx)(m.Z,{title:n?"\u7F16\u8F91\u53D8\u91CF":"\u65B0\u5EFA\u53D8\u91CF",open:l,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){x.validateFields().then(function(O){D(O)}).catch(function(O){console.log("Validate Failed:",O)})},onCancel:function(){return o()},confirmLoading:p,children:(0,M.jsxs)(j.Z,{form:x,layout:"vertical",name:"env_modal",initialValues:n,children:[(0,M.jsx)(j.Z.Item,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u73AF\u5883\u53D8\u91CF\u540D\u79F0",whitespace:!0},{pattern:/^[a-zA-Z_][0-9a-zA-Z_]*$/,message:"\u53EA\u80FD\u8F93\u5165\u5B57\u6BCD\u6570\u5B57\u4E0B\u5212\u7EBF\uFF0C\u4E14\u4E0D\u80FD\u4EE5\u6570\u5B57\u5F00\u5934"}],children:(0,M.jsx)(Z.Z,{placeholder:"\u8BF7\u8F93\u5165\u73AF\u5883\u53D8\u91CF\u540D\u79F0"})}),!n&&(0,M.jsx)(j.Z.Item,{name:"split",label:"\u81EA\u52A8\u62C6\u5206",initialValue:"0",tooltip:"\u591A\u4E2A\u4F9D\u8D56\u662F\u5426\u6362\u884C\u5206\u5272",children:(0,M.jsxs)(J.ZP.Group,{children:[(0,M.jsx)(J.ZP,{value:"1",children:"\u662F"}),(0,M.jsx)(J.ZP,{value:"0",children:"\u5426"})]})}),(0,M.jsx)(j.Z.Item,{name:"value",label:"\u503C",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u73AF\u5883\u53D8\u91CF\u503C",whitespace:!0}],children:(0,M.jsx)(Z.Z.TextArea,{rows:4,autoSize:!0,placeholder:"\u8BF7\u8F93\u5165\u73AF\u5883\u53D8\u91CF\u503C"})}),(0,M.jsx)(j.Z.Item,{name:"remarks",label:"\u5907\u6CE8",children:(0,M.jsx)(Z.Z,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"})})]})})};K.default=N},92015:function(he,K,e){function V(n){return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},V(n)}Object.defineProperty(K,"__esModule",{value:!0}),K.CopyToClipboard=void 0;var b=ae(e(63313)),oe=ae(e(874)),z=["text","onCopy","options","children"];function ae(n){return n&&n.__esModule?n:{default:n}}function _(n,o){var l=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(n,f).enumerable})),l.push.apply(l,u)}return l}function v(n){for(var o=1;o<arguments.length;o++){var l=arguments[o]!=null?arguments[o]:{};o%2?_(Object(l),!0).forEach(function(u){I(n,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):_(Object(l)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(l,u))})}return n}function S(n,o){if(n==null)return{};var l=w(n,o),u,f;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(n);for(f=0;f<x.length;f++)u=x[f],!(o.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(n,u)&&(l[u]=n[u])}return l}function w(n,o){if(n==null)return{};var l={},u=Object.keys(n),f,x;for(x=0;x<u.length;x++)f=u[x],!(o.indexOf(f)>=0)&&(l[f]=n[f]);return l}function ne(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function j(n,o){for(var l=0;l<o.length;l++){var u=o[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function R(n,o,l){return o&&j(n.prototype,o),l&&j(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n}function m(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),o&&Z(n,o)}function Z(n,o){return Z=Object.setPrototypeOf||function(u,f){return u.__proto__=f,u},Z(n,o)}function J(n){var o=M();return function(){var u=N(n),f;if(o){var x=N(this).constructor;f=Reflect.construct(u,arguments,x)}else f=u.apply(this,arguments);return k(this,f)}}function k(n,o){if(o&&(V(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return le(n)}function le(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function N(n){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},N(n)}function I(n,o,l){return o in n?Object.defineProperty(n,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[o]=l,n}var te=function(n){m(l,n);var o=J(l);function l(){var u;ne(this,l);for(var f=arguments.length,x=new Array(f),s=0;s<f;s++)x[s]=arguments[s];return u=o.call.apply(o,[this].concat(x)),I(le(u),"onClick",function(c){var p=u.props,i=p.text,D=p.onCopy,g=p.children,O=p.options,E=b.default.Children.only(g),G=(0,oe.default)(i,O);D&&D(i,G),E&&E.props&&typeof E.props.onClick=="function"&&E.props.onClick(c)}),u}return R(l,[{key:"render",value:function(){var f=this.props,x=f.text,s=f.onCopy,c=f.options,p=f.children,i=S(f,z),D=b.default.Children.only(p);return b.default.cloneElement(D,v(v({},i),{},{onClick:this.onClick}))}}]),l}(b.default.PureComponent);K.CopyToClipboard=te,I(te,"defaultProps",{onCopy:void 0,options:void 0})},90943:function(he,K,e){var V=e(92015),b=V.CopyToClipboard;b.CopyToClipboard=b,he.exports=b}}]);
