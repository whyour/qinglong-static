(self.webpackChunk_whyour_qinglong=self.webpackChunk_whyour_qinglong||[]).push([[6534,9064,8673,440,4402],{44224:function(e,t,n){"use strict";var r=(0,n(19919).Z)({scriptUrl:["//at.alicdn.com/t/c/font_3354854_lc939gab1iq.js"]});t.Z=r},82802:function(e,t,n){"use strict";var r=n(26068),i=n.n(r),a=n(75271);t.Z=function(e,t,n){var r=n.treeNodeFilterProp;return(0,a.useMemo)((function(){var n=[];if(!t)return{treeData:e,keys:n};var a=t.toUpperCase();function o(e,t){var n=t[r];return String(n).toUpperCase().includes(a)}return{treeData:function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.map((function(t){var a=t.children,l=r||o(0,t),s=e(a||[],l);return l||s.length?(s.length&&n.push(t.key),i()(i()({},t),{},{children:s})):null})).filter((function(e){return e}))}(e),keys:n}}),[e,t,r])}},79297:function(e,t,n){"use strict";n.r(t);var r=n(26068),i=n.n(r),a=n(48305),o=n.n(a),l=n(72317),s=n(75271),c=n(35181),u=n(53390),d=n(88142),p=n(93481),g=n(16314),h=n(3475),f=n(43382),v=n(83383),m=n(90310),Z=n(3843),P=n(9364),b=n(52076),y=n(65814),x=n(78060),k=n.n(x),w=n(52676),j=c.Z.Option;t.default=function(e){var t=e.treeData,n=e.currentNode,r=e.content,a=e.handleCancel,x=e.visible,S=(0,s.useState)(""),C=o()(S,2),_=C[0],q=C[1],E=(0,s.useState)(),B=o()(E,2),I=B[0],R=B[1],T=(0,s.useState)(),F=o()(T,2),D=F[0],N=F[1],A=(0,s.useState)(),M=o()(A,2),V=M[0],H=M[1],U=(0,s.useState)(!1),L=o()(U,2),O=L[0],W=L[1],K=(0,s.useState)(!1),z=o()(K,2),Q=z[0],X=z[1],Y=(0,s.useState)(""),G=o()(Y,2),$=G[0],J=G[1],ee=(0,P.F)().theme,te=(0,s.useRef)(null),ne=(0,s.useState)(!1),re=o()(ne,2),ie=re[0],ae=re[1],oe=(0,s.useState)(null),le=o()(oe,2),se=le[0],ce=le[1],ue=function(e){g.W.get("".concat(h.Z.apiPrefix,"scripts/detail?file=").concat(e.title,"&path=").concat(e.parent||"")).then((function(e){var t=e.code,n=e.data;200===t&&q(n)}))},de=function(){D&&D.title&&se&&g.W.put("".concat(h.Z.apiPrefix,"scripts/stop"),{filename:D.title,path:D.parent||"",pid:se}).then((function(e){var t=e.code;e.data;200===t&&ae(!1)}))},pe=(0,s.useCallback)((function(e){var t=e.message;(0,b.x$)(t)&&setTimeout((function(){ae(!1)}),300),J((function(e){return"".concat(e).concat(t)}))}),[]);return(0,s.useEffect)((function(){var e=y.Z.getInstance();return e.subscribe("manuallyRunScript",pe),function(){e.unsubscribe("manuallyRunScript",pe)}}),[]),(0,s.useEffect)((function(){if(J(""),n){N(n),q(r),H(n.key);var e=(0,b.H$)(n.title);R(e)}}),[r,n]),(0,w.jsxs)(u.Z,{className:"edit-modal",closable:!1,title:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{treeExpandAction:"click",style:{marginRight:8,width:300},value:V,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:t,placeholder:l.ZP.get("请选择脚本文件"),fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:function(e,t){if(t.key!==V&&e&&"directory"!==t.type){var n=(0,b.H$)(e);N(t),R(n),ue(t),H(t.key)}},treeLine:{showLeafIcon:!0}}),(0,w.jsxs)(c.Z,{value:I,style:{width:110,marginRight:8},onChange:function(e){R(e)},children:[(0,w.jsx)(j,{value:"javascript",children:"javascript"}),(0,w.jsx)(j,{value:"typescript",children:"typescript"}),(0,w.jsx)(j,{value:"shell",children:"shell"}),(0,w.jsx)(j,{value:"python",children:"python"})]}),(0,w.jsx)(p.Z,{type:"primary",style:{marginRight:8},onClick:ie?de:function(){J("");var e=te.current.getValue().replace(/\r\n/g,"\n");g.W.put("".concat(h.Z.apiPrefix,"scripts/run"),{filename:D.title,path:D.parent||"",content:e}).then((function(e){var t=e.code,n=e.data;200===t&&(ae(!0),ce(n))}))},children:ie?l.ZP.get("停止"):l.ZP.get("运行")}),(0,w.jsx)(p.Z,{type:"primary",style:{marginRight:8},onClick:function(){J("")},children:l.ZP.get("清空日志")}),(0,w.jsx)(p.Z,{type:"primary",style:{marginRight:8},onClick:function(){W(!0)},children:l.ZP.get("保存")}),(0,w.jsx)(p.Z,{type:"primary",style:{marginRight:8},onClick:function(){de(),a()},children:l.ZP.get("退出")})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:function(){a()},open:x,children:[(0,w.jsxs)(f.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},pane2Style:{overflowY:"auto"},children:[(0,w.jsx)(v.ZP,{language:I,value:_,theme:ee,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1,accessibilitySupport:"off"},onMount:function(e){te.current=e}}),(0,w.jsx)("pre",{style:{padding:"0 15px"},children:(0,w.jsx)(k(),{children:$})})]}),(0,w.jsx)(m.default,{visible:O,handleCancel:function(){W(!1)},file:i()({content:te.current&&te.current.getValue().replace(/\r\n/g,"\n")},D)}),(0,w.jsx)(Z.default,{visible:Q,handleCancel:function(){X(!1)}})]})}},6334:function(e,t,n){"use strict";n.r(t);var r=n(26068),i=n.n(r),a=n(335),o=n.n(a),l=n(90228),s=n.n(l),c=n(87999),u=n.n(c),d=n(48305),p=n.n(d),g=n(72317),h=n(75271),f=n(35181),v=n(72338),m=n(61508),Z=n(45520),P=n(94747),b=n(17082),y=n(88142),x=n(6367),k=n(16314),w=n(3475),j=n(79231),S=n(52676);f.Z.Option;t.default=function(e){var t=e.handleCancel,n=e.treeData,r=e.visible,a=v.Z.useForm(),l=p()(a,1)[0],c=(0,h.useState)(!1),d=p()(c,2),f=d[0],C=d[1],_=(0,h.useState)([]),q=p()(_,2),E=q[0],B=q[1],I=(0,h.useState)(),R=p()(I,2),T=R[0],F=R[1],D=(0,h.useState)("blank"),N=p()(D,2),A=N[0],M=N[1],V=function(){var e=u()(s()().mark((function e(n){var r,i,a,o,l,c;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),r=n.path,i=void 0===r?"":r,a=n.filename,o=n.directory,l=void 0===o?"":o,(c=new FormData).append("file",T||""),c.append("filename",(null==T?void 0:T.name)||a),c.append("path",i),c.append("content",""),c.append("directory",l),k.W.post("".concat(w.Z.apiPrefix,"scripts"),c).then((function(e){var n=e.code;e.data;if(200===n){m.ZP.success(l?g.ZP.get("创建文件夹成功"):g.ZP.get("创建文件成功"));var r=i?"".concat(i,"/"):"",o=T?T.name:a;t({filename:o,path:i,key:"".concat(r).concat(o)})}C(!1)})).finally((function(){return C(!1)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function e(t){var n,r=o()(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.children&&a.children.length>0&&(a.children=a.children.filter((function(e){return"directory"===e.type})).map((function(e){return i()(i()({},e),{},{disabled:!1})})),e(a.children))}}catch(e){r.e(e)}finally{r.f()}return t};return(0,h.useEffect)((function(){var e=n.filter((function(e){return"directory"===e.type})).map((function(e){return i()(i()({},e),{},{disabled:!1})})),t=H(e);B(t)}),[n]),(0,h.useEffect)((function(){l.resetFields()}),[r]),(0,S.jsx)(Z.Z,{title:g.ZP.get("创建"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then((function(e){V(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return t()},confirmLoading:f,children:(0,S.jsxs)(v.Z,{form:l,layout:"vertical",name:"edit_name_modal",children:[(0,S.jsx)(v.Z.Item,{name:"type",label:g.ZP.get("类型"),rules:[{required:!0}],initialValue:"blank",children:(0,S.jsxs)(P.ZP.Group,{onChange:function(e){M(e.target.value)},children:[(0,S.jsx)(P.ZP,{value:"blank",children:g.ZP.get("空文件")}),(0,S.jsx)(P.ZP,{value:"upload",children:g.ZP.get("本地文件")}),(0,S.jsx)(P.ZP,{value:"directory",children:g.ZP.get("文件夹")})]})}),"blank"===A&&(0,S.jsx)(v.Z.Item,{name:"filename",label:g.ZP.get("文件名"),rules:[{required:!0,message:g.ZP.get("请输入文件名")},{validator:function(e,t){return t.includes("/")?Promise.reject(new Error(g.ZP.get("文件名不能包含斜杠"))):Promise.resolve()}}],children:(0,S.jsx)(b.Z,{placeholder:g.ZP.get("请输入文件名")})}),"directory"===A&&(0,S.jsx)(v.Z.Item,{name:"directory",label:g.ZP.get("文件夹名"),rules:[{required:!0,message:g.ZP.get("请输入文件夹名")}],children:(0,S.jsx)(b.Z,{placeholder:g.ZP.get("请输入文件夹名")})}),(0,S.jsx)(v.Z.Item,{label:g.ZP.get("父目录"),name:"path",children:(0,S.jsx)(y.Z,{allowClear:!0,treeData:E,fieldNames:{value:"key",label:"title"},placeholder:g.ZP.get("请选择父目录"),treeDefaultExpandAll:!0})}),"upload"===A&&(0,S.jsx)(v.Z.Item,{label:g.ZP.get("文件"),name:"file",children:(0,S.jsxs)(x.Z.Dragger,{beforeUpload:function(e){return F(e),!1},maxCount:1,children:[(0,S.jsx)("p",{className:"ant-upload-drag-icon",children:(0,S.jsx)(j.Z,{})}),(0,S.jsx)("p",{className:"ant-upload-text",children:g.ZP.get("点击或者拖拽文件到此区域上传")})]})})]})})}},15738:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(15558),i=n.n(r),a=n(48305),o=n.n(a),l=n(72317),s=n(75271),c=n(50691),u=n(45520),d=n(61508),p=n(88142),g=n(85950),h=n(93481),f=n(59816),v=n(17082),m=n(13107),Z=n(98705),P=n(3475),b=n(47508),y=n(83383),x=n(16314),k={"left-tree-container":"left-tree-container___z9VeF","left-tree-scroller":"left-tree-scroller___MRc8C","log-container":"log-container___Iva4k"},w=n(79297),j=n(71742),S=n(43382),C=n(21288),_=n(28423),q=n(88939),E=n(97953),B=n(6334),I=n(66292),R=n.n(I),T=n(98783),F=n(40324),D=n(52076),N=n(82802),A=n(4363),M=n.n(A),V=n(44224),H=n(97428),U=n(82904),L=n(28837),O=n(79514),W=n(52676),K=c.Z.Text,z=function(){var e=(0,T.useOutletContext)(),t=e.headerStyle,n=e.isPhone,r=e.theme,a=(0,s.useState)(l.ZP.get("请选择脚本文件")),c=o()(a,2),I=c[0],A=c[1],z=(0,s.useState)(l.ZP.get("请选择脚本文件")),Q=o()(z,2),X=Q[0],Y=Q[1],G=(0,s.useState)([]),$=o()(G,2),J=$[0],ee=$[1],te=(0,s.useState)(!1),ne=o()(te,2),re=ne[0],ie=ne[1],ae=(0,s.useState)(""),oe=o()(ae,2),le=oe[0],se=oe[1],ce=(0,s.useState)(),ue=o()(ce,2),de=ue[0],pe=ue[1],ge=(0,s.useRef)(),he=(0,s.useState)(!1),fe=o()(he,2),ve=fe[0],me=fe[1],Ze=(0,s.useState)(""),Pe=o()(Ze,2),be=Pe[0],ye=Pe[1],xe=(0,s.useState)(!1),ke=o()(xe,2),we=ke[0],je=ke[1],Se=(0,s.useRef)(null),Ce=(0,s.useState)(!1),_e=o()(Ce,2),qe=_e[0],Ee=_e[1],Be=(0,s.useState)(!1),Ie=o()(Be,2),Re=Ie[0],Te=Ie[1],Fe=(0,s.useState)(),De=o()(Fe,2),Ne=De[0],Ae=De[1],Me=(0,s.useState)([]),Ve=o()(Me,2),He=Ve[0],Ue=Ve[1],Le=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&ie(!0),x.W.get("".concat(P.Z.apiPrefix,"scripts")).then((function(e){var t=e.code,n=e.data;200===t&&(ee(n),at(),We(n))})).finally((function(){return e&&ie(!1)}))},Oe=function(e){x.W.get("".concat(P.Z.apiPrefix,"scripts/detail?file=").concat(encodeURIComponent(e.title),"&path=").concat(e.parent||"")).then((function(e){var t=e.code,n=e.data;200===t&&A(n)}))},We=function(e){var t=(0,F.parse)(T.history.location.search),n=t.p,r=t.s;if(r){var i="".concat(n,"/").concat(r),a={node:{title:r,key:n?i:r,parent:n}},o=(0,D.DY)(e,(function(e){return e.key===a.node.key}));o&&(a.node=o,Ue([n]),ze([i],a))}},Ke=function(e,t){if(t.key!==X&&e)if(Y(t.key),Ae(t),"directory"!==t.type){var r=(0,D.H$)(e);se(n&&"typescript"===r?"javascript":r),A(l.ZP.get("加载中...")),Oe(t)}else A(l.ZP.get("请选择脚本文件"))},ze=(0,s.useCallback)((function(e,t){t.node.key===X&&we||((Se.current?Se.current.getValue().replace(/\r\n/g,"\n"):I)!==I?u.Z.confirm({title:"确认离开",content:(0,W.jsx)(W.Fragment,{children:l.ZP.get("当前修改未保存，确定离开吗")}),onOk:function(){Ke(e[0],t.node),je(!1)},onCancel:function(){console.log("Cancel")}}):(je(!1),Ke(e[0],t.node)))}),[I,X,we]),Qe=(0,s.useCallback)((function(e){var t=e.target.value;Xe(t)}),[J]),Xe=(0,s.useCallback)(R()((function(e){ye(e)}),300),[J]),Ye=(0,N.Z)(J,be,{treeNodeFilterProp:"title"}),Ge=Ye.treeData,$e=Ye.keys;(0,s.useEffect)((function(){Ue(M()([].concat(i()(He),i()($e))))}),[$e]);var Je=function(){setTimeout((function(){je(!0)}),300)},et=function(){je(!1),A(l.ZP.get("加载中...")),Oe(Ne)},tt=function(){u.Z.confirm({title:"确认保存",content:(0,W.jsxs)(W.Fragment,{children:[l.ZP.get("确认保存文件"),(0,W.jsxs)(K,{style:{wordBreak:"break-all"},type:"warning",children:[" ",Ne.title]}),l.ZP.get("，保存后不可恢复")]}),onOk:function(){var e=Se.current?Se.current.getValue().replace(/\r\n/g,"\n"):I;return new Promise((function(t,n){x.W.put("".concat(P.Z.apiPrefix,"scripts"),{filename:Ne.title,path:Ne.parent||"",content:e}).then((function(n){var r=n.code;n.data;200===r&&(d.ZP.success("保存成功"),A(e),je(!1)),t(null)})).catch((function(e){return n(e)}))}))},onCancel:function(){console.log("Cancel")}})},nt=function(){u.Z.confirm({title:"确认删除",content:(0,W.jsxs)(W.Fragment,{children:[l.ZP.get("确认删除"),(0,W.jsxs)(K,{style:{wordBreak:"break-all"},type:"warning",children:[" ",X," "]}),l.ZP.get("文件"),"directory"===Ne.type?l.ZP.get("夹及其子文件"):"",l.ZP.get("，删除后不可恢复")]}),onOk:function(){x.W.delete("".concat(P.Z.apiPrefix,"scripts"),{data:{filename:Ne.title,path:Ne.parent||"",type:Ne.type}}).then((function(e){if(200===e.code){d.ZP.success("删除成功");var t=i()(J);if(Ne.parent)t=(0,D.I1)(t,(function(e){return e.key===Ne.key}));else{var n=t.findIndex((function(e){return e.key===Ne.key}));-1!==n&&t.splice(n,1)}ee(t),at()}}))},onCancel:function(){console.log("Cancel")}})},rt=function(){Te(!0)},it=function(){Ee(!0)},at=function(){Y(l.ZP.get("请选择脚本文件")),Ae(null),A(l.ZP.get("请选择脚本文件"))};(0,s.useEffect)((function(){Le()}),[]),(0,s.useEffect)((function(){ge.current&&pe(ge.current.clientHeight-6)}),[ge.current,J]),(0,L.y1)("mod+s",(function(e){we&&tt()}),{enableOnFormTags:["textarea"],preventDefault:!0}),(0,L.y1)("mod+d",(function(e){Ne.title&&nt()}),{preventDefault:!0}),(0,L.y1)("mod+o",(function(e){we||it()}),{preventDefault:!0}),(0,L.y1)("mod+e",(function(e){Ne.title&&et()}),{preventDefault:!0});var ot=we?{items:[{label:l.ZP.get("保存"),key:"save",icon:(0,W.jsx)(C.Z,{})},{label:l.ZP.get("退出编辑"),key:"exit",icon:(0,W.jsx)(_.Z,{})}],onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),function(e){switch(e){case"save":tt();break;case"exit":et()}}(t)}}:{items:[{label:l.ZP.get("创建"),key:"add",icon:(0,W.jsx)(C.Z,{})},{label:l.ZP.get("编辑"),key:"edit",icon:(0,W.jsx)(_.Z,{}),disabled:!X},{label:l.ZP.get("重命名"),key:"rename",icon:(0,W.jsx)(V.Z,{type:"ql-icon-rename"}),disabled:!X},{label:l.ZP.get("删除"),key:"delete",icon:(0,W.jsx)(q.Z,{}),disabled:!X}],onClick:function(e){var t=e.key;e.domEvent.stopPropagation(),function(e){switch(e){case"add":it();break;case"edit":Je();break;case"delete":nt();break;case"rename":rt()}}(t)}};return(0,W.jsx)(b.ZP,{className:"ql-container-wrapper log-wrapper",title:(0,W.jsxs)(W.Fragment,{children:[X,"file"===(null==Ne?void 0:Ne.type)&&(0,W.jsx)("span",{style:{marginLeft:6,fontSize:12,color:"#999",display:"inline-block",height:14},children:(0,O.Z)(Ne.size)})]}),loading:re,extra:n?[(0,W.jsx)(p.Z,{treeExpandAction:"click",className:"log-select",value:X,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:J,placeholder:l.ZP.get("请选择脚本"),fieldNames:{value:"key"},treeNodeFilterProp:"title",showSearch:!0,allowClear:!0,onSelect:Ke}),(0,W.jsx)(g.Z,{menu:ot,trigger:["click"],children:(0,W.jsx)(h.Z,{type:"primary",icon:(0,W.jsx)(E.Z,{})})})]:we?[(0,W.jsx)(h.Z,{type:"primary",onClick:tt,children:l.ZP.get("保存")}),(0,W.jsx)(h.Z,{type:"primary",onClick:et,children:l.ZP.get("退出编辑")})]:[(0,W.jsx)(f.Z,{title:l.ZP.get("创建"),children:(0,W.jsx)(h.Z,{type:"primary",onClick:it,icon:(0,W.jsx)(C.Z,{})})}),(0,W.jsx)(f.Z,{title:l.ZP.get("编辑"),children:(0,W.jsx)(h.Z,{disabled:!X,type:"primary",onClick:Je,icon:(0,W.jsx)(_.Z,{})})}),(0,W.jsx)(f.Z,{title:l.ZP.get("重命名"),children:(0,W.jsx)(h.Z,{disabled:!X,type:"primary",onClick:rt,icon:(0,W.jsx)(V.Z,{type:"ql-icon-rename"})})}),(0,W.jsx)(f.Z,{title:l.ZP.get("删除"),children:(0,W.jsx)(h.Z,{type:"primary",disabled:!X,onClick:nt,icon:(0,W.jsx)(q.Z,{})})}),(0,W.jsx)(h.Z,{type:"primary",onClick:function(){me(!0)},children:l.ZP.get("调试")})],header:{style:t},children:(0,W.jsxs)("div",{className:"".concat(k["log-container"]," log-container"),children:[!n&&(0,W.jsxs)(S.Z,{split:"vertical",size:200,maxSize:-100,children:[(0,W.jsx)("div",{className:k["left-tree-container"],children:J.length>0?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(v.Z.Search,{className:k["left-tree-search"],onChange:Qe,placeholder:l.ZP.get("请输入脚本名"),allowClear:!0}),(0,W.jsx)("div",{className:k["left-tree-scroller"],ref:ge,children:(0,W.jsx)(m.Z,{expandAction:"click",className:k["left-tree"],treeData:Ge,showIcon:!0,height:de,selectedKeys:[X],expandedKeys:He,onExpand:function(e){Ue(e)},showLine:{showLeafIcon:!0},onSelect:ze,onDoubleClick:function(e,t){"file"===t.type&&(Y(t.key),Ae(t),je(!0))}})})]}):(0,W.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,W.jsx)(Z.Z,{description:l.ZP.get("暂无脚本"),image:Z.Z.PRESENTED_IMAGE_SIMPLE})})}),(0,W.jsx)(y.ZP,{language:le,value:I,theme:r,options:{readOnly:!we,fontSize:12,lineNumbersMinChars:3,glyphMargin:!1,accessibilitySupport:"off"},onMount:function(e){Se.current=e}})]}),n&&(0,W.jsx)(j.ZP,{value:I,extensions:le?[U.RI[le]()]:void 0,theme:r.includes("dark")?"dark":"light",readOnly:!we,onChange:function(e){A(e)}}),ve&&(0,W.jsx)(w.default,{visible:ve,treeData:J,currentNode:Ne,content:I,handleCancel:function(){me(!1)}}),(0,W.jsx)(B.default,{visible:qe,treeData:J,handleCancel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filename:"",path:"",key:""},t=e.filename,n=e.path,r=e.key;if(t){var a=i()(J),o={title:t,key:r,parent:n};if(n){a=(0,D.I1)(a,(function(e){return e.key===n}),o);var l=n.split("/"),s=[];l.reduce((function(e,t){return s.push(e),"".concat(e,"/").concat(t)})),Ue([].concat(i()(He),s,[n]))}else a.unshift(o);ee(a),Ke(o.title,o),je(!0)}Ee(!1)}}),(0,W.jsx)(H.default,{visible:Re,handleCancel:function(){Te(!1),Le(!1)},currentNode:Ne})]})})}},97428:function(e,t,n){"use strict";n.r(t);var r=n(90228),i=n.n(r),a=n(87999),o=n.n(a),l=n(48305),s=n.n(l),c=n(72317),u=n(75271),d=n(72338),p=n(61508),g=n(45520),h=n(17082),f=n(16314),v=n(3475),m=n(52676);t.default=function(e){var t=e.currentNode,n=e.handleCancel,r=e.visible,a=d.Z.useForm(),l=s()(a,1)[0],Z=(0,u.useState)(!1),P=s()(Z,2),b=P[0],y=P[1],x=function(){var e=o()(i()().mark((function e(r){var a,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,f.W.put("".concat(v.Z.apiPrefix,"scripts/rename"),{filename:t.title,path:t.parent||"",newFilename:r.name});case 4:a=e.sent,o=a.code,a.data,200===o&&(p.ZP.success(c.ZP.get("更新名称成功")),n()),y(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),y(!1);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){l.resetFields()}),[t,r]),(0,m.jsx)(g.Z,{title:c.ZP.get("重命名"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then((function(e){x(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return n()},confirmLoading:b,children:(0,m.jsx)(d.Z,{form:l,initialValues:{name:null==t?void 0:t.title},layout:"vertical",name:"edit_name_modal",children:(0,m.jsx)(d.Z.Item,{name:"name",rules:[{required:!0,message:c.ZP.get("请输入新名称")}],children:(0,m.jsx)(h.Z,{placeholder:c.ZP.get("请输入新名称")})})})})}},90310:function(e,t,n){"use strict";n.r(t);var r=n(90228),i=n.n(r),a=n(26068),o=n.n(a),l=n(87999),s=n.n(l),c=n(48305),u=n.n(c),d=n(72317),p=n(75271),g=n(72338),h=n(61508),f=n(45520),v=n(17082),m=n(16314),Z=n(3475),P=n(52676);t.default=function(e){var t=e.file,n=e.handleCancel,r=e.visible,a=g.Z.useForm(),l=u()(a,1)[0],c=(0,p.useState)(!1),b=u()(c,2),y=b[0],x=b[1],k=function(){var e=s()(i()().mark((function e(r){var a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),a=o()(o()(o()({},t),r),{},{originFilename:t.title}),m.W.post("".concat(Z.Z.apiPrefix,"scripts"),a).then((function(e){var t=e.code,r=e.data;200===t&&(h.ZP.success(d.ZP.get("保存文件成功")),n(r))})).finally((function(){x(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){l.resetFields(),x(!1)}),[t,r]),(0,P.jsx)(f.Z,{title:d.ZP.get("保存文件"),open:r,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){l.validateFields().then((function(e){k(e)})).catch((function(e){console.log("Validate Failed:",e)}))},onCancel:function(){return n()},confirmLoading:y,children:(0,P.jsxs)(g.Z,{form:l,layout:"vertical",name:"script_modal",initialValues:{filename:null==t?void 0:t.title,path:(null==t?void 0:t.parent)||""},children:[(0,P.jsx)(g.Z.Item,{name:"filename",label:d.ZP.get("文件名"),rules:[{required:!0,message:d.ZP.get("请输入文件名")}],children:(0,P.jsx)(v.Z,{placeholder:d.ZP.get("请输入文件名")})}),(0,P.jsx)(g.Z.Item,{name:"path",label:d.ZP.get("保存目录"),children:(0,P.jsx)(v.Z,{placeholder:d.ZP.get("请输入保存目录，默认scripts目录")})})]})})}},3843:function(e,t,n){"use strict";n.r(t);n(90228),n(26068),n(87999);var r=n(48305),i=n.n(r),a=n(72317),o=n(75271),l=n(72338),s=(n(61508),n(45520)),c=n(17082),u=(n(16314),n(3475),n(52676));t.default=function(e){var t=e.file,n=e.handleCancel,r=e.visible,d=l.Z.useForm(),p=i()(d,1)[0],g=(0,o.useState)(!1),h=i()(g,2),f=(h[0],h[1]);return(0,o.useEffect)((function(){p.resetFields(),f(!1)}),[t,r]),(0,u.jsx)(s.Z,{title:a.ZP.get("运行设置"),open:r,forceRender:!0,centered:!0,onCancel:function(){return n()},children:(0,u.jsx)(l.Z,{form:p,layout:"vertical",name:"setting_modal",initialValues:t,children:(0,u.jsx)(l.Z.Item,{name:"filename",label:a.ZP.get("待开发"),rules:[{required:!0,message:a.ZP.get("待开发")}],children:(0,u.jsx)(c.Z,{placeholder:a.ZP.get("待开发")})})})})}},3475:function(e,t,n){"use strict";var r=n(72317),i=window.__ENV__QlBaseUrl||"/";t.Z={siteName:r.ZP.get("青龙"),baseUrl:i,apiPrefix:"".concat(i,"api/"),authKey:"token",layouts:[{name:"primary",include:[/.*/],exclude:[/(\/(en|zh))*\/login/]}],i18n:{languages:[{key:"pt-br",title:"Português",flag:"/portugal.svg"},{key:"en",title:"English",flag:"/america.svg"},{key:"zh",title:r.ZP.get("中文"),flag:"/china.svg"}],defaultLanguage:"en"},scopes:[{name:r.ZP.get("定时任务"),value:"crons"},{name:r.ZP.get("环境变量"),value:"envs"},{name:r.ZP.get("订阅管理"),value:"subscriptions"},{name:r.ZP.get("配置文件"),value:"configs"},{name:r.ZP.get("脚本管理"),value:"scripts"},{name:r.ZP.get("日志管理"),value:"logs"},{name:r.ZP.get("依赖管理"),value:"dependencies"},{name:r.ZP.get("系统信息"),value:"system"}],scopesMap:{crons:r.ZP.get("定时任务"),envs:r.ZP.get("环境变量"),subscriptions:r.ZP.get("订阅管理"),configs:r.ZP.get("配置文件"),scripts:r.ZP.get("脚本管理"),logs:r.ZP.get("日志管理"),dependencies:r.ZP.get("依赖管理"),system:r.ZP.get("系统信息")},notificationModes:[{value:"gotify",label:"Gotify"},{value:"ntfy",label:"Ntfy"},{value:"goCqHttpBot",label:"GoCqHttpBot"},{value:"serverChan",label:r.ZP.get("Server酱")},{value:"pushDeer",label:"PushDeer"},{value:"bark",label:"Bark"},{value:"telegramBot",label:r.ZP.get("Telegram机器人")},{value:"dingtalkBot",label:r.ZP.get("钉钉机器人")},{value:"weWorkBot",label:r.ZP.get("企业微信机器人")},{value:"weWorkApp",label:r.ZP.get("企业微信应用")},{value:"aibotk",label:r.ZP.get("智能微秘书")},{value:"iGot",label:"IGot"},{value:"pushPlus",label:"PushPlus"},{value:"wePlusBot",label:r.ZP.get("微加机器人")},{value:"wxPusherBot",label:"wxPusher"},{value:"chat",label:r.ZP.get("群晖chat")},{value:"email",label:r.ZP.get("邮箱")},{value:"lark",label:r.ZP.get("飞书机器人")},{value:"pushMe",label:"PushMe"},{value:"chronocat",label:"Chronocat"},{value:"webhook",label:r.ZP.get("自定义通知")},{value:"closed",label:r.ZP.get("已关闭")}],notificationModeMap:{gotify:[{label:"gotifyUrl",tip:r.ZP.get("gotify的url地址，例如 https://push.example.de:8080"),required:!0},{label:"gotifyToken",tip:r.ZP.get("gotify的消息应用token码"),required:!0},{label:"gotifyPriority",tip:r.ZP.get("推送消息的优先级")}],ntfy:[{label:"ntfyUrl",tip:r.ZP.get("ntfy的url地址，例如 https://ntfy.sh"),required:!0},{label:"ntfyTopic",tip:r.ZP.get("ntfy的消息应用topic"),required:!0},{label:"ntfyPriority",tip:r.ZP.get("推送消息的优先级")}],chat:[{label:"chatUrl",tip:r.ZP.get("chat的url地址"),required:!0},{label:"chatToken",tip:r.ZP.get("chat的token码"),required:!0}],goCqHttpBot:[{label:"goCqHttpBotUrl",tip:r.ZP.get("推送到个人QQ: http://127.0.0.1/send_private_msg，群：http://127.0.0.1/send_group_msg"),required:!0},{label:"goCqHttpBotToken",tip:r.ZP.get("访问密钥"),required:!0},{label:"goCqHttpBotQq",tip:r.ZP.get("如果GOBOT_URL设置 /send_private_msg 则需要填入 user_id=个人QQ 相反如果是 /send_group_msg 则需要填入 group_id=QQ群"),required:!0}],serverChan:[{label:"serverChanKey",tip:r.ZP.get("Server酱SENDKEY"),required:!0}],pushDeer:[{label:"pushDeerKey",tip:r.ZP.get("PushDeer的Key，https://github.com/easychen/pushdeer"),required:!0},{label:"pushDeerUrl",tip:r.ZP.get("PushDeer的自架API endpoint，默认是 https://api2.pushdeer.com/message/push")}],bark:[{label:"barkPush",tip:r.ZP.get("Bark的信息IP/设备码，例如：https://api.day.app/XXXXXXXX"),required:!0},{label:"barkIcon",tip:r.ZP.get("BARK推送图标，自定义推送图标 (需iOS15或以上才能显示)")},{label:"barkSound",tip:r.ZP.get("BARK推送铃声，铃声列表去APP查看复制填写")},{label:"barkGroup",tip:r.ZP.get("BARK推送消息的分组，默认为qinglong")},{label:"barkLevel",tip:r.ZP.get("BARK推送消息的时效性，默认为active")},{label:"barkUrl",tip:r.ZP.get("BARK推送消息的跳转URL")},{label:"barkArchive",tip:r.ZP.get("BARK是否保存推送消息")}],telegramBot:[{label:"telegramBotToken",tip:r.ZP.get("telegram机器人的token，例如：1077xxx4424:AAFjv0FcqxxxxxxgEMGfi22B4yh15R5uw"),required:!0},{label:"telegramBotUserId",tip:r.ZP.get("telegram用户的id，例如：129xxx206"),required:!0},{label:"telegramBotProxyHost",tip:r.ZP.get("代理IP")},{label:"telegramBotProxyPort",tip:r.ZP.get("代理端口")},{label:"telegramBotProxyAuth",tip:r.ZP.get("telegram代理配置认证参数，用户名与密码用英文冒号连接 user:password")},{label:"telegramBotApiHost",tip:r.ZP.get("telegram api自建的反向代理地址，默认tg官方api")}],dingtalkBot:[{label:"dingtalkBotToken",tip:r.ZP.get("钉钉机器人webhook token，例如：5a544165465465645d0f31dca676e7bd07415asdasd"),required:!0},{label:"dingtalkBotSecret",tip:r.ZP.get("密钥，机器人安全设置页面，加签一栏下面显示的SEC开头的字符串")}],weWorkBot:[{label:"weWorkBotKey",tip:r.ZP.get("企业微信机器人的webhook(详见文档 https://work.weixin.qq.com/api/doc/90000/90136/91770)，例如：693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa"),required:!0},{label:"weWorkOrigin",tip:r.ZP.get("企业微信代理地址")}],weWorkApp:[{label:"weWorkAppKey",tip:r.ZP.get("corpid、corpsecret、touser(注:多个成员ID使用|隔开)、agentid、消息类型(选填，不填默认文本消息类型) 注意用,号隔开(英文输入法的逗号)，例如：wwcfrs,B-76WERQ,qinglong,1000001,2COat"),required:!0},{label:"weWorkOrigin",tip:r.ZP.get("企业微信代理地址")}],aibotk:[{label:"aibotkKey",tip:r.ZP.get("密钥key，智能微秘书个人中心获取apikey，申请地址：https://wechat.aibotk.com/signup?from=ql"),required:!0},{label:"aibotkType",tip:r.ZP.get("发送的目标，群组或者好友"),required:!0,placeholder:r.ZP.get("请输入要发送的目标"),items:[{value:"room",label:r.ZP.get("群聊")},{value:"contact",label:r.ZP.get("好友")}]},{label:"aibotkName",tip:r.ZP.get("要发送的用户昵称或群名，如果目标是群，需要填群名，如果目标是好友，需要填好友昵称"),required:!0}],iGot:[{label:"iGotPushKey",tip:r.ZP.get("iGot的信息推送key，例如：https://push.hellyw.com/XXXXXXXX"),required:!0}],pushPlus:[{label:"pushPlusToken",tip:r.ZP.get("微信扫码登录后一对一推送或一对多推送下面的token(您的Token)，不提供PUSH_PLUS_USER则默认为一对一推送，参考 https://www.pushplus.plus/"),required:!0},{label:"pushPlusUser",tip:r.ZP.get("一对多推送的“群组编码”（一对多推送下面->您的群组(如无则创建)->群组编码，如果您是创建群组人。也需点击“查看二维码”扫描绑定，否则不能接受群组消息推送）")},{label:"pushplusTemplate",tip:r.ZP.get("发送模板")},{label:"pushplusChannel",tip:r.ZP.get("发送渠道")},{label:"pushplusWebhook",tip:r.ZP.get("webhook编码")},{label:"pushplusCallbackUrl",tip:r.ZP.get("发送结果回调地址")},{label:"pushplusTo",tip:r.ZP.get("好友令牌")}],wePlusBot:[{label:"wePlusBotToken",tip:r.ZP.get("用户令牌，扫描登录后 我的—>设置->令牌 中获取，参考 https://www.weplusbot.com/"),required:!0},{label:"wePlusBotReceiver",tip:r.ZP.get("消息接收人")},{label:"wePlusBotVersion",tip:r.ZP.get("调用版本；专业版填写pro，个人版填写personal，为空默认使用专业版")}],wxPusherBot:[{label:"wxPusherBotAppToken",tip:r.ZP.get("wxPusherBot的appToken"),required:!0},{label:"wxPusherBotTopicIds",tip:r.ZP.get("wxPusherBot的topicIds"),required:!1},{label:"wxPusherBotUids",tip:r.ZP.get("wxPusherBot的uids"),required:!1}],lark:[{label:"larkKey",tip:r.ZP.get("飞书群组机器人：https://www.feishu.cn/hc/zh-CN/articles/360024984973"),required:!0}],email:[{label:"emailService",tip:r.ZP.get("邮箱服务名称，比如126、163、Gmail、QQ等，支持列表https://github.com/nodemailer/nodemailer/blob/master/lib/well-known/services.json"),required:!0},{label:"emailUser",tip:r.ZP.get("邮箱地址"),required:!0},{label:"emailPass",tip:r.ZP.get("SMTP 登录密码，也可能为特殊口令，视具体邮件服务商说明而定"),required:!0}],pushMe:[{label:"pushMeKey",tip:r.ZP.get("PushMe的Key，https://push.i-i.me/"),required:!0},{label:"pushMeUrl",tip:r.ZP.get("自建的PushMeServer消息接口地址，例如：http://127.0.0.1:3010，不填则使用官方消息接口"),required:!1}],chronocat:[{label:"chronocatURL",tip:r.ZP.get("Chronocat Red 服务的连接地址 https://chronocat.vercel.app/install/docker/official/"),required:!0},{label:"chronocatQQ",tip:r.ZP.get("个人:user_id=个人QQ 群则填入group_id=QQ群 多个用英文;隔开同时支持个人和群 如：user_id=xxx;group_id=xxxx;group_id=xxxxx"),required:!0},{label:"chronocatToken",tip:r.ZP.get("docker安装在持久化config目录下的chronocat.yml文件可找到"),required:!0}],webhook:[{label:"webhookMethod",tip:r.ZP.get("请求方法"),required:!0,items:[{value:"GET"},{value:"POST"},{value:"PUT"}]},{label:"webhookContentType",tip:r.ZP.get("请求头Content-Type"),required:!0,items:[{value:"text/plain"},{value:"application/json"},{value:"multipart/form-data"},{value:"application/x-www-form-urlencoded"}]},{label:"webhookUrl",tip:r.ZP.get("请求链接以http或者https开头。url或者body中必须包含$title，$content可选，对应api内容的位置"),required:!0,placeholder:"https://xxx.cn/api?content=$title\n"},{label:"webhookHeaders",tip:r.ZP.get("请求头格式Custom-Header1: Header1，多个换行分割"),placeholder:"Custom-Header1: Header1\nCustom-Header2: Header2"},{label:"webhookBody",tip:r.ZP.get("请求体格式key1: value1，多个换行分割。url或者body中必须包含$title，$content可选，对应api内容的位置"),placeholder:"key1: $title\nkey2: $content"}]},documentTitleMap:{"/login":r.ZP.get("登录"),"/initialization":r.ZP.get("初始化"),"/crontab":r.ZP.get("定时任务"),"/env":r.ZP.get("环境变量"),"/subscription":r.ZP.get("订阅管理"),"/config":r.ZP.get("配置文件"),"/script":r.ZP.get("脚本管理"),"/diff":r.ZP.get("对比工具"),"/log":r.ZP.get("日志管理"),"/setting":r.ZP.get("系统设置"),"/error":r.ZP.get("错误日志"),"/dependence":r.ZP.get("依赖管理")},dependenceTypes:["nodejs","python3","linux"]}},9364:function(e,t,n){"use strict";n.d(t,{F:function(){return s},e:function(){return l}});var r=n(48305),i=n.n(r),a=n(75271),o=n(52076),l=function(){var e=(0,a.useState)("100%"),t=i()(e,2),n=t[0],r=t[1],l=(0,a.useState)(0),s=i()(l,2),c=s[0],u=s[1],d=(0,a.useState)(-48),p=i()(d,2),g=p[0],h=p[1],f=(0,a.useState)(!1),v=i()(f,2),m=v[0],Z=v[1],P=(0,a.useMemo)((function(){return(0,o.ZP)()}),[]).platform;return(0,a.useEffect)((function(){"mobile"===P&&document.body.offsetWidth<768?(r("auto"),u(0),h(0),Z(!0),document.body.setAttribute("data-mode","phone")):(r("100%"),u(0),h(-48),Z(!1),document.body.setAttribute("data-mode","desktop"))}),[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:g,width:n,marginLeft:c},isPhone:m}},s=function(){var e=(0,a.useState)(),t=i()(e,2),n=t[0],r=t[1];return(0,a.useEffect)((function(){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=localStorage.getItem("qinglong_dark_theme"),n=e.matches&&"light"!==t||"dark"===t;r(n?"vs-dark":"vs");var i=function(e){"auto"!==t&&t||(e.matches?r("vs-dark"):r("vs"))};"function"==typeof e.addEventListener?e.addEventListener("change",i):"function"==typeof e.addListener&&e.addListener(i)}),[]),{theme:n,reloadTheme:function(){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=localStorage.getItem("qinglong_dark_theme"),n=e.matches&&"light"!==t||"dark"===t;r(n?"vs-dark":"vs")}}}},16314:function(e,t,n){"use strict";n.d(t,{W:function(){return m}});var r=n(90228),i=n.n(r),a=n(87999),o=n.n(a),l=n(72317),s=n(61508),c=n(33839),u=n(3475),d=n(98783),p=n(69313),g=n(52676);s.ZP.config({duration:2});var h=Date.now(),f=p.Z.create({timeout:6e4,params:{t:h}}),v=["/api/user/login","/open/auth/token","/api/user/two-factor/login","/api/system","/api/user/init","/api/user/notification/init"];f.interceptors.request.use((function(e){var t=localStorage.getItem(u.Z.authKey);return t&&!v.includes(e.url)?(e.headers.Authorization="Bearer ".concat(t),e):e})),f.interceptors.response.use(function(){var e=o()(i()().mark((function e(t){var n,r,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.status,![502,504].includes(n)){e.next=5;break}d.history.push("/error"),e.next=18;break;case 5:if(401!==n){e.next=9;break}"/login"!==d.history.location.pathname&&(localStorage.removeItem(u.Z.authKey),d.history.push("/login")),e.next=18;break;case 9:return e.prev=9,200!==(r=t.data).code&&(a=r.message||r.data)&&c.Z.error({message:a,description:(0,g.jsx)(g.Fragment,{children:null==r?void 0:r.errors.map((function(e){return(0,g.jsx)("div",{children:e.message})}))})}),e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(9);case 17:case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){if(e.response){var t=e.response.data?e.response.data.message||e.message:e.response.statusText,n=e.response.status;if([502,504].includes(n))d.history.push("/error");else if(401===n)"/login"!==d.history.location.pathname&&(s.ZP.error(l.ZP.get("登录已过期，请重新登录")),localStorage.removeItem(u.Z.authKey),d.history.push("/login"));else{var r,i,a;if("function"==typeof(null===(r=e.config)||void 0===r?void 0:r.onError))return null===(a=e.config)||void 0===a?void 0:a.onError(e.response);c.Z.error({message:t,description:(0,g.jsx)(g.Fragment,{children:null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i||null===(i=i.errors)||void 0===i?void 0:i.map((function(e){return(0,g.jsxs)("div",{children:[e.message," (",e.value,")"]})}))})})}}else console.log(e.message);return Promise.reject(e)}));var m=f},52076:function(e,t,n){"use strict";n.d(t,{ZP:function(){return c},I1:function(){return p},o4:function(){return P},w7:function(){return d},DY:function(){return g},FA:function(){return f},rS:function(){return m},H$:function(){return Z},W9:function(){return u},x$:function(){return h}});var r=n(15558),i=n.n(r),a=n(72317),o={".py":"python",".js":"javascript",".mjs":"javascript",".sh":"shell",".ts":"typescript",".ini":"ini",".json":"json"},l=n(94046),s=n.n(l);function c(){var e=navigator.userAgent.toLowerCase(),t=function(t){return t.test(e)},n=function(t){return(e.match(t)||[]).toString().replace(/[^0-9|_.]/g,"").replace(/_/g,".")},r="unknow";t(/windows|win32|win64|wow32|wow64/g)?r="windows":t(/macintosh|macintel/g)?r="macos":t(/x11/g)?r="linux":t(/android|adr/g)?r="android":t(/ios|iphone|ipad|ipod|iwatch/g)&&(r="ios");var i="unknow";"windows"===r?t(/windows nt 5.0|windows 2000/g)?i="2000":t(/windows nt 5.1|windows xp/g)?i="xp":t(/windows nt 5.2|windows 2003/g)?i="2003":t(/windows nt 6.0|windows vista/g)?i="vista":t(/windows nt 6.1|windows 7/g)?i="7":t(/windows nt 6.2|windows 8/g)?i="8":t(/windows nt 6.3|windows 8.1/g)?i="8.1":t(/windows nt 10.0|windows 10/g)&&(i="10"):"macos"===r?i=n(/os x [\d._]+/g):"android"===r?i=n(/android [\d._]+/g):"ios"===r&&(i=n(/os [\d._]+/g));var a="unknow";"windows"===r||"macos"===r||"linux"===r?a="desktop":("android"===r||"ios"===r||t(/mobile/g))&&(a="mobile");var o="unknow",l="unknow";t(/applewebkit/g)?(o="webkit",t(/edge/g)?l="edge":t(/opr/g)?l="opera":t(/chrome/g)?l="chrome":t(/safari/g)&&(l="safari")):t(/gecko/g)&&t(/firefox/g)?(o="gecko",l="firefox"):t(/presto/g)?(o="presto",l="opera"):t(/trident|compatible|msie/g)&&(o="trident",l="iexplore");var s="unknow";"webkit"===o?s=n(/applewebkit\/[\d._]+/g):"gecko"===o?s=n(/gecko\/[\d._]+/g):"presto"===o?s=n(/presto\/[\d._]+/g):"trident"===o&&(s=n(/trident\/[\d._]+/g));var c="unknow";"chrome"===l?c=n(/chrome\/[\d._]+/g):"safari"===l?c=n(/version\/[\d._]+/g):"firefox"===l?c=n(/firefox\/[\d._]+/g):"opera"===l?c=n(/opr\/[\d._]+/g):"iexplore"===l?c=n(/(msie [\d._]+)|(rv:[\d._]+)/g):"edge"===l&&(c=n(/edge\/[\d._]+/g));var u="none",d="unknow";t(/micromessenger/g)?(u="wechat",d=n(/micromessenger\/[\d._]+/g)):t(/qqbrowser/g)?(u="qq",d=n(/qqbrowser\/[\d._]+/g)):t(/ucbrowser/g)?(u="uc",d=n(/ucbrowser\/[\d._]+/g)):t(/qihu 360se/g)?u="360":t(/2345explorer/g)?(u="2345",d=n(/2345explorer\/[\d._]+/g)):t(/metasr/g)?u="sougou":t(/lbbrowser/g)?u="liebao":t(/maxthon/g)&&(u="maxthon",d=n(/maxthon\/[\d._]+/g));var p=Object.assign({engine:o,engineVs:s,platform:a,supporter:l,supporterVs:c,system:r,systemVs:i},"none"===u?{}:{shell:u,shellVs:d});return console.log("%c\n .d88b.  d888888b d8b   db  d888b  db       .d88b.  d8b   db  d888b  \n.8P  Y8.   `88'   888o  88 88' Y8b 88      .8P  Y8. 888o  88 88' Y8b \n88    88    88    88V8o 88 88      88      88    88 88V8o 88 88      \n88    88    88    88 V8o88 88  ooo 88      88    88 88 V8o88 88  ooo \n`8P  d8'   .88.   88  V888 88. ~8~ 88booo. `8b  d8' 88  V888 88. ~8~ \n `Y88'Y8 Y888888P VP   V8P  Y888P  Y88888P  `Y88P'  VP   V8P  Y888P  \n                                                                     \n                                                                     \n","color: blue;font-size: 14px;"),console.log("%c忘形雨笠烟蓑，知心牧唱樵歌。明月清风共我，闲人三个，从他今古消磨。\n","color: yellow;font-size: 18px;"),console.log("%c青龙运行环境:\n\n系统：".concat(p.system,"/").concat(p.systemVs,"\n浏览器：").concat(p.supporter,"/").concat(p.supporterVs,"\n内核：").concat(p.engine,"/").concat(p.engineVs),"color: green;font-size: 14px;font-weight: bold;"),p}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.extraHeight,n=e.target;void 0===t&&(t=99);var r=null,i=0;(r=n||document.querySelector(".ant-table-wrapper"))&&(i=r.getBoundingClientRect().top);var a=document.body.clientHeight-i-t;return a}function d(e,t){var n,r,i=window.URL||window.webkitURL||window,a=new Blob([t]),o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=i.createObjectURL(a),o.download=e,n=o,(r=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}function p(e,t,n){var r=i()(e),a=[];return function e(r){if(r)for(var i=0;i<(null==r?void 0:r.length);i++){if(t(r[i]))return n?void(r[i].children?r[i].children.unshift(n):r[i].children=[n]):void r.splice(i,1);r[i].children&&(a.push(r[i].key),e(r[i].children))}}(r),r}function g(e,t){var n;return function e(r){if(r)for(var i=0;i<(null==r?void 0:r.length);i++)t(r[i])?n=r[i]:r[i].children&&e(r[i].children)}(i()(e)),n}function h(e){return["　　　　　",a.ZP.get("执行结束")].some((function(t){return e.includes(t)}))}function f(e){var t=e.split(" ");if("repo"===t[1]||"raw"===t[1])return t[2];var n=t.find((function(e){return[".js",".ts",".sh",".py"].some((function(t){return e.endsWith(t)}))}));if(n){var r,i,a="".concat(window.__ENV__QL_DIR,"/data/scripts");n.startsWith(a)&&(n=n.replace(a,""));var o=n.lastIndexOf("/");return o>=0?(i=n.slice(o+1),r=n.slice(0,o)):(i=n,r=""),[i,r]}}function v(e){try{var t=s().parseExpression(e);if(t)return t.next().toDate()}catch(e){}return null}function m(e,t){var n=v(e);return null!=t&&t.length&&t.forEach((function(e){var t=v(e.schedule);t&&(!n||t<n)&&(n=t)})),n}function Z(e){var t=function(e){if(!e)return"";var t=e.split(".");return".".concat(t[t.length-1])}(e);return o[t]}function P(){var e=document.createElement("div");e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="transparent",e.style.zIndex="9999",document.body.appendChild(e),e.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()})),document.body.style.overflow="hidden"}},65814:function(e,t,n){"use strict";var r=n(15558),i=n.n(r),a=n(67825),o=n.n(a),l=n(90228),s=n.n(l),c=n(87999),u=n.n(c),d=n(25298),p=n.n(d),g=n(17069),h=n.n(g),f=n(82092),v=n.n(f),m=n(78078),Z=n.n(m),P=["type"],b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p()(this,e),v()(this,"url",void 0),v()(this,"socket",null),v()(this,"subscriptions",new Map),v()(this,"options",void 0),v()(this,"reconnectAttempts",0),v()(this,"heartbeatTimeout",null),v()(this,"state","closed"),this.url=t,this.options={maxReconnectAttempts:n.maxReconnectAttempts||5,reconnectInterval:n.reconnectInterval||3e3,heartbeatInterval:n.heartbeatInterval||3e4},this.init()}var t,n;return h()(e,[{key:"init",value:(n=u()(s()().mark((function e(){var t=this;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,this.state="connecting",this.emit("connecting");case 3:if(!(this.reconnectAttempts<this.options.maxReconnectAttempts)){e.next=16;break}return this.socket=new(Z())(this.url),this.setupEventListeners(),this.startHeartbeat(),e.next=9,this.waitForClose();case 9:return this.stopHeartbeat(),this.socket=null,this.reconnectAttempts++,e.next=14,new Promise((function(e){return setTimeout(e,t.options.reconnectInterval)}));case 14:e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),this.handleError(e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(){return n.apply(this,arguments)})},{key:"setupEventListeners",value:function(){var e=this;this.socket&&(this.socket.onopen=function(){e.state="open",e.emit("open")},this.socket.onmessage=function(t){var n=JSON.parse(t.data);e.dispatchMessage(n)},this.socket.onclose=function(){e.state="closed",e.emit("close")})}},{key:"waitForClose",value:(t=u()(s()().mark((function e(){var t;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=this.socket)||void 0===t?void 0:t.readyState)===Z().CLOSED){e.next=5;break}return e.next=3,new Promise((function(e){return setTimeout(e,100)}));case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"subscribe",value:function(e,t){var n=this.subscriptions.get(e)||new Set;if(!n.has(t)){n.add(t),this.subscriptions.set(e,n);var r={action:"subscribe",topic:e};this.send(r)}}},{key:"unsubscribe",value:function(e,t){var n=this.subscriptions.get(e)||new Set;if(n.has(t)){n.delete(t);var r={action:"unsubscribe",topic:e};this.send(r)}}},{key:"send",value:function(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.readyState)===Z().OPEN&&this.socket.send(JSON.stringify(e))}},{key:"dispatchMessage",value:function(e){var t=e.type,n=o()(e,P),r=this.subscriptions.get(t)||new Set;i()(r).forEach((function(e){return e(n)}))}},{key:"startHeartbeat",value:function(){var e=this;this.heartbeatTimeout=setInterval((function(){var t;(null===(t=e.socket)||void 0===t?void 0:t.readyState)===Z().OPEN&&e.socket.send(JSON.stringify({type:"heartbeat"}))}),this.options.heartbeatInterval)}},{key:"stopHeartbeat",value:function(){this.heartbeatTimeout&&clearInterval(this.heartbeatTimeout)}},{key:"close",value:function(){this.socket&&(this.state="closed",this.stopHeartbeat(),this.socket.close(),this.emit("close"))}},{key:"handleError",value:function(e){console.error("WebSocket错误:",e),this.emit("error",e)}},{key:"on",value:function(e,t){}},{key:"emit",value:function(e,t){}}],[{key:"getInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return e.instance||(e.instance=new e(t,n)),e.instance}}]),e}();v()(b,"instance",null),t.Z=b},50810:function(){}}]);