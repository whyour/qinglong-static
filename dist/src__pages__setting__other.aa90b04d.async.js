(self.webpackChunk=self.webpackChunk||[]).push([[6465,3830,3308],{59673:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(14797),o=n(63313),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},c=n(46420),l=function(e,t){return o.createElement(c.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:r}))};l.displayName="CheckOutlined";var i=o.forwardRef(l)},99604:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(14797),o=n(63313),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},c=n(46420),l=function(e,t){return o.createElement(c.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:r}))};l.displayName="DownOutlined";var i=o.forwardRef(l)},14761:function(e,t,n){"use strict";n.r(t);var a=n(57213),o=n.n(a),r=n(54306),c=n.n(r),l=n(88265),i=n(63313),u=n(67393),s=n(9835),d=n(84163),f=n(84468),p=n(22159),v=n(55484),m=n(24378),h=n(57679),g=n(71571),Z=n(5558),y=n(95176),x=n(60819),b=n(11227),C=(n(56508),n(59953)),P=n(41422),k=n(54700),j=n(11527),w=[{label:l.ZP.get("亮色"),value:"light"},{label:l.ZP.get("暗色"),value:"dark"},{label:l.ZP.get("跟随系统"),value:"auto"}];t.default=function(e){var t=e.systemInfo,n=e.socketMessage,a=e.reloadTheme,r=localStorage.getItem("qinglong_dark_theme")||"auto",E=(0,i.useState)(),O=c()(E,2),I=O[0],M=O[1],N=u.Z.useForm(),R=c()(N,1)[0],S=((0,i.useRef)(),(0,i.useState)(!1)),_=c()(S,2),F=_[0],T=_[1],L=(0,k.default)(l.ZP.get("上传")),q=(0,k.default)(l.ZP.get("下载")),A=g||{},B=A.enable,W=A.disable,D=(A.exportGeneratedCSS,A.setFetchMethod),z=A.auto,G=function(){y.W.put("".concat(Z.Z.apiPrefix,"system/config"),I).then((function(e){var t=e.code;e.data;200===t&&s.ZP.success(l.ZP.get("更新成功"))})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){y.W.get("".concat(Z.Z.apiPrefix,"system/config")).then((function(e){var t=e.code,n=e.data;200===t&&n.info&&M(n.info)})).catch((function(e){console.log(e)}))}),[]),(0,j.jsxs)(u.Z,{layout:"vertical",form:R,children:[(0,j.jsx)(u.Z.Item,{label:l.ZP.get("主题"),name:"theme",initialValue:r,children:(0,j.jsx)(f.ZP.Group,{options:w,onChange:function(e){var t=e.target.value;localStorage.setItem("qinglong_dark_theme",e.target.value),D(fetch),"dark"===t?B({}):"light"===t?W():z({}),a()},value:r,optionType:"button",buttonStyle:"solid"})}),(0,j.jsx)(u.Z.Item,{label:l.ZP.get("日志删除频率"),name:"frequency",tooltip:l.ZP.get("每x天自动删除x天以前的日志"),children:(0,j.jsxs)(p.Z.Group,{compact:!0,children:[(0,j.jsx)(v.Z,{addonBefore:l.ZP.get("每"),addonAfter:l.ZP.get("天"),style:{width:180},min:0,value:null==I?void 0:I.logRemoveFrequency,onChange:function(e){M(o()(o()({},I),{},{logRemoveFrequency:e}))}}),(0,j.jsx)(m.Z,{type:"primary",onClick:G,children:l.ZP.get("确认")})]})}),(0,j.jsx)(u.Z.Item,{label:l.ZP.get("定时任务并发数"),name:"frequency",children:(0,j.jsxs)(p.Z.Group,{compact:!0,children:[(0,j.jsx)(v.Z,{style:{width:150},min:1,value:null==I?void 0:I.cronConcurrency,onChange:function(e){M(o()(o()({},I),{},{cronConcurrency:e}))}}),(0,j.jsx)(m.Z,{type:"primary",onClick:G,children:l.ZP.get("确认")})]})}),(0,j.jsxs)(u.Z.Item,{label:l.ZP.get("数据备份还原"),name:"frequency",children:[(0,j.jsx)(m.Z,{type:"primary",onClick:function(){T(!0),y.W.put("".concat(Z.Z.apiPrefix,"system/data/export"),{},{responseType:"blob",timeout:864e5,onDownloadProgress:function(e){e.progress&&q(parseFloat((100*e.progress).toFixed(1)))}}).then((function(e){(0,b.saveAs)(e,"data.tgz")})).catch((function(e){console.log(e)})).finally((function(){return T(!1)}))},loading:F,children:F?l.ZP.get("生成数据中..."):l.ZP.get("备份")}),(0,j.jsx)(h.Z,{method:"put",showUploadList:!1,maxCount:1,action:"/api/system/data/import",onChange:function(e){var t,n,a;null!==(t=e.event)&&void 0!==t&&t.percent&&(L(parseFloat(null===(n=e.event)||void 0===n?void 0:n.percent.toFixed(1))),100===(null===(a=e.event)||void 0===a?void 0:a.percent)&&d.Z.confirm({width:600,maskClosable:!1,title:l.ZP.get("确认重启"),centered:!0,content:l.ZP.get("备份数据上传成功，确认覆盖数据"),okText:l.ZP.get("重启"),onOk:function(){y.W.put("".concat(Z.Z.apiPrefix,"system/reload"),{type:"data"}).then((function(){s.ZP.success({content:(0,j.jsxs)("span",{children:[l.ZP.get("系统将在"),(0,j.jsx)(P.Z,{className:"inline-countdown",format:"ss",value:Date.now()+3e4}),l.ZP.get("秒后自动刷新")]}),duration:30}),setTimeout((function(){window.location.reload()}),3e4)})).catch((function(e){console.log(e)}))}}))},name:"data",headers:{Authorization:"Bearer ".concat(localStorage.getItem(Z.Z.authKey))},children:(0,j.jsx)(m.Z,{icon:(0,j.jsx)(C.Z,{}),style:{marginLeft:8},children:l.ZP.get("还原数据")})})]}),(0,j.jsx)(u.Z.Item,{label:l.ZP.get("检查更新"),name:"update",children:(0,j.jsx)(x.default,{systemInfo:t,socketMessage:n})})]})}},54700:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(13800),o=n(84163),r=n(63313),c=n(11527);function l(e){var t=(0,r.useRef)(),n=function(e){var t=e.percent;return(0,c.jsx)(a.Z,{style:{display:"flex",justifyContent:"center"},type:"circle",percent:t})};return function(a){t.current?t.current.update({title:"".concat(e).concat(a>=100?"成功":"中..."),content:(0,c.jsx)(n,{percent:a})}):t.current=o.Z.info({width:600,maskClosable:!1,title:"".concat(e).concat(a>=100?"成功":"中..."),centered:!0,content:(0,c.jsx)(n,{percent:a})})}}},56508:function(){},60822:function(e,t,n){"use strict";function a(e){return Object.keys(e).reduce((function(t,n){return!n.startsWith("data-")&&!n.startsWith("aria-")&&"role"!==n||n.startsWith("data-__")||(t[n]=e[n]),t}),{})}n.d(t,{Z:function(){return a}})},92235:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(17079),o=n(63313);function r(){var e=o.useReducer((function(e){return e+1}),0);return(0,a.Z)(e,2)[1]}},84468:function(e,t,n){"use strict";n.d(t,{ZP:function(){return N}});var a=n(60795),o=n(87807),r=n(17079),c=n(84875),l=n.n(c),i=n(26230),u=n(63313),s=n(82259),d=n(65189),f=n(60822),p=u.createContext(null),v=p.Provider,m=p,h=u.createContext(null),g=h.Provider,Z=n(69370),y=n(33951),x=n(7893),b=n(76737),C=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n},P=function(e,t){var n,r=u.useContext(m),c=u.useContext(h),i=u.useContext(s.E_),d=i.getPrefixCls,f=i.direction,p=u.useRef(),v=(0,y.sQ)(t,p),g=(0,u.useContext)(b.aM).isFormItemInput,P=e.prefixCls,k=e.className,j=e.children,w=e.style,E=e.disabled,O=C(e,["prefixCls","className","children","style","disabled"]),I=d("radio",P),M="button"===((null==r?void 0:r.optionType)||c)?"".concat(I,"-button"):I,N=(0,a.Z)({},O),R=u.useContext(x.Z);N.disabled=E||R,r&&(N.name=r.name,N.onChange=function(t){var n,a;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(a=null==r?void 0:r.onChange)||void 0===a||a.call(r,t)},N.checked=e.value===r.value,N.disabled=N.disabled||r.disabled);var S=l()("".concat(M,"-wrapper"),(n={},(0,o.Z)(n,"".concat(M,"-wrapper-checked"),N.checked),(0,o.Z)(n,"".concat(M,"-wrapper-disabled"),N.disabled),(0,o.Z)(n,"".concat(M,"-wrapper-rtl"),"rtl"===f),(0,o.Z)(n,"".concat(M,"-wrapper-in-form-item"),g),n),k);return u.createElement("label",{className:S,style:w,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},u.createElement(Z.Z,(0,a.Z)({},N,{type:"radio",prefixCls:M,ref:v})),void 0!==j?u.createElement("span",null,j):null)};var k=u.forwardRef(P),j=u.forwardRef((function(e,t){var n,c=u.useContext(s.E_),p=c.getPrefixCls,m=c.direction,h=u.useContext(d.Z),g=(0,i.Z)(e.defaultValue,{value:e.value}),Z=(0,r.Z)(g,2),y=Z[0],x=Z[1],b=e.prefixCls,C=e.className,P=void 0===C?"":C,j=e.options,w=e.buttonStyle,E=void 0===w?"outline":w,O=e.disabled,I=e.children,M=e.size,N=e.style,R=e.id,S=e.onMouseEnter,_=e.onMouseLeave,F=e.onFocus,T=e.onBlur,L=p("radio",b),q="".concat(L,"-group"),A=I;j&&j.length>0&&(A=j.map((function(e){return"string"==typeof e||"number"==typeof e?u.createElement(k,{key:e.toString(),prefixCls:L,disabled:O,value:e,checked:y===e},e):u.createElement(k,{key:"radio-group-value-options-".concat(e.value),prefixCls:L,disabled:e.disabled||O,value:e.value,checked:y===e.value,style:e.style},e.label)})));var B=M||h,W=l()(q,"".concat(q,"-").concat(E),(n={},(0,o.Z)(n,"".concat(q,"-").concat(B),B),(0,o.Z)(n,"".concat(q,"-rtl"),"rtl"===m),n),P);return u.createElement("div",(0,a.Z)({},(0,f.Z)(e),{className:W,style:N,onMouseEnter:S,onMouseLeave:_,onFocus:F,onBlur:T,id:R,ref:t}),u.createElement(v,{value:{onChange:function(t){var n=y,a=t.target.value;"value"in e||x(a);var o=e.onChange;o&&a!==n&&o(t)},value:y,disabled:e.disabled,name:e.name,optionType:e.optionType}},A))})),w=u.memo(j),E=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n},O=function(e,t){var n=u.useContext(s.E_).getPrefixCls,o=e.prefixCls,r=E(e,["prefixCls"]),c=n("radio",o);return u.createElement(g,{value:"button"},u.createElement(k,(0,a.Z)({prefixCls:c},r,{type:"radio",ref:t})))},I=u.forwardRef(O),M=k;M.Button=I,M.Group=w,M.__ANT_RADIO=!0;var N=M},24669:function(e){var t=Array.isArray;e.exports=t},69370:function(e,t,n){"use strict";var a=n(60795),o=n(14797),r=n(87807),c=n(17079),l=n(67725),i=n(84875),u=n.n(i),s=n(26230),d=n(63313),f=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"],p=(0,d.forwardRef)((function(e,t){var n,i=e.prefixCls,p=void 0===i?"rc-checkbox":i,v=e.className,m=e.style,h=e.checked,g=e.disabled,Z=e.defaultChecked,y=void 0!==Z&&Z,x=e.type,b=void 0===x?"checkbox":x,C=e.onChange,P=(0,l.Z)(e,f),k=(0,d.useRef)(null),j=(0,s.Z)(y,{value:h}),w=(0,c.Z)(j,2),E=w[0],O=w[1];(0,d.useImperativeHandle)(t,(function(){return{focus:function(){var e;null===(e=k.current)||void 0===e||e.focus()},blur:function(){var e;null===(e=k.current)||void 0===e||e.blur()},input:k.current}}));var I=u()(p,v,(n={},(0,r.Z)(n,"".concat(p,"-checked"),E),(0,r.Z)(n,"".concat(p,"-disabled"),g),n));return d.createElement("span",{className:I,style:m},d.createElement("input",(0,a.Z)({},P,{className:"".concat(p,"-input"),ref:k,onChange:function(t){g||("checked"in e||O(t.target.checked),null==C||C({target:(0,o.Z)((0,o.Z)({},e),{},{type:b,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:g,checked:!!E,type:b})),d.createElement("span",{className:"".concat(p,"-inner")}))}));t.Z=p}}]);