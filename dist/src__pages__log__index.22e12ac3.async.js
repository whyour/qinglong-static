(self.webpackChunk=self.webpackChunk||[]).push([[9818],{13740:function(o,s,e){"use strict";e.d(s,{Z:function(){return S}});var l=e(14797),a=e(63313),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},r=n,t=e(46420),c=function(x,m){return a.createElement(t.Z,(0,l.Z)((0,l.Z)({},x),{},{ref:m,icon:r}))};c.displayName="DeleteOutlined";var S=a.forwardRef(c)},13779:function(o,s,e){"use strict";var l=e(57213),a=e.n(l),n=e(63313),r=e.n(n);s.Z=function(t,c,S){var O=S.treeNodeFilterProp;return(0,n.useMemo)(function(){var x=[];if(!c)return{treeData:t,keys:x};var m=c.toUpperCase();function F(C,E){var d=E[O];return String(d).toUpperCase().includes(m)}function j(C){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return C.map(function(d){var p=d.children,f=E||F(c,d),y=j(p||[],f);return f||y.length?(y.length&&x.push(d.key),a()(a()({},d),{},{children:y})):null}).filter(function(d){return d})}return{treeData:j(t),keys:x}},[t,c,O])}},42405:function(o,s,e){"use strict";e.r(s),e.d(s,{default:function(){return ve}});var l=e(93525),a=e.n(l),n=e(54306),r=e.n(n),t=e(63313),c=e(92260),S=e(84163),O=e(9835),x=e(75310),m=e(15367),F=e(24378),j=e(22159),C=e(43209),E=e(84540),d=e(90717),p=e(38612),f=e(82755),y=e(35911),v={"left-tree-container":"left-tree-container___zHanw","left-tree-scroller":"left-tree-scroller___PInUN","log-container":"log-container___ba9Tr"},D=e(76661),T=e(36035),ae=e(40440),re=e(13740),le=e(60001),oe=e(66292),se=e.n(oe),ue=e(4363),ie=e.n(ue),ce=e(13779),u=e(11527),de=c.Z.Text,fe=function(){var B=(0,ae.useOutletContext)(),he=B.headerStyle,R=B.isPhone,ge=B.theme,xe=(0,t.useState)("\u8BF7\u9009\u62E9\u65E5\u5FD7\u6587\u4EF6"),H=r()(xe,2),K=H[0],L=H[1],me=(0,t.useState)(""),U=r()(me,2),A=U[0],z=U[1],Se=(0,t.useState)([]),G=r()(Se,2),P=G[0],Y=G[1],pe=(0,t.useState)(!1),J=r()(pe,2),ye=J[0],Q=J[1],Ee=(0,t.useState)(),V=r()(Ee,2),Ce=V[0],De=V[1],M=(0,t.useRef)(),Ie=(0,t.useState)([]),X=r()(Ie,2),$=X[0],b=X[1],Oe=(0,t.useState)(),k=r()(Oe,2),Z=k[0],w=k[1],Fe=(0,t.useState)(""),q=r()(Fe,2),je=q[0],Pe=q[1],Ze=function(){Q(!0),y.W.get("".concat(d.Z.apiPrefix,"logs")).then(function(i){var g=i.code,I=i.data;g===200&&Y(I)}).finally(function(){return Q(!1)})},Ne=function(i){y.W.get("".concat(d.Z.apiPrefix,"logs/").concat(i.title,"?path=").concat(i.parent||"")).then(function(g){var I=g.code,N=g.data;I===200&&L(N)})},_=function(i,g){if(w(g),z(i),!(g.key===A||!i)){if(g.type==="directory"){L("\u8BF7\u9009\u62E9\u65E5\u5FD7\u6587\u4EF6");return}L("\u52A0\u8F7D\u4E2D..."),Ne(g)}},Ae=(0,t.useCallback)(function(h,i){_(h[0],i.node)},[]),Le=(0,t.useCallback)(function(h){var i=h.target.value;Te(i)},[P]),Te=(0,t.useCallback)(se()(function(h){Pe(h)},300),[P]),ee=(0,ce.Z)(P,je,{treeNodeFilterProp:"title"}),Me=ee.treeData,te=ee.keys;(0,t.useEffect)(function(){b(ie()([].concat(a()($),a()(te))))},[te]);var Be=function(){S.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:(0,u.jsxs)(u.Fragment,{children:["\u786E\u8BA4\u5220\u9664",(0,u.jsx)(de,{style:{wordBreak:"break-all"},type:"warning",children:A}),"\u6587\u4EF6",Z.type==="directory"?"\u5939\u4E0B\u6240\u4EE5\u65E5\u5FD7":"","\uFF0C\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D"]}),onOk:function(){y.W.delete("".concat(d.Z.apiPrefix,"logs"),{data:{filename:Z.title,path:Z.parent||"",type:Z.type}}).then(function(g){var I=g.code;if(I===200){O.ZP.success("\u5220\u9664\u6210\u529F");var N=a()(P);if(Z.parent)N=(0,le.I1)(N,function(W){return W.key===Z.key});else{var ne=N.findIndex(function(W){return W.key===Z.key});ne!==-1&&N.splice(ne,1)}Y(N),Re()}})},onCancel:function(){console.log("Cancel")}})},Re=function(){z(""),w(null),L("\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6")},We=function(i){b(i)};return(0,t.useEffect)(function(){Ze()},[]),(0,t.useEffect)(function(){M.current&&De(M.current.clientHeight)},[M.current,P]),(0,u.jsx)(p.ZP,{className:"ql-container-wrapper log-wrapper",title:A,loading:ye,extra:R?[(0,u.jsx)(x.Z,{treeExpandAction:"click",className:"log-select",value:A,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:P,placeholder:"\u8BF7\u9009\u62E9\u65E5\u5FD7",fieldNames:{value:"key"},treeNodeFilterProp:"title",showSearch:!0,allowClear:!0,onSelect:_})]:[(0,u.jsx)(m.Z,{title:"\u5220\u9664",children:(0,u.jsx)(F.Z,{type:"primary",disabled:!A,onClick:Be,icon:(0,u.jsx)(re.Z,{})})})],header:{style:he},children:(0,u.jsxs)("div",{className:"".concat(v["log-container"]," log-container"),children:[!R&&(0,u.jsxs)(T.Z,{split:"vertical",size:200,maxSize:-100,children:[(0,u.jsx)("div",{className:v["left-tree-container"],children:P.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z.Search,{className:v["left-tree-search"],onChange:Le,placeholder:"\u8BF7\u8F93\u5165\u65E5\u5FD7\u540D",allowClear:!0}),(0,u.jsx)("div",{className:v["left-tree-scroller"],ref:M,children:(0,u.jsx)(C.Z,{expandAction:"click",className:v["left-tree"],treeData:Me,showIcon:!0,height:Ce,selectedKeys:[A],showLine:{showLeafIcon:!0},onSelect:Ae,expandedKeys:$,onExpand:We})})]}):(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,u.jsx)(E.Z,{description:"\u6682\u65E0\u65E5\u5FD7",image:E.Z.PRESENTED_IMAGE_SIMPLE})})}),(0,u.jsx)(f.ZP,{language:"shell",theme:ge,value:K,options:{readOnly:!0,fontSize:12,lineNumbersMinChars:3,fontFamily:"Source Code Pro",folding:!1,glyphMargin:!1,wordWrap:"on"}})]}),R&&(0,u.jsx)(D.fk,{value:K,options:{lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,matchBrackets:!0,readOnly:!0},onBeforeChange:function(i,g,I){L(I)},onChange:function(i,g,I){}})]})})},ve=fe},45170:function(o,s,e){var l=e(13807);function a(n,r){var t=n==null?0:n.length;return!!t&&l(n,r,0)>-1}o.exports=a},94936:function(o){function s(e,l,a){for(var n=-1,r=e==null?0:e.length;++n<r;)if(a(l,e[n]))return!0;return!1}o.exports=s},92504:function(o){function s(e,l,a,n){for(var r=e.length,t=a+(n?1:-1);n?t--:++t<r;)if(l(e[t],t,e))return t;return-1}o.exports=s},13807:function(o,s,e){var l=e(92504),a=e(99940),n=e(3729);function r(t,c,S){return c===c?n(t,c,S):l(t,a,S)}o.exports=r},99940:function(o){function s(e){return e!==e}o.exports=s},95453:function(o,s,e){var l=e(78188),a=e(45170),n=e(94936),r=e(29880),t=e(17319),c=e(79967),S=200;function O(x,m,F){var j=-1,C=a,E=x.length,d=!0,p=[],f=p;if(F)d=!1,C=n;else if(E>=S){var y=m?null:t(x);if(y)return c(y);d=!1,C=r,f=new l}else f=m?[]:p;e:for(;++j<E;){var v=x[j],D=m?m(v):v;if(v=F||v!==0?v:0,d&&D===D){for(var T=f.length;T--;)if(f[T]===D)continue e;m&&f.push(D),p.push(v)}else C(f,D,F)||(f!==p&&f.push(D),p.push(v))}return p}o.exports=O},17319:function(o,s,e){var l=e(81956),a=e(43226),n=e(79967),r=1/0,t=l&&1/n(new l([,-0]))[1]==r?function(c){return new l(c)}:a;o.exports=t},3729:function(o){function s(e,l,a){for(var n=a-1,r=e.length;++n<r;)if(e[n]===l)return n;return-1}o.exports=s},43226:function(o){function s(){}o.exports=s},4363:function(o,s,e){var l=e(95453);function a(n){return n&&n.length?l(n):[]}o.exports=a}}]);
