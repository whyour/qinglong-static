"use strict";(self.webpackChunk_whyour_qinglong=self.webpackChunk_whyour_qinglong||[]).push([[5530],{69870:function(e,t){t.Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},81372:function(e,t,r){var n=r(98037),a=r(75271),o=r(69870),l=r(64720),i=function(e,t){return a.createElement(l.Z,(0,n.Z)((0,n.Z)({},e),{},{ref:t,icon:o.Z}))},s=a.forwardRef(i);t.Z=s},67303:function(e,t,r){r.r(t);var n=r(48305),a=r.n(n),o=r(72317),l=r(75271),i=r(50691),s=r(61508),c=r(17082),u=r(93481),p=r(72338),g=r(70892),f=r(6367),d=r(16314),h=r(3475),m=r(98783),b=r(63392),P=r.n(b),y=r(34014),v=r(1371),Z=r(79231),x=r(69822),w=(r(94095),r(52676)),k=i.Z.Title,j=i.Z.Link;t.default=function(e){var t=e.user,r=e.userChange,n=(0,l.useState)(!1),i=a()(n,2),b=i[0],B=i[1],q=(0,l.useState)(),C=a()(q,2),S=C[0],E=C[1],O=(0,l.useState)(!1),_=a()(O,2),T=_[0],A=_[1],R=(0,l.useState)(),U=a()(R,2),K=U[0],z=U[1],I=(0,l.useState)(),W=a()(I,2),H=W[0],M=W[1],N=(0,l.useState)(),Q=a()(N,2),X=Q[0],D=Q[1],G=function(){d.W.put("".concat(h.Z.apiPrefix,"user/two-factor/deactive")).then((function(e){var t=e.code,n=e.data;200===t&&n&&(E(!1),r())})).catch((function(e){console.log(e)}))},L=function(){d.W.get("".concat(h.Z.apiPrefix,"user/two-factor/init")).then((function(e){var t=e.code,r=e.data;200===t&&z(r)})).catch((function(e){console.log(e)}))};return(0,l.useEffect)((function(){E(t&&t.twoFactorActivated),D(t.avatar&&"".concat(h.Z.apiPrefix,"static/").concat(t.avatar))}),[t]),T?(0,w.jsx)(w.Fragment,{children:K?(0,w.jsxs)("div",{children:[(0,w.jsx)(k,{level:5,children:o.ZP.get("第一步")}),o.ZP.get("下载两步验证手机应用，比如 Google Authenticator 、"),(0,w.jsx)(j,{href:"https://www.microsoft.com/en-us/security/mobile-authenticator-app",target:"_blank",children:"Microsoft Authenticator"}),"、",(0,w.jsx)(j,{href:"https://authy.com/download/",target:"_blank",children:"Authy"}),"、",(0,w.jsx)(j,{href:"https://support.1password.com/one-time-passwords/",target:"_blank",children:"1Password"}),"、",(0,w.jsx)(j,{href:"https://support.logmeininc.com/lastpass/help/lastpass-authenticator-lp030014",target:"_blank",children:"LastPass Authenticator"}),(0,w.jsx)(k,{style:{marginTop:5},level:5,children:o.ZP.get("第二步")}),o.ZP.get("使用手机应用扫描二维码，或者输入秘钥")," ",null==K?void 0:K.secret,(0,w.jsx)("div",{style:{marginTop:10},children:(0,w.jsx)(P(),{style:{border:"1px solid #21262d",borderRadius:6},includeMargin:!0,size:187,value:null==K?void 0:K.url})}),(0,w.jsx)(k,{style:{marginTop:5},level:5,children:o.ZP.get("第三步")}),o.ZP.get("输入手机应用上的6位数字"),(0,w.jsx)(c.Z,{style:{margin:"10px 0 10px 0",display:"block",maxWidth:200},value:H,onChange:function(e){return M(e.target.value)},placeholder:"123456"}),(0,w.jsx)(u.Z,{type:"primary",loading:b,onClick:function(){B(!0),d.W.put("".concat(h.Z.apiPrefix,"user/two-factor/active"),{code:H}).then((function(e){var t=e.code,n=e.data;200===t&&(n?(s.ZP.success(o.ZP.get("激活成功")),A(!1),E(!0),r()):s.ZP.success(o.ZP.get("验证失败")))})).catch((function(e){console.log(e)})).finally((function(){return B(!1)}))},children:o.ZP.get("完成设置")})]}):(0,w.jsx)(y.Z,{})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4},children:o.ZP.get("修改用户名密码")}),(0,w.jsxs)(p.Z,{onFinish:function(e){d.W.put("".concat(h.Z.apiPrefix,"user"),{username:e.username,password:e.password}).then((function(e){var t=e.code;e.data;200===t&&(localStorage.removeItem(h.Z.authKey),m.history.push("/login"))})).catch((function(e){console.log(e)}))},layout:"vertical",children:[(0,w.jsx)(p.Z.Item,{label:o.ZP.get("用户名"),name:"username",rules:[{required:!0}],hasFeedback:!0,style:{maxWidth:300},children:(0,w.jsx)(c.Z,{autoComplete:"username",placeholder:o.ZP.get("用户名")})}),(0,w.jsx)(p.Z.Item,{label:o.ZP.get("密码"),name:"password",rules:[{required:!0},{pattern:/^(?!admin$).*$/,message:o.ZP.get("密码不能为admin")}],hasFeedback:!0,style:{maxWidth:300},children:(0,w.jsx)(c.Z,{type:"password",autoComplete:"current-password",placeholder:o.ZP.get("密码")})}),(0,w.jsx)(u.Z,{type:"primary",htmlType:"submit",children:o.ZP.get("保存")})]}),(0,w.jsx)("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4,marginTop:16},children:o.ZP.get("两步验证")}),(0,w.jsx)(u.Z,{type:"primary",danger:S,onClick:function(){S?G():(L(),A(!0))},children:S?o.ZP.get("禁用"):o.ZP.get("启用")}),(0,w.jsx)("div",{style:{fontSize:18,borderBottom:"1px solid #f0f0f0",marginBottom:8,paddingBottom:4,marginTop:16},children:o.ZP.get("头像")}),(0,w.jsx)(g.C,{size:128,shape:"square",icon:(0,w.jsx)(v.Z,{}),src:X}),(0,w.jsx)(x.Z,{rotationSlider:!0,children:(0,w.jsx)(f.Z,{method:"put",showUploadList:!1,maxCount:1,action:"".concat(h.Z.apiPrefix,"user/avatar"),onChange:function(e){e.file&&e.file.response&&(D("".concat(h.Z.apiPrefix,"static/").concat(e.file.response.data)),r())},name:"avatar",headers:{Authorization:"Bearer ".concat(localStorage.getItem(h.Z.authKey))},children:(0,w.jsx)(u.Z,{icon:(0,w.jsx)(Z.Z,{}),style:{marginLeft:8},children:o.ZP.get("更换头像")})})})]})}},3475:function(e,t,r){var n=r(72317),a=window.__ENV__QlBaseUrl||"/";t.Z={siteName:n.ZP.get("青龙"),baseUrl:a,apiPrefix:"".concat(a,"api/"),authKey:"token",layouts:[{name:"primary",include:[/.*/],exclude:[/(\/(en|zh))*\/login/]}],i18n:{languages:[{key:"pt-br",title:"Português",flag:"/portugal.svg"},{key:"en",title:"English",flag:"/america.svg"},{key:"zh",title:n.ZP.get("中文"),flag:"/china.svg"}],defaultLanguage:"en"},scopes:[{name:n.ZP.get("定时任务"),value:"crons"},{name:n.ZP.get("环境变量"),value:"envs"},{name:n.ZP.get("订阅管理"),value:"subscriptions"},{name:n.ZP.get("配置文件"),value:"configs"},{name:n.ZP.get("脚本管理"),value:"scripts"},{name:n.ZP.get("日志管理"),value:"logs"},{name:n.ZP.get("依赖管理"),value:"dependencies"},{name:n.ZP.get("系统信息"),value:"system"}],scopesMap:{crons:n.ZP.get("定时任务"),envs:n.ZP.get("环境变量"),subscriptions:n.ZP.get("订阅管理"),configs:n.ZP.get("配置文件"),scripts:n.ZP.get("脚本管理"),logs:n.ZP.get("日志管理"),dependencies:n.ZP.get("依赖管理"),system:n.ZP.get("系统信息")},notificationModes:[{value:"gotify",label:"Gotify"},{value:"ntfy",label:"Ntfy"},{value:"goCqHttpBot",label:"GoCqHttpBot"},{value:"serverChan",label:n.ZP.get("Server酱")},{value:"pushDeer",label:"PushDeer"},{value:"bark",label:"Bark"},{value:"telegramBot",label:n.ZP.get("Telegram机器人")},{value:"dingtalkBot",label:n.ZP.get("钉钉机器人")},{value:"weWorkBot",label:n.ZP.get("企业微信机器人")},{value:"weWorkApp",label:n.ZP.get("企业微信应用")},{value:"aibotk",label:n.ZP.get("智能微秘书")},{value:"iGot",label:"IGot"},{value:"pushPlus",label:"PushPlus"},{value:"wePlusBot",label:n.ZP.get("微加机器人")},{value:"wxPusherBot",label:"wxPusher"},{value:"chat",label:n.ZP.get("群晖chat")},{value:"email",label:n.ZP.get("邮箱")},{value:"lark",label:n.ZP.get("飞书机器人")},{value:"pushMe",label:"PushMe"},{value:"chronocat",label:"Chronocat"},{value:"webhook",label:n.ZP.get("自定义通知")},{value:"closed",label:n.ZP.get("已关闭")}],notificationModeMap:{gotify:[{label:"gotifyUrl",tip:n.ZP.get("gotify的url地址，例如 https://push.example.de:8080"),required:!0},{label:"gotifyToken",tip:n.ZP.get("gotify的消息应用token码"),required:!0},{label:"gotifyPriority",tip:n.ZP.get("推送消息的优先级")}],ntfy:[{label:"ntfyUrl",tip:n.ZP.get("ntfy的url地址，例如 https://ntfy.sh"),required:!0},{label:"ntfyTopic",tip:n.ZP.get("ntfy应用topic"),required:!0},{label:"ntfyPriority",tip:n.ZP.get("推送消息的优先级")},{label:"ntfyToken",tip:n.ZP.get("ntfy应用token")},{label:"ntfyUsername",tip:n.ZP.get("ntfy应用用户名")},{label:"ntfyPassword",tip:n.ZP.get("ntfy应用密码")},{label:"ntfyActions",tip:n.ZP.get("ntfy用户动作")}],chat:[{label:"synologyChatUrl",tip:n.ZP.get("synologyChat的url地址"),required:!0}],goCqHttpBot:[{label:"goCqHttpBotUrl",tip:n.ZP.get("推送到个人QQ: http://127.0.0.1/send_private_msg，群：http://127.0.0.1/send_group_msg"),required:!0},{label:"goCqHttpBotToken",tip:n.ZP.get("访问密钥"),required:!0},{label:"goCqHttpBotQq",tip:n.ZP.get("如果GOBOT_URL设置 /send_private_msg 则需要填入 user_id=个人QQ 相反如果是 /send_group_msg 则需要填入 group_id=QQ群"),required:!0}],serverChan:[{label:"serverChanKey",tip:n.ZP.get("Server酱SENDKEY"),required:!0}],pushDeer:[{label:"pushDeerKey",tip:n.ZP.get("PushDeer的Key，https://github.com/easychen/pushdeer"),required:!0},{label:"pushDeerUrl",tip:n.ZP.get("PushDeer的自架API endpoint，默认是 https://api2.pushdeer.com/message/push")}],bark:[{label:"barkPush",tip:n.ZP.get("Bark的信息IP/设备码，例如：https://api.day.app/XXXXXXXX"),required:!0},{label:"barkIcon",tip:n.ZP.get("BARK推送图标，自定义推送图标 (需iOS15或以上才能显示)")},{label:"barkSound",tip:n.ZP.get("BARK推送铃声，铃声列表去APP查看复制填写")},{label:"barkGroup",tip:n.ZP.get("BARK推送消息的分组，默认为qinglong")},{label:"barkLevel",tip:n.ZP.get("BARK推送消息的时效性，默认为active")},{label:"barkUrl",tip:n.ZP.get("BARK推送消息的跳转URL")},{label:"barkArchive",tip:n.ZP.get("BARK是否保存推送消息")}],telegramBot:[{label:"telegramBotToken",tip:n.ZP.get("telegram机器人的token，例如：1077xxx4424:AAFjv0FcqxxxxxxgEMGfi22B4yh15R5uw"),required:!0},{label:"telegramBotUserId",tip:n.ZP.get("telegram用户的id，例如：129xxx206"),required:!0},{label:"telegramBotProxyHost",tip:n.ZP.get("代理IP")},{label:"telegramBotProxyPort",tip:n.ZP.get("代理端口")},{label:"telegramBotProxyAuth",tip:n.ZP.get("telegram代理配置认证参数，用户名与密码用英文冒号连接 user:password")},{label:"telegramBotApiHost",tip:n.ZP.get("telegram api自建的反向代理地址，默认tg官方api")}],dingtalkBot:[{label:"dingtalkBotToken",tip:n.ZP.get("钉钉机器人webhook token，例如：5a544165465465645d0f31dca676e7bd07415asdasd"),required:!0},{label:"dingtalkBotSecret",tip:n.ZP.get("密钥，机器人安全设置页面，加签一栏下面显示的SEC开头的字符串")}],weWorkBot:[{label:"weWorkBotKey",tip:n.ZP.get("企业微信机器人的webhook(详见文档 https://work.weixin.qq.com/api/doc/90000/90136/91770)，例如：693a91f6-7xxx-4bc4-97a0-0ec2sifa5aaa"),required:!0},{label:"weWorkOrigin",tip:n.ZP.get("企业微信代理地址")}],weWorkApp:[{label:"weWorkAppKey",tip:n.ZP.get("corpid、corpsecret、touser(注:多个成员ID使用|隔开)、agentid、消息类型(选填，不填默认文本消息类型) 注意用,号隔开(英文输入法的逗号)，例如：wwcfrs,B-76WERQ,qinglong,1000001,2COat"),required:!0},{label:"weWorkOrigin",tip:n.ZP.get("企业微信代理地址")}],aibotk:[{label:"aibotkKey",tip:n.ZP.get("密钥key，智能微秘书个人中心获取apikey，申请地址：https://wechat.aibotk.com/signup?from=ql"),required:!0},{label:"aibotkType",tip:n.ZP.get("发送的目标，群组或者好友"),required:!0,placeholder:n.ZP.get("请输入要发送的目标"),items:[{value:"room",label:n.ZP.get("群聊")},{value:"contact",label:n.ZP.get("好友")}]},{label:"aibotkName",tip:n.ZP.get("要发送的用户昵称或群名，如果目标是群，需要填群名，如果目标是好友，需要填好友昵称"),required:!0}],iGot:[{label:"iGotPushKey",tip:n.ZP.get("iGot的信息推送key，例如：https://push.hellyw.com/XXXXXXXX"),required:!0}],pushPlus:[{label:"pushPlusToken",tip:n.ZP.get("微信扫码登录后一对一推送或一对多推送下面的token(您的Token)，不提供PUSH_PLUS_USER则默认为一对一推送，参考 https://www.pushplus.plus/"),required:!0},{label:"pushPlusUser",tip:n.ZP.get("一对多推送的“群组编码”（一对多推送下面->您的群组(如无则创建)->群组编码，如果您是创建群组人。也需点击“查看二维码”扫描绑定，否则不能接受群组消息推送）")},{label:"pushplusTemplate",tip:n.ZP.get("发送模板")},{label:"pushplusChannel",tip:n.ZP.get("发送渠道")},{label:"pushplusWebhook",tip:n.ZP.get("webhook编码")},{label:"pushplusCallbackUrl",tip:n.ZP.get("发送结果回调地址")},{label:"pushplusTo",tip:n.ZP.get("好友令牌")}],wePlusBot:[{label:"wePlusBotToken",tip:n.ZP.get("用户令牌，扫描登录后 我的—>设置->令牌 中获取，参考 https://www.weplusbot.com/"),required:!0},{label:"wePlusBotReceiver",tip:n.ZP.get("消息接收人")},{label:"wePlusBotVersion",tip:n.ZP.get("调用版本；专业版填写pro，个人版填写personal，为空默认使用专业版")}],wxPusherBot:[{label:"wxPusherBotAppToken",tip:n.ZP.get("wxPusherBot的appToken"),required:!0},{label:"wxPusherBotTopicIds",tip:n.ZP.get("wxPusherBot的topicIds"),required:!1},{label:"wxPusherBotUids",tip:n.ZP.get("wxPusherBot的uids"),required:!1}],lark:[{label:"larkKey",tip:n.ZP.get("飞书群组机器人：https://www.feishu.cn/hc/zh-CN/articles/360024984973"),required:!0}],email:[{label:"emailService",tip:n.ZP.get("邮箱服务名称，比如126、163、Gmail、QQ等，支持列表https://github.com/nodemailer/nodemailer/blob/master/lib/well-known/services.json"),required:!0},{label:"emailUser",tip:n.ZP.get("邮箱认证地址"),required:!0},{label:"emailPass",tip:n.ZP.get("SMTP 登录密码，也可能为特殊口令，视具体邮件服务商说明而定"),required:!0},{label:"emailTo",tip:n.ZP.get("收件邮箱地址，多个分号分隔，默认发送给发件邮箱地址")}],pushMe:[{label:"pushMeKey",tip:n.ZP.get("PushMe的Key，https://push.i-i.me/"),required:!0},{label:"pushMeUrl",tip:n.ZP.get("自建的PushMeServer消息接口地址，例如：http://127.0.0.1:3010，不填则使用官方消息接口"),required:!1}],chronocat:[{label:"chronocatURL",tip:n.ZP.get("Chronocat Red 服务的连接地址 https://chronocat.vercel.app/install/docker/official/"),required:!0},{label:"chronocatQQ",tip:n.ZP.get("个人:user_id=个人QQ 群则填入group_id=QQ群 多个用英文;隔开同时支持个人和群 如：user_id=xxx;group_id=xxxx;group_id=xxxxx"),required:!0},{label:"chronocatToken",tip:n.ZP.get("docker安装在持久化config目录下的chronocat.yml文件可找到"),required:!0}],webhook:[{label:"webhookMethod",tip:n.ZP.get("请求方法"),required:!0,items:[{value:"GET"},{value:"POST"},{value:"PUT"}]},{label:"webhookContentType",tip:n.ZP.get("请求头Content-Type"),required:!0,items:[{value:"text/plain"},{value:"application/json"},{value:"multipart/form-data"},{value:"application/x-www-form-urlencoded"}]},{label:"webhookUrl",tip:n.ZP.get("请求链接以http或者https开头。url或者body中必须包含$title，$content可选，对应api内容的位置"),required:!0,placeholder:"https://xxx.cn/api?content=$title\n"},{label:"webhookHeaders",tip:n.ZP.get("请求头格式Custom-Header1: Header1，多个换行分割"),placeholder:"Custom-Header1: Header1\nCustom-Header2: Header2"},{label:"webhookBody",tip:n.ZP.get("请求体格式key1: value1，多个换行分割。url或者body中必须包含$title，$content可选，对应api内容的位置"),placeholder:"key1: $title\nkey2: $content"}]},documentTitleMap:{"/login":n.ZP.get("登录"),"/initialization":n.ZP.get("初始化"),"/crontab":n.ZP.get("定时任务"),"/env":n.ZP.get("环境变量"),"/subscription":n.ZP.get("订阅管理"),"/config":n.ZP.get("配置文件"),"/script":n.ZP.get("脚本管理"),"/diff":n.ZP.get("对比工具"),"/log":n.ZP.get("日志管理"),"/setting":n.ZP.get("系统设置"),"/error":n.ZP.get("错误日志"),"/dependence":n.ZP.get("依赖管理")},dependenceTypes:["nodejs","python3","linux"]}},16314:function(e,t,r){r.d(t,{W:function(){return b}});var n=r(90228),a=r.n(n),o=r(87999),l=r.n(o),i=r(72317),s=r(61508),c=r(33839),u=r(3475),p=r(98783),g=r(69313),f=r(52676);s.ZP.config({duration:2});var d=Date.now(),h=g.Z.create({timeout:6e4,params:{t:d}}),m=["/api/user/login","/open/auth/token","/api/user/two-factor/login","/api/system","/api/user/init","/api/user/notification/init"];h.interceptors.request.use((function(e){var t=localStorage.getItem(u.Z.authKey);return t&&!m.includes(e.url)?(e.headers.Authorization="Bearer ".concat(t),e):e})),h.interceptors.response.use(function(){var e=l()(a()().mark((function e(t){var r,n,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.status,![502,504].includes(r)){e.next=5;break}p.history.push("/error"),e.next=18;break;case 5:if(401!==r){e.next=9;break}"/login"!==p.history.location.pathname&&(localStorage.removeItem(u.Z.authKey),p.history.push("/login")),e.next=18;break;case 9:return e.prev=9,200!==(n=t.data).code&&(o=n.message||n.data)&&c.Z.error({message:o,description:null!=n&&n.errors?(0,f.jsx)(f.Fragment,{children:null==n?void 0:n.errors.map((function(e){return(0,f.jsx)("div",{children:e.message})}))}):void 0}),e.abrupt("return",n);case 15:e.prev=15,e.t0=e.catch(9);case 17:case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){if(e.response){var t=e.response.data?e.response.data.message||e.message:e.response.statusText,r=e.response.status;if([502,504].includes(r))p.history.push("/error");else if(401===r)"/login"!==p.history.location.pathname&&(s.ZP.error(i.ZP.get("登录已过期，请重新登录")),localStorage.removeItem(u.Z.authKey),p.history.push("/login"));else{var n,a,o,l;if("function"==typeof(null===(n=e.config)||void 0===n?void 0:n.onError))return null===(l=e.config)||void 0===l?void 0:l.onError(e.response);t&&c.Z.error({message:t,description:null!==(a=e.response)&&void 0!==a&&null!==(a=a.data)&&void 0!==a&&a.errors?(0,f.jsx)(f.Fragment,{children:null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o||null===(o=o.errors)||void 0===o?void 0:o.map((function(e){return(0,f.jsxs)("div",{children:[e.message," (",e.value,")"]})}))}):void 0})}}else console.log(e.message);return Promise.reject(e)}));var b=h},27916:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(99459),a=r(75271);function o(){var e=a.useReducer((function(e){return e+1}),0);return(0,n.Z)(e,2)[1]}},70892:function(e,t,r){r.d(t,{C:function(){return O}});var n=r(2053),a=r(57904),o=r(24744),l=r(99459),i=r(82187),s=r.n(i),c=r(28526),u=r(3083),p=r(75271),g=r(96820),f=r(71343),d=r(46555),h=p.createContext("default"),m=function(e){var t=e.children,r=e.size;return p.createElement(h.Consumer,null,(function(e){return p.createElement(h.Provider,{value:r||e},t)}))},b=h,P=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},y=function(e,t){var r=p.useContext(b),i=p.useState(1),h=(0,l.Z)(i,2),m=h[0],y=h[1],v=p.useState(!1),Z=(0,l.Z)(v,2),x=Z[0],w=Z[1],k=p.useState(!0),j=(0,l.Z)(k,2),B=j[0],q=j[1],C=p.useRef(null),S=p.useRef(null),E=(0,u.sQ)(t,C),O=p.useContext(g.E_).getPrefixCls,_=function(){if(S.current&&C.current){var t=S.current.offsetWidth,r=C.current.offsetWidth;if(0!==t&&0!==r){var n=e.gap,a=void 0===n?4:n;2*a<r&&y(r-2*a<t?(r-2*a)/t:1)}}};p.useEffect((function(){w(!0)}),[]),p.useEffect((function(){q(!0),y(1)}),[e.src]),p.useEffect((function(){_()}),[e.gap]);var T,A=e.prefixCls,R=e.shape,U=void 0===R?"circle":R,K=e.size,z=void 0===K?"default":K,I=e.src,W=e.srcSet,H=e.icon,M=e.className,N=e.alt,Q=e.draggable,X=e.children,D=e.crossOrigin,G=P(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),L="default"===z?r:z,F=Object.keys("object"===(0,o.Z)(L)&&L||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),$=(0,f.Z)(F),V=p.useMemo((function(){if("object"!==(0,o.Z)(L))return{};var e=d.c4.find((function(e){return $[e]})),t=L[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:H?t/2:18}:{}}),[$,L]),J=O("avatar",A),Y=s()((0,a.Z)((0,a.Z)({},"".concat(J,"-lg"),"large"===L),"".concat(J,"-sm"),"small"===L)),ee=p.isValidElement(I),te=s()(J,Y,(0,a.Z)((0,a.Z)((0,a.Z)({},"".concat(J,"-").concat(U),!!U),"".concat(J,"-image"),ee||I&&B),"".concat(J,"-icon"),!!H),M),re="number"==typeof L?{width:L,height:L,lineHeight:"".concat(L,"px"),fontSize:H?L/2:18}:{};if("string"==typeof I&&B)T=p.createElement("img",{src:I,draggable:Q,srcSet:W,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&q(!1)},alt:N,crossOrigin:D});else if(ee)T=I;else if(H)T=H;else if(x||1!==m){var ne="scale(".concat(m,") translateX(-50%)"),ae={msTransform:ne,WebkitTransform:ne,transform:ne},oe="number"==typeof L?{lineHeight:"".concat(L,"px")}:{};T=p.createElement(c.Z,{onResize:_},p.createElement("span",{className:"".concat(J,"-string"),ref:S,style:(0,n.Z)((0,n.Z)({},oe),ae)},X))}else T=p.createElement("span",{className:"".concat(J,"-string"),style:{opacity:0},ref:S},X);return delete G.onError,delete G.gap,p.createElement("span",(0,n.Z)({},G,{style:(0,n.Z)((0,n.Z)((0,n.Z)({},re),V),G.style),className:te,ref:E}),T)};var v=p.forwardRef(y),Z=r(22615),x=function(e){return e?"function"==typeof e?e():e:null},w=r(21485),k=r(59816),j=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},B=function(e){var t=e.title,r=e.content,n=e.prefixCls;return p.createElement(p.Fragment,null,t&&p.createElement("div",{className:"".concat(n,"-title")},x(t)),p.createElement("div",{className:"".concat(n,"-inner-content")},x(r)))};var q=p.forwardRef((function(e,t){var r=e.prefixCls,a=e.title,o=e.content,l=e._overlay,i=e.placement,s=void 0===i?"top":i,c=e.trigger,u=void 0===c?"hover":c,f=e.mouseEnterDelay,d=void 0===f?.1:f,h=e.mouseLeaveDelay,m=void 0===h?.1:h,b=e.overlayStyle,P=void 0===b?{}:b,y=j(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),v=p.useContext(g.E_).getPrefixCls,Z=v("popover",r),x=v(),q=p.useMemo((function(){return l||(a||o?p.createElement(B,{prefixCls:Z,title:a,content:o}):null)}),[l,a,o,Z]);return p.createElement(k.Z,(0,n.Z)({placement:s,trigger:u,mouseEnterDelay:d,mouseLeaveDelay:m,overlayStyle:P},y,{prefixCls:Z,ref:t,overlay:q,transitionName:(0,w.mL)(x,"zoom-big",y.transitionName)}))})),C=r(5555),S=function(e){var t=p.useContext(g.E_),r=t.getPrefixCls,n=t.direction,o=e.prefixCls,l=e.className,i=void 0===l?"":l,c=e.maxCount,u=e.maxStyle,f=e.size,d=r("avatar-group",o),h=s()(d,(0,a.Z)({},"".concat(d,"-rtl"),"rtl"===n),i),b=e.children,P=e.maxPopoverPlacement,y=void 0===P?"top":P,x=e.maxPopoverTrigger,w=void 0===x?"hover":x,k=(0,Z.Z)(b).map((function(e,t){return(0,C.Tm)(e,{key:"avatar-key-".concat(t)})})),j=k.length;if(c&&c<j){var B=k.slice(0,c),S=k.slice(c,j);return B.push(p.createElement(q,{key:"avatar-popover-key",content:S,trigger:w,placement:y,overlayClassName:"".concat(d,"-popover")},p.createElement(v,{style:u},"+".concat(j-c)))),p.createElement(m,{size:f},p.createElement("div",{className:h,style:e.style},B))}return p.createElement(m,{size:f},p.createElement("div",{className:h,style:e.style},k))},E=v;E.Group=S;var O=E},71343:function(e,t,r){var n=r(75271),a=r(27916),o=r(46555);t.Z=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,n.useRef)({}),r=(0,a.Z)();return(0,n.useEffect)((function(){var n=o.ZP.subscribe((function(n){t.current=n,e&&r()}));return function(){return o.ZP.unsubscribe(n)}}),[]),t.current}},58504:function(e,t,r){r(5860)},15767:function(e,t,r){r.d(t,{CR:function(){return c},Jh:function(){return s},ZT:function(){return a},_T:function(){return l},ev:function(){return u},mG:function(){return i},pi:function(){return o}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)};function l(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function i(e,t,r,n){return new(r||(r=Promise))((function(a,o){function l(e){try{s(n.next(e))}catch(e){o(e)}}function i(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,i)}s((n=n.apply(e,t||[])).next())}))}function s(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=i(0),l.throw=i(1),l.return=i(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}Object.create;function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)l.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return l}function u(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError}}]);