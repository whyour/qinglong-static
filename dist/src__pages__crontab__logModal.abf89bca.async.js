(self.webpackChunk=self.webpackChunk||[]).push([[3249],{35316:function(e,r,n){"use strict";n.d(r,{Z:function(){return E}});var u=n(56453),o=n(63313),t={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"}}]},name:"loading-3-quarters",theme:"outlined"},f=t,c=n(17536),s=function(P,C){return o.createElement(c.Z,(0,u.Z)((0,u.Z)({},P),{},{ref:C,icon:f}))};s.displayName="Loading3QuartersOutlined";var E=o.forwardRef(s)},818:function(e,r,n){"use strict";n.r(r);var u=n(54306),o=n.n(u),t=n(63313),f=n.n(t),c=n(11540),s=n(32049),E=n(24550),O=n(21728),P=n(96786),C=n(45277),Z=n(35316),b=n(9734),Q=n(80675),F=n(96001),a=n(11527),D;(function(l){l[l.running=0]="running",l[l.idle=1]="idle",l[l.disabled=2]="disabled",l[l.queued=3]="queued"})(D||(D={}));var w=c.Z.Countdown,H=function(v){var i=v.cron,N=v.handleCancel,x=v.visible,h=v.data,p=v.logUrl,$=(0,t.useState)("\u542F\u52A8\u4E2D..."),L=o()($,2),T=L[0],I=L[1],z=(0,t.useState)(!0),R=o()(z,2),y=R[0],S=R[1],V=(0,t.useState)(!0),B=o()(V,2),U=B[0],G=B[1],J=(0,t.useState)(!1),W=o()(J,2),X=W[0],Y=W[1],M=(0,t.useRef)({value:0,down:!0}),k=function d(m){m&&S(!0),P.W.get(p||"".concat(C.Z.apiPrefix,"crons/").concat(i.id,"/log")).then(function(g){var tn=g.code,K=g.data;if(tn===200&&localStorage.getItem("logCron")===String(i.id)&&K!==T){var _=K;I(_||"\u6682\u65E0\u65E5\u5FD7");var j=Boolean(_&&!(0,F.x$)(_)&&!_.includes("\u91CD\u542F\u9762\u677F")&&!_.includes("\u4EFB\u52A1\u672A\u8FD0\u884C"));G(j),q(),j&&setTimeout(function(){d()},2e3),_&&_.includes("\u91CD\u542F\u9762\u677F")&&i.status===D.running&&(s.ZP.warning({content:(0,a.jsxs)("span",{children:["\u7CFB\u7EDF\u5C06\u5728",(0,a.jsx)(w,{className:"inline-countdown",format:"ss",value:Date.now()+1e3*30}),"\u79D2\u540E\u81EA\u52A8\u5237\u65B0"]}),duration:10}),setTimeout(function(){window.location.reload()},3e4))}}).finally(function(){m&&S(!1)})},q=function(){M.current.down&&setTimeout(function(){document.querySelector("#log-flag").scrollIntoView({behavior:"smooth"})},1e3)},A=function(){localStorage.removeItem("logCron"),N()},nn=function(m){var g=m.target.scrollTop;M.current.down&&(M.current={value:g,down:g>M.current.value})},en=function(){return(0,a.jsxs)(a.Fragment,{children:[(U||y)&&(0,a.jsx)(Z.Z,{spin:!0}),!U&&!y&&(0,a.jsx)(b.Z,{}),(0,a.jsx)("span",{style:{marginLeft:5},children:i&&i.name})]})};return(0,t.useEffect)(function(){i&&i.id&&x&&k(!0)},[i,x]),(0,t.useEffect)(function(){h&&I(h)},[h]),(0,t.useEffect)(function(){Y(document.body.clientWidth<768)},[]),(0,a.jsx)(E.Z,{title:en(),open:x,centered:!0,className:"log-modal",bodyStyle:{minHeight:"300px"},forceRender:!0,onOk:function(){return A()},onCancel:function(){return A()},footer:[(0,a.jsx)(O.Z,{type:"primary",onClick:function(){return A()},children:"\u77E5\u9053\u4E86"})],children:(0,a.jsxs)("div",{onScroll:nn,className:"log-container",children:[y?(0,a.jsx)(Q.Z,{}):(0,a.jsx)("pre",{style:X?{fontFamily:"Source Code Pro",width:375,zoom:.83}:{},children:T}),(0,a.jsx)("div",{id:"log-flag"})]})})};r.default=H},24451:function(e,r,n){"use strict";n.d(r,{Z:function(){return f}});var u=n(91600),o=n(63313),t=n.n(o);function f(){var c=o.useReducer(function(O){return O+1},0),s=(0,u.Z)(c,2),E=s[1];return E}},24669:function(e){var r=Array.isArray;e.exports=r},30006:function(e,r,n){var u=n(25705);function o(t){if(Array.isArray(t))return u(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},16660:function(e){function r(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},95848:function(e){function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},93525:function(e,r,n){var u=n(30006),o=n(16660),t=n(41442),f=n(95848);function c(s){return u(s)||o(s)||t(s)||f()}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
