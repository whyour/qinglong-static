"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[701],{701:function(re,S,e){e.r(S);var P=e(30279),c=e.n(P),E=e(46686),s=e.n(E),o=e(63313),V=e.n(o),v=e(77073),j=e(26322),p=e(7691),M=e(74309),m=e(76385),f=e(7619),b=e(90138),u=e(30555),g=e(71045),O=e(27167),r=e(87724),A=e(89993),n=e(11527),i=v.Z.Option,_={".py":"python",".js":"javascript",".sh":"shell",".ts":"typescript"},t={python:".py",javascript:".js",shell:".sh",typescript:".ts"},D=function(l){var R=l.treeData,W=l.currentNode,F=l.content,J=l.handleCancel,x=l.visible,Z=l.socketMessage,y=(0,o.useState)(""),C=s()(y,2),U=C[0],K=C[1],_e=(0,o.useState)("javascript"),B=s()(_e,2),N=B[0],z=B[1],Q=(0,o.useState)(),w=s()(Q,2),I=w[0],H=w[1],fe=(0,o.useState)(""),ae=s()(fe,2),le=ae[0],G=ae[1],ge=(0,o.useState)(!1),se=s()(ge,2),he=se[0],L=se[1],pe=(0,o.useState)(!1),X=s()(pe,2),ie=X[0],ue=X[1],q=(0,o.useState)(""),de=s()(q,2),Y=de[0],ee=de[1],Me=(0,r.F)(),Oe=Me.theme,$=(0,o.useRef)(null),te=(0,o.useState)(!1),me=s()(te,2),ce=me[0],oe=me[1],De=(0,o.useState)(null),Ee=s()(De,2),Pe=Ee[0],ve=Ee[1],Ce=function(){J()},Ie=function(d,T){if(!(T.key===le||!d)&&T.type!=="directory"){var ne=_[d.slice(-3)]||"";H(T),z(ne),Te(T),G(T.key)}},Te=function(d){m.W.get("".concat(f.Z.apiPrefix,"scripts/").concat(d.title,"?path=").concat(d.parent||"")).then(function(T){var ne=T.code,Se=T.data;ne===200&&K(Se)})},Re=function(){ee("");var d=$.current.getValue().replace(/\r\n/g,`
`);m.W.put("".concat(f.Z.apiPrefix,"scripts/run"),{data:{filename:I.title,path:I.parent||"",content:d}}).then(function(T){var ne=T.code,Se=T.data;ne===200&&(oe(!0),ve(Se))})},k=function(){!I||!I.title||m.W.put("".concat(f.Z.apiPrefix,"scripts/stop"),{data:{filename:I.title,path:I.parent||"",pid:Pe}}).then(function(d){var T=d.code,ne=d.data;T===200&&oe(!1)})};return(0,o.useEffect)(function(){if(!!Z){var h=Z.type,d=Z.message,T=Z.references;h==="manuallyRunScript"&&((0,A.x$)(d)&&setTimeout(function(){oe(!1)},300),Y&&(d=`
`.concat(d)),ee("".concat(Y).concat(d)))}},[Z]),(0,o.useEffect)(function(){if(ee(""),W){H(W),K(F),G(W.key);var h=_[W.title.slice(-3)]||"";z(h)}},[F,W]),(0,n.jsxs)(j.Z,{className:"edit-modal",closable:!1,title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{treeExpandAction:"click",style:{marginRight:8,width:150},value:le,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:R,placeholder:"\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6",fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:Ie}),(0,n.jsxs)(v.Z,{value:N,style:{width:110,marginRight:8},onChange:function(d){z(d)},children:[(0,n.jsx)(i,{value:"javascript",children:"javascript"}),(0,n.jsx)(i,{value:"typescript",children:"typescript"}),(0,n.jsx)(i,{value:"shell",children:"shell"}),(0,n.jsx)(i,{value:"python",children:"python"})]}),(0,n.jsx)(M.Z,{type:"primary",style:{marginRight:8},onClick:ce?k:Re,children:ce?"\u505C\u6B62":"\u8FD0\u884C"}),(0,n.jsx)(M.Z,{type:"primary",style:{marginRight:8},onClick:function(){ee("")},children:"\u6E05\u7A7A\u65E5\u5FD7"}),(0,n.jsx)(M.Z,{type:"primary",style:{marginRight:8},onClick:function(){ue(!0)},children:"\u8BBE\u7F6E"}),(0,n.jsx)(M.Z,{type:"primary",style:{marginRight:8},onClick:function(){L(!0)},children:"\u4FDD\u5B58"}),(0,n.jsx)(M.Z,{type:"primary",style:{marginRight:8},onClick:function(){k(),J()},children:"\u9000\u51FA"})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:Ce,open:x,children:[(0,n.jsxs)(b.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},children:[(0,n.jsx)(u.ZP,{language:N,value:U,theme:Oe,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1},onMount:function(d){$.current=d}}),(0,n.jsx)("pre",{style:{height:"100%",padding:"0 15px"},children:Y})]}),(0,n.jsx)(g.default,{visible:he,handleCancel:function(){L(!1)},file:c()({content:$.current&&$.current.getValue().replace(/\r\n/g,`
`)},I)}),(0,n.jsx)(O.default,{visible:ie,handleCancel:function(){ue(!1)}})]})};S.default=D},71045:function(re,S,e){e.r(S);var P=e(35290),c=e.n(P),E=e(30279),s=e.n(E),o=e(411),V=e.n(o),v=e(46686),j=e.n(v),p=e(63313),M=e.n(p),m=e(78455),f=e(80743),b=e(97325),u=e(2991),g=e(76385),O=e(7619),r=e(11527),A=function(i){var _=i.file,t=i.handleCancel,D=i.visible,a=m.Z.useForm(),l=j()(a,1),R=l[0],W=(0,p.useState)(!1),F=j()(W,2),J=F[0],x=F[1],Z=function(){var y=V()(c()().mark(function C(U){var K;return c()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:x(!0),K=s()(s()(s()({},_),U),{},{originFilename:_.title}),g.W.post("".concat(O.Z.apiPrefix,"scripts"),{data:K}).then(function(N){var z=N.code,Q=N.data;z===200&&(f.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),t(Q)),x(!1)});case 3:case"end":return B.stop()}},C)}));return function(U){return y.apply(this,arguments)}}();return(0,p.useEffect)(function(){R.resetFields(),x(!1)},[_,D]),(0,r.jsx)(b.Z,{title:"\u4FDD\u5B58\u6587\u4EF6",open:D,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){R.validateFields().then(function(C){Z(C)}).catch(function(C){console.log("Validate Failed:",C)})},onCancel:function(){return t()},confirmLoading:J,children:(0,r.jsxs)(m.Z,{form:R,layout:"vertical",name:"script_modal",initialValues:{filename:_==null?void 0:_.title,path:(_==null?void 0:_.parent)||""},children:[(0,r.jsx)(m.Z.Item,{name:"filename",label:"\u6587\u4EF6\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}],children:(0,r.jsx)(u.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"})}),(0,r.jsx)(m.Z.Item,{name:"path",label:"\u4FDD\u5B58\u76EE\u5F55",children:(0,r.jsx)(u.Z,{placeholder:"\u8BF7\u8F93\u5165\u4FDD\u5B58\u76EE\u5F55\uFF0C\u9ED8\u8BA4scripts\u76EE\u5F55"})})]})})};S.default=A},27167:function(re,S,e){e.r(S);var P=e(35290),c=e.n(P),E=e(30279),s=e.n(E),o=e(411),V=e.n(o),v=e(46686),j=e.n(v),p=e(63313),M=e.n(p),m=e(78455),f=e(80743),b=e(97325),u=e(2991),g=e(76385),O=e(7619),r=e(11527),A=function(i){var _=i.file,t=i.handleCancel,D=i.visible,a=m.Z.useForm(),l=j()(a,1),R=l[0],W=(0,p.useState)(!1),F=j()(W,2),J=F[0],x=F[1],Z=function(){var y=V()(c()().mark(function C(U){var K;return c()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:x(!0),K=s()(s()({},_),U),g.W.post("".concat(O.Z.apiPrefix,"scripts"),{data:K}).then(function(N){var z=N.code,Q=N.data;z===200&&(f.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),t(Q)),x(!1)});case 3:case"end":return B.stop()}},C)}));return function(U){return y.apply(this,arguments)}}();return(0,p.useEffect)(function(){R.resetFields(),x(!1)},[_,D]),(0,r.jsx)(b.Z,{title:"\u8FD0\u884C\u8BBE\u7F6E",open:D,forceRender:!0,centered:!0,onCancel:function(){return t()},children:(0,r.jsx)(m.Z,{form:R,layout:"vertical",name:"setting_modal",initialValues:_,children:(0,r.jsx)(m.Z.Item,{name:"filename",label:"\u5F85\u5F00\u53D1",rules:[{required:!0,message:"\u5F85\u5F00\u53D1"}],children:(0,r.jsx)(u.Z,{placeholder:"\u5F85\u5F00\u53D1"})})})})};S.default=A},87724:function(re,S,e){e.d(S,{F:function(){return v},e:function(){return V}});var P=e(46686),c=e.n(P),E=e(63313),s=e.n(E),o=e(89993),V=function(){var p=(0,E.useState)("100%"),M=c()(p,2),m=M[0],f=M[1],b=(0,E.useState)(0),u=c()(b,2),g=u[0],O=u[1],r=(0,E.useState)(-72),A=c()(r,2),n=A[0],i=A[1],_=(0,E.useState)(!1),t=c()(_,2),D=t[0],a=t[1],l=(0,E.useMemo)(function(){return(0,o.ZP)()},[]),R=l.platform;return(0,E.useEffect)(function(){R==="mobile"&&document.body.offsetWidth<768?(f("auto"),O(0),i(0),a(!0)):(f("100%"),O(0),i(-72),a(!1))},[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:n,width:m,marginLeft:g},isPhone:D}},v=function(){var p=(0,E.useState)(),M=c()(p,2),m=M[0],f=M[1],b=function(){var g=window.matchMedia("(prefers-color-scheme: dark)"),O=localStorage.getItem("qinglong_dark_theme"),r=g.matches&&O!=="light"||O==="dark";f(r?"vs-dark":"vs")};return(0,E.useEffect)(function(){var u=window.matchMedia("(prefers-color-scheme: dark)"),g=localStorage.getItem("qinglong_dark_theme"),O=u.matches&&g!=="light"||g==="dark";f(O?"vs-dark":"vs");var r=function(n){(g==="auto"||!g)&&(n.matches?f("vs-dark"):f("vs"))};typeof u.addEventListener=="function"?u.addEventListener("change",r):typeof u.addListener=="function"&&u.addListener(r)},[]),{theme:m,reloadTheme:b}}},77073:function(re,S,e){var P=e(47220),c=e(96600),E=e(84875),s=e.n(E),o=e(37900),V=e(1334),v=e(63313),j=e.n(v),p=e(71010),M=e(77621),m=e(4874),f=e(59418),b=e(19092),u=e(93600),g=e(51591),O=e(62330),r=function(_,t){var D={};for(var a in _)Object.prototype.hasOwnProperty.call(_,a)&&t.indexOf(a)<0&&(D[a]=_[a]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(_);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(_,a[l])&&(D[a[l]]=_[a[l]]);return D},A="SECRET_COMBOBOX_MODE_DO_NOT_USE",n=function(t,D){var a,l=t.prefixCls,R=t.bordered,W=R===void 0?!0:R,F=t.className,J=t.getPopupContainer,x=t.dropdownClassName,Z=t.popupClassName,y=t.listHeight,C=y===void 0?256:y,U=t.placement,K=t.listItemHeight,_e=K===void 0?24:K,B=t.size,N=t.disabled,z=t.notFoundContent,Q=t.status,w=t.showArrow,I=r(t,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),H=v.useContext(p.E_),fe=H.getPopupContainer,ae=H.getPrefixCls,le=H.renderEmpty,G=H.direction,ge=H.virtual,se=H.dropdownMatchSelectWidth,he=v.useContext(f.Z),L=ae("select",l),pe=ae(),X=v.useMemo(function(){var k=I.mode;if(k!=="combobox")return k===A?"combobox":k},[I.mode]),ie=X==="multiple"||X==="tags",ue=w!==void 0?w:I.loading||!(ie||X==="combobox"),q=(0,v.useContext)(b.aM),de=q.status,Y=q.hasFeedback,ee=q.isFormItemInput,Me=q.feedbackIcon,Oe=(0,g.F)(de,Q),$;z!==void 0?$=z:X==="combobox"?$=null:$=(le||M.Z)("Select");var te=(0,O.Z)((0,c.Z)((0,c.Z)({},I),{multiple:ie,hasFeedback:Y,feedbackIcon:Me,showArrow:ue,prefixCls:L})),me=te.suffixIcon,ce=te.itemIcon,oe=te.removeIcon,De=te.clearIcon,Ee=(0,V.Z)(I,["suffixIcon","itemIcon"]),Pe=s()(Z||x,(0,P.Z)({},"".concat(L,"-dropdown-").concat(G),G==="rtl")),ve=B||he,Ce=v.useContext(m.Z),Ie=N||Ce,Te=s()((a={},(0,P.Z)(a,"".concat(L,"-lg"),ve==="large"),(0,P.Z)(a,"".concat(L,"-sm"),ve==="small"),(0,P.Z)(a,"".concat(L,"-rtl"),G==="rtl"),(0,P.Z)(a,"".concat(L,"-borderless"),!W),(0,P.Z)(a,"".concat(L,"-in-form-item"),ee),a),(0,g.Z)(L,Oe,Y),F),Re=function(){return U!==void 0?U:G==="rtl"?"bottomRight":"bottomLeft"};return v.createElement(o.ZP,(0,c.Z)({ref:D,virtual:ge,dropdownMatchSelectWidth:se},Ee,{transitionName:(0,u.mL)(pe,(0,u.q0)(U),I.transitionName),listHeight:C,listItemHeight:_e,mode:X,prefixCls:L,placement:Re(),direction:G,inputIcon:me,menuItemSelectedIcon:ce,removeIcon:oe,clearIcon:De,notFoundContent:$,className:Te,getPopupContainer:J||fe,dropdownClassName:Pe,showArrow:Y||w,disabled:Ie}))},i=v.forwardRef(n);i.SECRET_COMBOBOX_MODE_DO_NOT_USE=A,i.Option=o.Wx,i.OptGroup=o.Xo,S.Z=i}}]);
