(self.webpackChunk=self.webpackChunk||[]).push([[6465],{123:function(e,t,n){"use strict";n.r(t);var o=n(57213),a=n.n(o),r=n(54306),c=n.n(r),l=n(88265),i=n(63313),s=n(67393),u=n(9835),d=n(84163),f=n(84468),p=n(22159),m=n(55484),g=n(24378),v=n(28756),h=n(57679),Z=n(71571),y=n(15207),x=n(57229),b=n(78008),C=n(11227),P=(n(10761),n(59953)),w=n(41422),O=n(7154),j=n(11527);t.default=function(e){var t=e.systemInfo,n=e.reloadTheme,o=localStorage.getItem("qinglong_dark_theme")||"auto",r=(0,i.useState)(),k=c()(r,2),I=k[0],E=k[1],S=s.Z.useForm(),N=c()(S,1)[0],_=((0,i.useRef)(),(0,i.useState)(!1)),F=c()(_,2),M=F[0],R=F[1],A=(0,O.default)(l.ZP.get("上传")),T=(0,O.default)(l.ZP.get("下载")),B=Z||{},W=B.enable,D=B.disable,q=(B.exportGeneratedCSS,B.setFetchMethod),L=B.auto,z=function(){x.W.put("".concat(y.Z.apiPrefix,"system/config"),I).then((function(e){var t=e.code;e.data;200===t&&u.ZP.success(l.ZP.get("更新成功"))})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){x.W.get("".concat(y.Z.apiPrefix,"system/config")).then((function(e){var t=e.code,n=e.data;200===t&&n.info&&E(n.info)})).catch((function(e){console.log(e)}))}),[]),(0,j.jsxs)(s.Z,{layout:"vertical",form:N,children:[(0,j.jsx)(s.Z.Item,{label:l.ZP.get("主题"),name:"theme",initialValue:o,children:(0,j.jsxs)(f.ZP.Group,{onChange:function(e){var t=e.target.value;localStorage.setItem("qinglong_dark_theme",e.target.value),q(fetch),"dark"===t?W({}):"light"===t?D():L({}),n()},value:o,optionType:"button",buttonStyle:"solid",children:[(0,j.jsx)(f.ZP.Button,{value:"light",style:{width:70,textAlign:"center"},children:l.ZP.get("亮色")}),(0,j.jsx)(f.ZP.Button,{value:"dark",style:{width:66,textAlign:"center"},children:l.ZP.get("暗色")}),(0,j.jsx)(f.ZP.Button,{value:"auto",style:{width:129,textAlign:"center"},children:l.ZP.get("跟随系统")})]})}),(0,j.jsx)(s.Z.Item,{label:l.ZP.get("日志删除频率"),name:"frequency",tooltip:l.ZP.get("每x天自动删除x天以前的日志"),children:(0,j.jsxs)(p.Z.Group,{compact:!0,children:[(0,j.jsx)(m.Z,{addonBefore:l.ZP.get("每"),addonAfter:l.ZP.get("天"),style:{width:180},min:0,value:null==I?void 0:I.logRemoveFrequency,onChange:function(e){E(a()(a()({},I),{},{logRemoveFrequency:e}))}}),(0,j.jsx)(g.Z,{type:"primary",onClick:z,style:{width:84},children:l.ZP.get("确认")})]})}),(0,j.jsx)(s.Z.Item,{label:l.ZP.get("定时任务并发数"),name:"frequency",children:(0,j.jsxs)(p.Z.Group,{compact:!0,children:[(0,j.jsx)(m.Z,{style:{width:180},min:1,value:null==I?void 0:I.cronConcurrency,onChange:function(e){E(a()(a()({},I),{},{cronConcurrency:e}))}}),(0,j.jsx)(g.Z,{type:"primary",onClick:z,style:{width:84},children:l.ZP.get("确认")})]})}),(0,j.jsx)(s.Z.Item,{label:l.ZP.get("语言"),name:"lang",children:(0,j.jsx)(v.Z,{defaultValue:localStorage.getItem("lang")||"",style:{width:264},onChange:function(e){localStorage.setItem("lang",e),setTimeout((function(){window.location.reload()}),500)},options:[{value:"",label:l.ZP.get("跟随系统")},{value:"zh",label:"简体中文"},{value:"en",label:"English"}]})}),(0,j.jsxs)(s.Z.Item,{label:l.ZP.get("数据备份还原"),name:"frequency",children:[(0,j.jsx)(g.Z,{type:"primary",onClick:function(){R(!0),x.W.put("".concat(y.Z.apiPrefix,"system/data/export"),{},{responseType:"blob",timeout:864e5,onDownloadProgress:function(e){e.progress&&T(parseFloat((100*e.progress).toFixed(1)))}}).then((function(e){(0,C.saveAs)(e,"data.tgz")})).catch((function(e){console.log(e)})).finally((function(){return R(!1)}))},loading:M,children:M?l.ZP.get("生成数据中..."):l.ZP.get("备份")}),(0,j.jsx)(h.Z,{method:"put",showUploadList:!1,maxCount:1,action:"".concat(y.Z.apiPrefix,"system/data/import"),onChange:function(e){var t,n,o;null!==(t=e.event)&&void 0!==t&&t.percent&&(A(parseFloat(null===(n=e.event)||void 0===n?void 0:n.percent.toFixed(1))),100===(null===(o=e.event)||void 0===o?void 0:o.percent)&&d.Z.confirm({width:600,maskClosable:!1,title:l.ZP.get("确认重启"),centered:!0,content:l.ZP.get("备份数据上传成功，确认覆盖数据"),okText:l.ZP.get("重启"),onOk:function(){x.W.put("".concat(y.Z.apiPrefix,"system/reload"),{type:"data"}).then((function(){u.ZP.success({content:(0,j.jsxs)("span",{children:[l.ZP.get("系统将在"),(0,j.jsx)(w.Z,{className:"inline-countdown",format:"ss",value:Date.now()+3e4}),l.ZP.get("秒后自动刷新")]}),duration:30}),setTimeout((function(){window.location.reload()}),3e4)})).catch((function(e){console.log(e)}))}}))},name:"data",headers:{Authorization:"Bearer ".concat(localStorage.getItem(y.Z.authKey))},children:(0,j.jsx)(g.Z,{icon:(0,j.jsx)(P.Z,{}),style:{marginLeft:8},children:l.ZP.get("还原数据")})})]}),(0,j.jsx)(s.Z.Item,{label:l.ZP.get("检查更新"),name:"update",children:(0,j.jsx)(b.default,{systemInfo:t})})]})}},7154:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n(88265),a=n(13800),r=n(84163),c=n(63313),l=n(11527);function i(e){var t=(0,c.useRef)(),n=function(e){var t=e.percent;return(0,l.jsx)(a.Z,{style:{display:"flex",justifyContent:"center"},type:"circle",percent:t})};return function(a){t.current?t.current.update({title:"".concat(e).concat(a>=100?o.ZP.get("成功"):o.ZP.get("中...")),content:(0,l.jsx)(n,{percent:a})}):t.current=r.Z.info({width:600,maskClosable:!1,title:"".concat(e).concat(a>=100?o.ZP.get("成功"):o.ZP.get("中...")),centered:!0,content:(0,l.jsx)(n,{percent:a})})}}},10761:function(){},60822:function(e,t,n){"use strict";function o(e){return Object.keys(e).reduce((function(t,n){return!n.startsWith("data-")&&!n.startsWith("aria-")&&"role"!==n||n.startsWith("data-__")||(t[n]=e[n]),t}),{})}n.d(t,{Z:function(){return o}})},92235:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(41171),a=n(63313);function r(){var e=a.useReducer((function(e){return e+1}),0);return(0,o.Z)(e,2)[1]}},84468:function(e,t,n){"use strict";n.d(t,{ZP:function(){return N}});var o=n(88028),a=n(22481),r=n(41171),c=n(84875),l=n.n(c),i=n(16376),s=n(63313),u=n(82259),d=n(65189),f=n(60822),p=s.createContext(null),m=p.Provider,g=p,v=s.createContext(null),h=v.Provider,Z=n(69370),y=n(93355),x=n(7893),b=n(76737),C=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},P=function(e,t){var n,r=s.useContext(g),c=s.useContext(v),i=s.useContext(u.E_),d=i.getPrefixCls,f=i.direction,p=s.useRef(),m=(0,y.sQ)(t,p),h=(0,s.useContext)(b.aM).isFormItemInput,P=e.prefixCls,w=e.className,O=e.children,j=e.style,k=e.disabled,I=C(e,["prefixCls","className","children","style","disabled"]),E=d("radio",P),S="button"===((null==r?void 0:r.optionType)||c)?"".concat(E,"-button"):E,N=(0,o.Z)({},I),_=s.useContext(x.Z);N.disabled=k||_,r&&(N.name=r.name,N.onChange=function(t){var n,o;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(o=null==r?void 0:r.onChange)||void 0===o||o.call(r,t)},N.checked=e.value===r.value,N.disabled=N.disabled||r.disabled);var F=l()("".concat(S,"-wrapper"),(n={},(0,a.Z)(n,"".concat(S,"-wrapper-checked"),N.checked),(0,a.Z)(n,"".concat(S,"-wrapper-disabled"),N.disabled),(0,a.Z)(n,"".concat(S,"-wrapper-rtl"),"rtl"===f),(0,a.Z)(n,"".concat(S,"-wrapper-in-form-item"),h),n),w);return s.createElement("label",{className:F,style:j,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},s.createElement(Z.Z,(0,o.Z)({},N,{type:"radio",prefixCls:S,ref:m})),void 0!==O?s.createElement("span",null,O):null)};var w=s.forwardRef(P),O=s.forwardRef((function(e,t){var n,c=s.useContext(u.E_),p=c.getPrefixCls,g=c.direction,v=s.useContext(d.Z),h=(0,i.Z)(e.defaultValue,{value:e.value}),Z=(0,r.Z)(h,2),y=Z[0],x=Z[1],b=e.prefixCls,C=e.className,P=void 0===C?"":C,O=e.options,j=e.buttonStyle,k=void 0===j?"outline":j,I=e.disabled,E=e.children,S=e.size,N=e.style,_=e.id,F=e.onMouseEnter,M=e.onMouseLeave,R=e.onFocus,A=e.onBlur,T=p("radio",b),B="".concat(T,"-group"),W=E;O&&O.length>0&&(W=O.map((function(e){return"string"==typeof e||"number"==typeof e?s.createElement(w,{key:e.toString(),prefixCls:T,disabled:I,value:e,checked:y===e},e):s.createElement(w,{key:"radio-group-value-options-".concat(e.value),prefixCls:T,disabled:e.disabled||I,value:e.value,checked:y===e.value,style:e.style},e.label)})));var D=S||v,q=l()(B,"".concat(B,"-").concat(k),(n={},(0,a.Z)(n,"".concat(B,"-").concat(D),D),(0,a.Z)(n,"".concat(B,"-rtl"),"rtl"===g),n),P);return s.createElement("div",(0,o.Z)({},(0,f.Z)(e),{className:q,style:N,onMouseEnter:F,onMouseLeave:M,onFocus:R,onBlur:A,id:_,ref:t}),s.createElement(m,{value:{onChange:function(t){var n=y,o=t.target.value;"value"in e||x(o);var a=e.onChange;a&&o!==n&&a(t)},value:y,disabled:e.disabled,name:e.name,optionType:e.optionType}},W))})),j=s.memo(O),k=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},I=function(e,t){var n=s.useContext(u.E_).getPrefixCls,a=e.prefixCls,r=k(e,["prefixCls"]),c=n("radio",a);return s.createElement(h,{value:"button"},s.createElement(w,(0,o.Z)({prefixCls:c},r,{type:"radio",ref:t})))},E=s.forwardRef(I),S=w;S.Button=E,S.Group=j,S.__ANT_RADIO=!0;var N=S},28756:function(e,t,n){"use strict";var o=n(22481),a=n(88028),r=n(84875),c=n.n(r),l=n(40804),i=n(54331),s=n(63313),u=n(82259),d=n(23474),f=n(7893),p=n(65189),m=n(76737),g=n(16082),v=n(1020),h=n(91967),Z=n(60934),y=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},x="SECRET_COMBOBOX_MODE_DO_NOT_USE",b=function(e,t){var n,r,b=e.prefixCls,C=e.bordered,P=void 0===C||C,w=e.className,O=e.getPopupContainer,j=e.dropdownClassName,k=e.popupClassName,I=e.listHeight,E=void 0===I?256:I,S=e.placement,N=e.listItemHeight,_=void 0===N?24:N,F=e.size,M=e.disabled,R=e.notFoundContent,A=e.status,T=e.showArrow,B=y(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),W=s.useContext(u.E_),D=W.getPopupContainer,q=W.getPrefixCls,L=W.renderEmpty,z=W.direction,H=W.virtual,G=W.dropdownMatchSelectWidth,U=s.useContext(p.Z),V=q("select",b),X=q(),K=(0,Z.ri)(V,z),Q=K.compactSize,J=K.compactItemClassnames,Y=s.useMemo((function(){var e=B.mode;if("combobox"!==e)return e===x?"combobox":e}),[B.mode]),$="multiple"===Y||"tags"===Y,ee=void 0!==T?T:B.loading||!($||"combobox"===Y),te=(0,s.useContext)(m.aM),ne=te.status,oe=te.hasFeedback,ae=te.isFormItemInput,re=te.feedbackIcon,ce=(0,v.F)(ne,A);r=void 0!==R?R:"combobox"===Y?null:(L||d.Z)("Select");var le=(0,h.Z)((0,a.Z)((0,a.Z)({},B),{multiple:$,hasFeedback:oe,feedbackIcon:re,showArrow:ee,prefixCls:V})),ie=le.suffixIcon,se=le.itemIcon,ue=le.removeIcon,de=le.clearIcon,fe=(0,i.Z)(B,["suffixIcon","itemIcon"]),pe=c()(k||j,(0,o.Z)({},"".concat(V,"-dropdown-").concat(z),"rtl"===z)),me=Q||F||U,ge=s.useContext(f.Z),ve=null!=M?M:ge,he=c()((n={},(0,o.Z)(n,"".concat(V,"-lg"),"large"===me),(0,o.Z)(n,"".concat(V,"-sm"),"small"===me),(0,o.Z)(n,"".concat(V,"-rtl"),"rtl"===z),(0,o.Z)(n,"".concat(V,"-borderless"),!P),(0,o.Z)(n,"".concat(V,"-in-form-item"),ae),n),(0,v.Z)(V,ce,oe),J,w);return s.createElement(l.ZP,(0,a.Z)({ref:t,virtual:H,dropdownMatchSelectWidth:G},fe,{transitionName:(0,g.mL)(X,(0,g.q0)(S),B.transitionName),listHeight:E,listItemHeight:_,mode:Y,prefixCls:V,placement:void 0!==S?S:"rtl"===z?"bottomRight":"bottomLeft",direction:z,inputIcon:ie,menuItemSelectedIcon:se,removeIcon:ue,clearIcon:de,notFoundContent:r,className:he,getPopupContainer:O||D,dropdownClassName:pe,showArrow:oe||T,disabled:ve}))},C=s.forwardRef(b);C.SECRET_COMBOBOX_MODE_DO_NOT_USE=x,C.Option=l.Wx,C.OptGroup=l.Xo,t.Z=C},24669:function(e){var t=Array.isArray;e.exports=t},69370:function(e,t,n){"use strict";var o=n(88028),a=n(2595),r=n(22481),c=n(41171),l=n(4155),i=n(84875),s=n.n(i),u=n(16376),d=n(63313),f=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"],p=(0,d.forwardRef)((function(e,t){var n,i=e.prefixCls,p=void 0===i?"rc-checkbox":i,m=e.className,g=e.style,v=e.checked,h=e.disabled,Z=e.defaultChecked,y=void 0!==Z&&Z,x=e.type,b=void 0===x?"checkbox":x,C=e.onChange,P=(0,l.Z)(e,f),w=(0,d.useRef)(null),O=(0,u.Z)(y,{value:v}),j=(0,c.Z)(O,2),k=j[0],I=j[1];(0,d.useImperativeHandle)(t,(function(){return{focus:function(){var e;null===(e=w.current)||void 0===e||e.focus()},blur:function(){var e;null===(e=w.current)||void 0===e||e.blur()},input:w.current}}));var E=s()(p,m,(n={},(0,r.Z)(n,"".concat(p,"-checked"),k),(0,r.Z)(n,"".concat(p,"-disabled"),h),n));return d.createElement("span",{className:E,style:g},d.createElement("input",(0,o.Z)({},P,{className:"".concat(p,"-input"),ref:w,onChange:function(t){h||("checked"in e||I(t.target.checked),null==C||C({target:(0,a.Z)((0,a.Z)({},e),{},{type:b,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:h,checked:!!k,type:b})),d.createElement("span",{className:"".concat(p,"-inner")}))}));t.Z=p}}]);