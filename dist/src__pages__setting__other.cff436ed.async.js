(self.webpackChunk=self.webpackChunk||[]).push([[6465,3830],{14761:function(e,t,n){"use strict";n.r(t);var o=n(57213),a=n.n(o),r=n(54306),c=n.n(r),l=n(88265),i=n(63313),s=n(67393),u=n(9835),d=n(84163),p=n(84468),f=n(22159),m=n(55484),v=n(24378),g=n(28756),h=n(57679),Z=n(71571),y=n(5558),x=n(95176),b=n(60819),C=n(11227),P=(n(56508),n(59953)),w=n(41422),O=n(54700),j=n(11527);t.default=function(e){var t=e.systemInfo,n=e.socketMessage,o=e.reloadTheme,r=localStorage.getItem("qinglong_dark_theme")||"auto",k=(0,i.useState)(),I=c()(k,2),E=I[0],S=I[1],N=s.Z.useForm(),_=c()(N,1)[0],M=((0,i.useRef)(),(0,i.useState)(!1)),F=c()(M,2),R=F[0],A=F[1],T=(0,O.default)(l.ZP.get("上传")),B=(0,O.default)(l.ZP.get("下载")),W=Z||{},D=W.enable,q=W.disable,L=(W.exportGeneratedCSS,W.setFetchMethod),z=W.auto,H=function(){x.W.put("".concat(y.Z.apiPrefix,"system/config"),E).then((function(e){var t=e.code;e.data;200===t&&u.ZP.success(l.ZP.get("更新成功"))})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){x.W.get("".concat(y.Z.apiPrefix,"system/config")).then((function(e){var t=e.code,n=e.data;200===t&&n.info&&S(n.info)})).catch((function(e){console.log(e)}))}),[]),(0,j.jsxs)(s.Z,{layout:"vertical",form:_,children:[(0,j.jsx)(s.Z.Item,{label:l.ZP.get("主题"),name:"theme",initialValue:r,children:(0,j.jsxs)(p.ZP.Group,{onChange:function(e){var t=e.target.value;localStorage.setItem("qinglong_dark_theme",e.target.value),L(fetch),"dark"===t?D({}):"light"===t?q():z({}),o()},value:r,optionType:"button",buttonStyle:"solid",children:[(0,j.jsx)(p.ZP.Button,{value:"light",style:{width:70,textAlign:"center"},children:l.ZP.get("亮色")}),(0,j.jsx)(p.ZP.Button,{value:"dark",style:{width:66,textAlign:"center"},children:l.ZP.get("暗色")}),(0,j.jsx)(p.ZP.Button,{value:"auto",style:{width:129,textAlign:"center"},children:l.ZP.get("跟随系统")})]})}),(0,j.jsx)(s.Z.Item,{label:l.ZP.get("日志删除频率"),name:"frequency",tooltip:l.ZP.get("每x天自动删除x天以前的日志"),children:(0,j.jsxs)(f.Z.Group,{compact:!0,children:[(0,j.jsx)(m.Z,{addonBefore:l.ZP.get("每"),addonAfter:l.ZP.get("天"),style:{width:180},min:0,value:null==E?void 0:E.logRemoveFrequency,onChange:function(e){S(a()(a()({},E),{},{logRemoveFrequency:e}))}}),(0,j.jsx)(v.Z,{type:"primary",onClick:H,style:{width:84},children:l.ZP.get("确认")})]})}),(0,j.jsx)(s.Z.Item,{label:l.ZP.get("定时任务并发数"),name:"frequency",children:(0,j.jsxs)(f.Z.Group,{compact:!0,children:[(0,j.jsx)(m.Z,{style:{width:180},min:1,value:null==E?void 0:E.cronConcurrency,onChange:function(e){S(a()(a()({},E),{},{cronConcurrency:e}))}}),(0,j.jsx)(v.Z,{type:"primary",onClick:H,style:{width:84},children:l.ZP.get("确认")})]})}),(0,j.jsx)(s.Z.Item,{label:l.ZP.get("语言"),name:"lang",children:(0,j.jsx)(g.Z,{defaultValue:localStorage.getItem("lang")||"",style:{width:264},onChange:function(e){localStorage.setItem("lang",e),setTimeout((function(){window.location.reload()}),500)},options:[{value:"",label:l.ZP.get("跟随系统")},{value:"zh",label:"简体中文"},{value:"en",label:"English"}]})}),(0,j.jsxs)(s.Z.Item,{label:l.ZP.get("数据备份还原"),name:"frequency",children:[(0,j.jsx)(v.Z,{type:"primary",onClick:function(){A(!0),x.W.put("".concat(y.Z.apiPrefix,"system/data/export"),{},{responseType:"blob",timeout:864e5,onDownloadProgress:function(e){e.progress&&B(parseFloat((100*e.progress).toFixed(1)))}}).then((function(e){(0,C.saveAs)(e,"data.tgz")})).catch((function(e){console.log(e)})).finally((function(){return A(!1)}))},loading:R,children:R?l.ZP.get("生成数据中..."):l.ZP.get("备份")}),(0,j.jsx)(h.Z,{method:"put",showUploadList:!1,maxCount:1,action:"/api/system/data/import",onChange:function(e){var t,n,o;null!==(t=e.event)&&void 0!==t&&t.percent&&(T(parseFloat(null===(n=e.event)||void 0===n?void 0:n.percent.toFixed(1))),100===(null===(o=e.event)||void 0===o?void 0:o.percent)&&d.Z.confirm({width:600,maskClosable:!1,title:l.ZP.get("确认重启"),centered:!0,content:l.ZP.get("备份数据上传成功，确认覆盖数据"),okText:l.ZP.get("重启"),onOk:function(){x.W.put("".concat(y.Z.apiPrefix,"system/reload"),{type:"data"}).then((function(){u.ZP.success({content:(0,j.jsxs)("span",{children:[l.ZP.get("系统将在"),(0,j.jsx)(w.Z,{className:"inline-countdown",format:"ss",value:Date.now()+3e4}),l.ZP.get("秒后自动刷新")]}),duration:30}),setTimeout((function(){window.location.reload()}),3e4)})).catch((function(e){console.log(e)}))}}))},name:"data",headers:{Authorization:"Bearer ".concat(localStorage.getItem(y.Z.authKey))},children:(0,j.jsx)(v.Z,{icon:(0,j.jsx)(P.Z,{}),style:{marginLeft:8},children:l.ZP.get("还原数据")})})]}),(0,j.jsx)(s.Z.Item,{label:l.ZP.get("检查更新"),name:"update",children:(0,j.jsx)(b.default,{systemInfo:t,socketMessage:n})})]})}},54700:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n(13800),a=n(84163),r=n(63313),c=n(11527);function l(e){var t=(0,r.useRef)(),n=function(e){var t=e.percent;return(0,c.jsx)(o.Z,{style:{display:"flex",justifyContent:"center"},type:"circle",percent:t})};return function(o){t.current?t.current.update({title:"".concat(e).concat(o>=100?"成功":"中..."),content:(0,c.jsx)(n,{percent:o})}):t.current=a.Z.info({width:600,maskClosable:!1,title:"".concat(e).concat(o>=100?"成功":"中..."),centered:!0,content:(0,c.jsx)(n,{percent:o})})}}},56508:function(){},60822:function(e,t,n){"use strict";function o(e){return Object.keys(e).reduce((function(t,n){return!n.startsWith("data-")&&!n.startsWith("aria-")&&"role"!==n||n.startsWith("data-__")||(t[n]=e[n]),t}),{})}n.d(t,{Z:function(){return o}})},92235:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(17079),a=n(63313);function r(){var e=a.useReducer((function(e){return e+1}),0);return(0,o.Z)(e,2)[1]}},84468:function(e,t,n){"use strict";n.d(t,{ZP:function(){return N}});var o=n(60795),a=n(87807),r=n(17079),c=n(84875),l=n.n(c),i=n(26230),s=n(63313),u=n(82259),d=n(65189),p=n(60822),f=s.createContext(null),m=f.Provider,v=f,g=s.createContext(null),h=g.Provider,Z=n(69370),y=n(33951),x=n(7893),b=n(76737),C=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},P=function(e,t){var n,r=s.useContext(v),c=s.useContext(g),i=s.useContext(u.E_),d=i.getPrefixCls,p=i.direction,f=s.useRef(),m=(0,y.sQ)(t,f),h=(0,s.useContext)(b.aM).isFormItemInput,P=e.prefixCls,w=e.className,O=e.children,j=e.style,k=e.disabled,I=C(e,["prefixCls","className","children","style","disabled"]),E=d("radio",P),S="button"===((null==r?void 0:r.optionType)||c)?"".concat(E,"-button"):E,N=(0,o.Z)({},I),_=s.useContext(x.Z);N.disabled=k||_,r&&(N.name=r.name,N.onChange=function(t){var n,o;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(o=null==r?void 0:r.onChange)||void 0===o||o.call(r,t)},N.checked=e.value===r.value,N.disabled=N.disabled||r.disabled);var M=l()("".concat(S,"-wrapper"),(n={},(0,a.Z)(n,"".concat(S,"-wrapper-checked"),N.checked),(0,a.Z)(n,"".concat(S,"-wrapper-disabled"),N.disabled),(0,a.Z)(n,"".concat(S,"-wrapper-rtl"),"rtl"===p),(0,a.Z)(n,"".concat(S,"-wrapper-in-form-item"),h),n),w);return s.createElement("label",{className:M,style:j,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},s.createElement(Z.Z,(0,o.Z)({},N,{type:"radio",prefixCls:S,ref:m})),void 0!==O?s.createElement("span",null,O):null)};var w=s.forwardRef(P),O=s.forwardRef((function(e,t){var n,c=s.useContext(u.E_),f=c.getPrefixCls,v=c.direction,g=s.useContext(d.Z),h=(0,i.Z)(e.defaultValue,{value:e.value}),Z=(0,r.Z)(h,2),y=Z[0],x=Z[1],b=e.prefixCls,C=e.className,P=void 0===C?"":C,O=e.options,j=e.buttonStyle,k=void 0===j?"outline":j,I=e.disabled,E=e.children,S=e.size,N=e.style,_=e.id,M=e.onMouseEnter,F=e.onMouseLeave,R=e.onFocus,A=e.onBlur,T=f("radio",b),B="".concat(T,"-group"),W=E;O&&O.length>0&&(W=O.map((function(e){return"string"==typeof e||"number"==typeof e?s.createElement(w,{key:e.toString(),prefixCls:T,disabled:I,value:e,checked:y===e},e):s.createElement(w,{key:"radio-group-value-options-".concat(e.value),prefixCls:T,disabled:e.disabled||I,value:e.value,checked:y===e.value,style:e.style},e.label)})));var D=S||g,q=l()(B,"".concat(B,"-").concat(k),(n={},(0,a.Z)(n,"".concat(B,"-").concat(D),D),(0,a.Z)(n,"".concat(B,"-rtl"),"rtl"===v),n),P);return s.createElement("div",(0,o.Z)({},(0,p.Z)(e),{className:q,style:N,onMouseEnter:M,onMouseLeave:F,onFocus:R,onBlur:A,id:_,ref:t}),s.createElement(m,{value:{onChange:function(t){var n=y,o=t.target.value;"value"in e||x(o);var a=e.onChange;a&&o!==n&&a(t)},value:y,disabled:e.disabled,name:e.name,optionType:e.optionType}},W))})),j=s.memo(O),k=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},I=function(e,t){var n=s.useContext(u.E_).getPrefixCls,a=e.prefixCls,r=k(e,["prefixCls"]),c=n("radio",a);return s.createElement(h,{value:"button"},s.createElement(w,(0,o.Z)({prefixCls:c},r,{type:"radio",ref:t})))},E=s.forwardRef(I),S=w;S.Button=E,S.Group=j,S.__ANT_RADIO=!0;var N=S},28756:function(e,t,n){"use strict";var o=n(87807),a=n(60795),r=n(84875),c=n.n(r),l=n(40804),i=n(92976),s=n(63313),u=n(82259),d=n(23474),p=n(7893),f=n(65189),m=n(76737),v=n(16082),g=n(1020),h=n(91967),Z=n(60934),y=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},x="SECRET_COMBOBOX_MODE_DO_NOT_USE",b=function(e,t){var n,r,b=e.prefixCls,C=e.bordered,P=void 0===C||C,w=e.className,O=e.getPopupContainer,j=e.dropdownClassName,k=e.popupClassName,I=e.listHeight,E=void 0===I?256:I,S=e.placement,N=e.listItemHeight,_=void 0===N?24:N,M=e.size,F=e.disabled,R=e.notFoundContent,A=e.status,T=e.showArrow,B=y(e,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),W=s.useContext(u.E_),D=W.getPopupContainer,q=W.getPrefixCls,L=W.renderEmpty,z=W.direction,H=W.virtual,G=W.dropdownMatchSelectWidth,U=s.useContext(f.Z),V=q("select",b),X=q(),K=(0,Z.ri)(V,z),Q=K.compactSize,J=K.compactItemClassnames,Y=s.useMemo((function(){var e=B.mode;if("combobox"!==e)return e===x?"combobox":e}),[B.mode]),$="multiple"===Y||"tags"===Y,ee=void 0!==T?T:B.loading||!($||"combobox"===Y),te=(0,s.useContext)(m.aM),ne=te.status,oe=te.hasFeedback,ae=te.isFormItemInput,re=te.feedbackIcon,ce=(0,g.F)(ne,A);r=void 0!==R?R:"combobox"===Y?null:(L||d.Z)("Select");var le=(0,h.Z)((0,a.Z)((0,a.Z)({},B),{multiple:$,hasFeedback:oe,feedbackIcon:re,showArrow:ee,prefixCls:V})),ie=le.suffixIcon,se=le.itemIcon,ue=le.removeIcon,de=le.clearIcon,pe=(0,i.Z)(B,["suffixIcon","itemIcon"]),fe=c()(k||j,(0,o.Z)({},"".concat(V,"-dropdown-").concat(z),"rtl"===z)),me=Q||M||U,ve=s.useContext(p.Z),ge=null!=F?F:ve,he=c()((n={},(0,o.Z)(n,"".concat(V,"-lg"),"large"===me),(0,o.Z)(n,"".concat(V,"-sm"),"small"===me),(0,o.Z)(n,"".concat(V,"-rtl"),"rtl"===z),(0,o.Z)(n,"".concat(V,"-borderless"),!P),(0,o.Z)(n,"".concat(V,"-in-form-item"),ae),n),(0,g.Z)(V,ce,oe),J,w);return s.createElement(l.ZP,(0,a.Z)({ref:t,virtual:H,dropdownMatchSelectWidth:G},pe,{transitionName:(0,v.mL)(X,(0,v.q0)(S),B.transitionName),listHeight:E,listItemHeight:_,mode:Y,prefixCls:V,placement:void 0!==S?S:"rtl"===z?"bottomRight":"bottomLeft",direction:z,inputIcon:ie,menuItemSelectedIcon:se,removeIcon:ue,clearIcon:de,notFoundContent:r,className:he,getPopupContainer:O||D,dropdownClassName:fe,showArrow:oe||T,disabled:ge}))},C=s.forwardRef(b);C.SECRET_COMBOBOX_MODE_DO_NOT_USE=x,C.Option=l.Wx,C.OptGroup=l.Xo,t.Z=C},24669:function(e){var t=Array.isArray;e.exports=t},69370:function(e,t,n){"use strict";var o=n(60795),a=n(14797),r=n(87807),c=n(17079),l=n(67725),i=n(84875),s=n.n(i),u=n(26230),d=n(63313),p=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"],f=(0,d.forwardRef)((function(e,t){var n,i=e.prefixCls,f=void 0===i?"rc-checkbox":i,m=e.className,v=e.style,g=e.checked,h=e.disabled,Z=e.defaultChecked,y=void 0!==Z&&Z,x=e.type,b=void 0===x?"checkbox":x,C=e.onChange,P=(0,l.Z)(e,p),w=(0,d.useRef)(null),O=(0,u.Z)(y,{value:g}),j=(0,c.Z)(O,2),k=j[0],I=j[1];(0,d.useImperativeHandle)(t,(function(){return{focus:function(){var e;null===(e=w.current)||void 0===e||e.focus()},blur:function(){var e;null===(e=w.current)||void 0===e||e.blur()},input:w.current}}));var E=s()(f,m,(n={},(0,r.Z)(n,"".concat(f,"-checked"),k),(0,r.Z)(n,"".concat(f,"-disabled"),h),n));return d.createElement("span",{className:E,style:v},d.createElement("input",(0,o.Z)({},P,{className:"".concat(f,"-input"),ref:w,onChange:function(t){h||("checked"in e||I(t.target.checked),null==C||C({target:(0,a.Z)((0,a.Z)({},e),{},{type:b,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:h,checked:!!k,type:b})),d.createElement("span",{className:"".concat(f,"-inner")}))}));t.Z=f}}]);