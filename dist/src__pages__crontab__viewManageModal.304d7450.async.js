"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[349],{13740:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(14797),c=t(63313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},r=t(46420),o=function(e,n){return c.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:n,icon:i}))};o.displayName="DeleteOutlined";var l=c.forwardRef(o)},26839:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(14797),c=t(63313),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},r=t(46420),o=function(e,n){return c.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:n,icon:i}))};o.displayName="PlusOutlined";var l=c.forwardRef(o)},3038:function(e,n,t){t.r(n);var a=t(93525),c=t.n(a),i=t(57213),r=t.n(i),o=t(54306),l=t.n(o),s=t(12342),d=t.n(s),u=t(88265),f=t(63313),h=t(92260),m=t(16861),v=t(2947),g=t(84163),p=t(9835),Z=t(24378),x=t(94674),w=t(57229),C=t(15207),b=t(32132),y=t(13740),k=t(81871),P=t(21778),j=t(12701),N=t(66255),O=t(10419),D=t(11527),E=["index","moveRow","className","style"],I=h.Z.Text,R="DragableBodyRow",z=function(e){var n=e.index,t=e.moveRow,a=e.className,c=e.style,i=d()(e,E),o=(0,f.useRef)(),s=(0,k.L)({accept:R,collect:function(e){var t=(e.getItem()||{}).index;return t===n?{}:{isOver:e.isOver(),dropClassName:t<n?" drop-over-downward":" drop-over-upward"}},drop:function(e){t(e.index,n)}}),u=l()(s,2),h=u[0],m=h.isOver,v=h.dropClassName,g=u[1],p=(0,P.c)({type:R,item:{index:n},collect:function(e){return{isDragging:e.isDragging()}}});return g((0,l()(p,2)[1])(o)),(0,D.jsx)("tr",r()({ref:o,className:"".concat(a).concat(m?v:""),style:r()({cursor:"move"},c)},i))};n.default=function(e){var n=e.cronViews,t=e.handleCancel,a=e.visible,i=e.cronViewChange,o=function(e){return k.filter((function(e){return!e.isDisabled})).length<=1&&!e.isDisabled},s=[{title:u.ZP.get("名称"),dataIndex:"name",key:"name",render:function(e){return"全部任务"===e?u.ZP.get("全部任务"):e}},{title:u.ZP.get("类型"),dataIndex:"type",key:"type",render:function(e){return 1===e?u.ZP.get("系统"):u.ZP.get("个人")}},{title:u.ZP.get("显示"),key:"isDisabled",dataIndex:"isDisabled",width:100,render:function(e,n,t){return(0,D.jsx)(m.Z,{disabled:o(n),checked:!n.isDisabled,onChange:function(e){return V(e,n,t)}})}},{title:u.ZP.get("操作"),key:"action",width:100,render:function(e,n,t){return 1!==n.type?(0,D.jsxs)(v.Z,{size:"middle",children:[(0,D.jsx)("a",{onClick:function(){return K(n,t)},children:(0,D.jsx)(b.Z,{})}),!o(n)&&(0,D.jsx)("a",{onClick:function(){return M(n,t)},children:(0,D.jsx)(y.Z,{})})]}):"-"}}],d=(0,f.useState)([]),h=l()(d,2),k=h[0],P=h[1],E=(0,f.useState)(!1),R=l()(E,2),q=R[0],S=R[1],H=(0,f.useState)(null),B=l()(H,2),T=B[0],W=B[1],K=function(e,n){W(e),S(!0)},M=function(e,n){g.Z.confirm({title:u.ZP.get("确认删除"),content:(0,D.jsxs)(D.Fragment,{children:[u.ZP.get("确认删除视图")," ",(0,D.jsx)(I,{style:{wordBreak:"break-all"},type:"warning",children:e.name})," ",u.ZP.get("吗")]}),onOk:function(){w.W.delete("".concat(C.Z.apiPrefix,"crons/views"),{data:[e.id]}).then((function(e){var n=e.code;e.data;200===n&&(p.ZP.success(u.ZP.get("删除成功")),i())}))},onCancel:function(){console.log("Cancel")}})},V=function(e,n,t){w.W.put("".concat(C.Z.apiPrefix,"crons/views/").concat(e?"enable":"disable"),[n.id]).then((function(n){var a=n.code;n.data;if(200===a){var o=c()(k);o.splice(t,1,r()(r()({},k[t]),{},{isDisabled:!e})),P(o),i()}}))},_={body:{row:z}},F=(0,f.useCallback)((function(e,n){if(e!==n){var t=k[e];w.W.put("".concat(C.Z.apiPrefix,"crons/views/move"),{fromIndex:e,toIndex:n,id:t.id}).then((function(a){var o=a.code,l=a.data;if(200===o){var s=c()(k);s.splice(e,1),s.splice(n,0,r()(r()({},t),l)),P(s),i()}}))}}),[k]);return(0,f.useEffect)((function(){P(n)}),[n]),(0,D.jsxs)(g.Z,{title:u.ZP.get("视图管理"),open:a,centered:!0,width:620,onCancel:function(){return t()},className:"view-manage-modal",forceRender:!0,footer:!1,maskClosable:!1,children:[(0,D.jsx)(v.Z,{style:{display:"flex",justifyContent:"flex-end",marginBottom:10},children:(0,D.jsx)(Z.Z,{type:"primary",onClick:function(){W(null),S(!0)},children:u.ZP.get("创建视图")},"2")}),(0,D.jsx)(j.W,{backend:N.PD,children:(0,D.jsx)(x.Z,{bordered:!0,columns:s,pagination:!1,dataSource:k,rowKey:"id",size:"middle",style:{marginBottom:20},components:_,onRow:function(e,n){return{index:n,moveRow:F}}})}),(0,D.jsx)(O.default,{view:T,visible:q,handleCancel:function(e){S(!1),i(e)}})]})}},16861:function(e,n,t){t.d(n,{Z:function(){return C}});var a=t(88028),c=t(22481),i=t(24090),r=t(84875),o=t.n(r),l=t(41171),s=t(4155),d=t(63313),u=t(16376),f=t(32602),h=d.forwardRef((function(e,n){var t,a=e.prefixCls,i=void 0===a?"rc-switch":a,r=e.className,h=e.checked,m=e.defaultChecked,v=e.disabled,g=e.loadingIcon,p=e.checkedChildren,Z=e.unCheckedChildren,x=e.onClick,w=e.onChange,C=e.onKeyDown,b=(0,s.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),y=(0,u.Z)(!1,{value:h,defaultValue:m}),k=(0,l.Z)(y,2),P=k[0],j=k[1];function N(e,n){var t=P;return v||(j(t=e),null==w||w(t,n)),t}var O=o()(i,r,(t={},(0,c.Z)(t,"".concat(i,"-checked"),P),(0,c.Z)(t,"".concat(i,"-disabled"),v),t));return d.createElement("button",Object.assign({},b,{type:"button",role:"switch","aria-checked":P,disabled:v,className:O,ref:n,onKeyDown:function(e){e.which===f.Z.LEFT?N(!1,e):e.which===f.Z.RIGHT&&N(!0,e),null==C||C(e)},onClick:function(e){var n=N(!P,e);null==x||x(n,e)}}),g,d.createElement("span",{className:"".concat(i,"-inner")},P?p:Z))}));h.displayName="Switch";var m=h,v=t(82259),g=t(7893),p=t(65189),Z=t(1570),x=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(a=Object.getOwnPropertySymbols(e);c<a.length;c++)n.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(e,a[c])&&(t[a[c]]=e[a[c]])}return t},w=d.forwardRef((function(e,n){var t,r=e.prefixCls,l=e.size,s=e.disabled,u=e.loading,f=e.className,h=void 0===f?"":f,w=x(e,["prefixCls","size","disabled","loading","className"]),C=d.useContext(v.E_),b=C.getPrefixCls,y=C.direction,k=d.useContext(p.Z),P=d.useContext(g.Z),j=(null!=s?s:P)||u,N=b("switch",r),O=d.createElement("div",{className:"".concat(N,"-handle")},u&&d.createElement(i.Z,{className:"".concat(N,"-loading-icon")})),D=o()((t={},(0,c.Z)(t,"".concat(N,"-small"),"small"===(l||k)),(0,c.Z)(t,"".concat(N,"-loading"),u),(0,c.Z)(t,"".concat(N,"-rtl"),"rtl"===y),t),h);return d.createElement(Z.Z,{insertExtraNode:!0},d.createElement(m,(0,a.Z)({},w,{prefixCls:N,className:D,disabled:j,ref:n,loadingIcon:O})))}));w.__ANT_SWITCH=!0;var C=w}}]);